(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function aw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lf={exports:{}},Qo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv;function hA(){if(Pv)return Qo;Pv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:t,type:s,key:u,ref:o!==void 0?o:null,props:l}}return Qo.Fragment=e,Qo.jsx=n,Qo.jsxs=n,Qo}var Uv;function pA(){return Uv||(Uv=1,lf.exports=hA()),lf.exports}var g=pA(),uf={exports:{}},ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lv;function mA(){if(Lv)return ve;Lv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),w=Symbol.iterator;function T(P){return P===null||typeof P!="object"?null:(P=w&&P[w]||P["@@iterator"],typeof P=="function"?P:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,C={};function R(P,Y,te){this.props=P,this.context=Y,this.refs=C,this.updater=te||E}R.prototype.isReactComponent={},R.prototype.setState=function(P,Y){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,Y,"setState")},R.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function k(){}k.prototype=R.prototype;function N(P,Y,te){this.props=P,this.context=Y,this.refs=C,this.updater=te||E}var I=N.prototype=new k;I.constructor=N,A(I,R.prototype),I.isPureReactComponent=!0;var L=Array.isArray;function H(){}var O={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function J(P,Y,te){var re=te.ref;return{$$typeof:t,type:P,key:Y,ref:re!==void 0?re:null,props:te}}function ie(P,Y){return J(P.type,Y,P.props)}function Z(P){return typeof P=="object"&&P!==null&&P.$$typeof===t}function ye(P){var Y={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(te){return Y[te]})}var ke=/\/+/g;function Je(P,Y){return typeof P=="object"&&P!==null&&P.key!=null?ye(""+P.key):Y.toString(36)}function st(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(H,H):(P.status="pending",P.then(function(Y){P.status==="pending"&&(P.status="fulfilled",P.value=Y)},function(Y){P.status==="pending"&&(P.status="rejected",P.reason=Y)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function z(P,Y,te,re,me){var we=typeof P;(we==="undefined"||we==="boolean")&&(P=null);var Te=!1;if(P===null)Te=!0;else switch(we){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(P.$$typeof){case t:case e:Te=!0;break;case y:return Te=P._init,z(Te(P._payload),Y,te,re,me)}}if(Te)return me=me(P),Te=re===""?"."+Je(P,0):re,L(me)?(te="",Te!=null&&(te=Te.replace(ke,"$&/")+"/"),z(me,Y,te,"",function(Qi){return Qi})):me!=null&&(Z(me)&&(me=ie(me,te+(me.key==null||P&&P.key===me.key?"":(""+me.key).replace(ke,"$&/")+"/")+Te)),Y.push(me)),1;Te=0;var _t=re===""?".":re+":";if(L(P))for(var rt=0;rt<P.length;rt++)re=P[rt],we=_t+Je(re,rt),Te+=z(re,Y,te,we,me);else if(rt=T(P),typeof rt=="function")for(P=rt.call(P),rt=0;!(re=P.next()).done;)re=re.value,we=_t+Je(re,rt++),Te+=z(re,Y,te,we,me);else if(we==="object"){if(typeof P.then=="function")return z(st(P),Y,te,re,me);throw Y=String(P),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Te}function Q(P,Y,te){if(P==null)return P;var re=[],me=0;return z(P,re,"","",function(we){return Y.call(te,we,me++)}),re}function ae(P){if(P._status===-1){var Y=P._result;Y=Y(),Y.then(function(te){(P._status===0||P._status===-1)&&(P._status=1,P._result=te)},function(te){(P._status===0||P._status===-1)&&(P._status=2,P._result=te)}),P._status===-1&&(P._status=0,P._result=Y)}if(P._status===1)return P._result.default;throw P._result}var _e=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},Se={map:Q,forEach:function(P,Y,te){Q(P,function(){Y.apply(this,arguments)},te)},count:function(P){var Y=0;return Q(P,function(){Y++}),Y},toArray:function(P){return Q(P,function(Y){return Y})||[]},only:function(P){if(!Z(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return ve.Activity=b,ve.Children=Se,ve.Component=R,ve.Fragment=n,ve.Profiler=o,ve.PureComponent=N,ve.StrictMode=s,ve.Suspense=f,ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,ve.__COMPILER_RUNTIME={__proto__:null,c:function(P){return O.H.useMemoCache(P)}},ve.cache=function(P){return function(){return P.apply(null,arguments)}},ve.cacheSignal=function(){return null},ve.cloneElement=function(P,Y,te){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var re=A({},P.props),me=P.key;if(Y!=null)for(we in Y.key!==void 0&&(me=""+Y.key),Y)!W.call(Y,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&Y.ref===void 0||(re[we]=Y[we]);var we=arguments.length-2;if(we===1)re.children=te;else if(1<we){for(var Te=Array(we),_t=0;_t<we;_t++)Te[_t]=arguments[_t+2];re.children=Te}return J(P.type,me,re)},ve.createContext=function(P){return P={$$typeof:u,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},ve.createElement=function(P,Y,te){var re,me={},we=null;if(Y!=null)for(re in Y.key!==void 0&&(we=""+Y.key),Y)W.call(Y,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(me[re]=Y[re]);var Te=arguments.length-2;if(Te===1)me.children=te;else if(1<Te){for(var _t=Array(Te),rt=0;rt<Te;rt++)_t[rt]=arguments[rt+2];me.children=_t}if(P&&P.defaultProps)for(re in Te=P.defaultProps,Te)me[re]===void 0&&(me[re]=Te[re]);return J(P,we,me)},ve.createRef=function(){return{current:null}},ve.forwardRef=function(P){return{$$typeof:d,render:P}},ve.isValidElement=Z,ve.lazy=function(P){return{$$typeof:y,_payload:{_status:-1,_result:P},_init:ae}},ve.memo=function(P,Y){return{$$typeof:p,type:P,compare:Y===void 0?null:Y}},ve.startTransition=function(P){var Y=O.T,te={};O.T=te;try{var re=P(),me=O.S;me!==null&&me(te,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(H,_e)}catch(we){_e(we)}finally{Y!==null&&te.types!==null&&(Y.types=te.types),O.T=Y}},ve.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},ve.use=function(P){return O.H.use(P)},ve.useActionState=function(P,Y,te){return O.H.useActionState(P,Y,te)},ve.useCallback=function(P,Y){return O.H.useCallback(P,Y)},ve.useContext=function(P){return O.H.useContext(P)},ve.useDebugValue=function(){},ve.useDeferredValue=function(P,Y){return O.H.useDeferredValue(P,Y)},ve.useEffect=function(P,Y){return O.H.useEffect(P,Y)},ve.useEffectEvent=function(P){return O.H.useEffectEvent(P)},ve.useId=function(){return O.H.useId()},ve.useImperativeHandle=function(P,Y,te){return O.H.useImperativeHandle(P,Y,te)},ve.useInsertionEffect=function(P,Y){return O.H.useInsertionEffect(P,Y)},ve.useLayoutEffect=function(P,Y){return O.H.useLayoutEffect(P,Y)},ve.useMemo=function(P,Y){return O.H.useMemo(P,Y)},ve.useOptimistic=function(P,Y){return O.H.useOptimistic(P,Y)},ve.useReducer=function(P,Y,te){return O.H.useReducer(P,Y,te)},ve.useRef=function(P){return O.H.useRef(P)},ve.useState=function(P){return O.H.useState(P)},ve.useSyncExternalStore=function(P,Y,te){return O.H.useSyncExternalStore(P,Y,te)},ve.useTransition=function(){return O.H.useTransition()},ve.version="19.2.3",ve}var Ov;function Hh(){return Ov||(Ov=1,uf.exports=mA()),uf.exports}var B=Hh();const la=aw(B);var cf={exports:{}},Zo={},df={exports:{}},ff={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function gA(){return Vv||(Vv=1,(function(t){function e(z,Q){var ae=z.length;z.push(Q);e:for(;0<ae;){var _e=ae-1>>>1,Se=z[_e];if(0<o(Se,Q))z[_e]=Q,z[ae]=Se,ae=_e;else break e}}function n(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var Q=z[0],ae=z.pop();if(ae!==Q){z[0]=ae;e:for(var _e=0,Se=z.length,P=Se>>>1;_e<P;){var Y=2*(_e+1)-1,te=z[Y],re=Y+1,me=z[re];if(0>o(te,ae))re<Se&&0>o(me,te)?(z[_e]=me,z[re]=ae,_e=re):(z[_e]=te,z[Y]=ae,_e=Y);else if(re<Se&&0>o(me,ae))z[_e]=me,z[re]=ae,_e=re;else break e}}return Q}function o(z,Q){var ae=z.sortIndex-Q.sortIndex;return ae!==0?ae:z.id-Q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var f=[],p=[],y=1,b=null,w=3,T=!1,E=!1,A=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function I(z){for(var Q=n(p);Q!==null;){if(Q.callback===null)s(p);else if(Q.startTime<=z)s(p),Q.sortIndex=Q.expirationTime,e(f,Q);else break;Q=n(p)}}function L(z){if(A=!1,I(z),!E)if(n(f)!==null)E=!0,H||(H=!0,ye());else{var Q=n(p);Q!==null&&st(L,Q.startTime-z)}}var H=!1,O=-1,W=5,J=-1;function ie(){return C?!0:!(t.unstable_now()-J<W)}function Z(){if(C=!1,H){var z=t.unstable_now();J=z;var Q=!0;try{e:{E=!1,A&&(A=!1,k(O),O=-1),T=!0;var ae=w;try{t:{for(I(z),b=n(f);b!==null&&!(b.expirationTime>z&&ie());){var _e=b.callback;if(typeof _e=="function"){b.callback=null,w=b.priorityLevel;var Se=_e(b.expirationTime<=z);if(z=t.unstable_now(),typeof Se=="function"){b.callback=Se,I(z),Q=!0;break t}b===n(f)&&s(f),I(z)}else s(f);b=n(f)}if(b!==null)Q=!0;else{var P=n(p);P!==null&&st(L,P.startTime-z),Q=!1}}break e}finally{b=null,w=ae,T=!1}Q=void 0}}finally{Q?ye():H=!1}}}var ye;if(typeof N=="function")ye=function(){N(Z)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,Je=ke.port2;ke.port1.onmessage=Z,ye=function(){Je.postMessage(null)}}else ye=function(){R(Z,0)};function st(z,Q){O=R(function(){z(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_next=function(z){switch(w){case 1:case 2:case 3:var Q=3;break;default:Q=w}var ae=w;w=Q;try{return z()}finally{w=ae}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(z,Q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ae=w;w=z;try{return Q()}finally{w=ae}},t.unstable_scheduleCallback=function(z,Q,ae){var _e=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?_e+ae:_e):ae=_e,z){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=ae+Se,z={id:y++,callback:Q,priorityLevel:z,startTime:ae,expirationTime:Se,sortIndex:-1},ae>_e?(z.sortIndex=ae,e(p,z),n(f)===null&&z===n(p)&&(A?(k(O),O=-1):A=!0,st(L,ae-_e))):(z.sortIndex=Se,e(f,z),E||T||(E=!0,H||(H=!0,ye()))),z},t.unstable_shouldYield=ie,t.unstable_wrapCallback=function(z){var Q=w;return function(){var ae=w;w=Q;try{return z.apply(this,arguments)}finally{w=ae}}}})(ff)),ff}var jv;function yA(){return jv||(jv=1,df.exports=gA()),df.exports}var hf={exports:{}},Lt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bv;function vA(){if(Bv)return Lt;Bv=1;var t=Hh();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(f,p,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:f,containerInfo:p,implementation:y}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Lt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Lt.createPortal=function(f,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(f,p,null,y)},Lt.flushSync=function(f){var p=u.T,y=s.p;try{if(u.T=null,s.p=2,f)return f()}finally{u.T=p,s.p=y,s.d.f()}},Lt.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(f,p))},Lt.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},Lt.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var y=p.as,b=d(y,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,T=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?s.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:w,fetchPriority:T}):y==="script"&&s.d.X(f,{crossOrigin:b,integrity:w,fetchPriority:T,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Lt.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);s.d.M(f,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(f)},Lt.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,b=d(y,p.crossOrigin);s.d.L(f,y,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Lt.preloadModule=function(f,p){if(typeof f=="string")if(p){var y=d(p.as,p.crossOrigin);s.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(f)},Lt.requestFormReset=function(f){s.d.r(f)},Lt.unstable_batchedUpdates=function(f,p){return f(p)},Lt.useFormState=function(f,p,y){return u.H.useFormState(f,p,y)},Lt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Lt.version="19.2.3",Lt}var Gv;function xA(){if(Gv)return hf.exports;Gv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),hf.exports=vA(),hf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function bA(){if(Hv)return Zo;Hv=1;var t=yA(),e=Hh(),n=xA();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function f(i){if(l(i)!==i)throw Error(s(188))}function p(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,c=r;;){var v=a.return;if(v===null)break;var x=v.alternate;if(x===null){if(c=v.return,c!==null){a=c;continue}break}if(v.child===x.child){for(x=v.child;x;){if(x===a)return f(v),i;if(x===c)return f(v),r;x=x.sibling}throw Error(s(188))}if(a.return!==c.return)a=v,c=x;else{for(var _=!1,S=v.child;S;){if(S===a){_=!0,a=v,c=x;break}if(S===c){_=!0,c=v,a=x;break}S=S.sibling}if(!_){for(S=x.child;S;){if(S===a){_=!0,a=x,c=v;break}if(S===c){_=!0,c=x,a=v;break}S=S.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function y(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=y(i),r!==null)return r;i=i.sibling}return null}var b=Object.assign,w=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),N=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),ie=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function ye(i){return i===null||typeof i!="object"?null:(i=Z&&i[Z]||i["@@iterator"],typeof i=="function"?i:null)}var ke=Symbol.for("react.client.reference");function Je(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ke?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case R:return"Profiler";case C:return"StrictMode";case L:return"Suspense";case H:return"SuspenseList";case J:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case E:return"Portal";case N:return i.displayName||"Context";case k:return(i._context.displayName||"Context")+".Consumer";case I:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case O:return r=i.displayName||null,r!==null?r:Je(i.type)||"Memo";case W:r=i._payload,i=i._init;try{return Je(i(r))}catch{}}return null}var st=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},_e=[],Se=-1;function P(i){return{current:i}}function Y(i){0>Se||(i.current=_e[Se],_e[Se]=null,Se--)}function te(i,r){Se++,_e[Se]=i.current,i.current=r}var re=P(null),me=P(null),we=P(null),Te=P(null);function _t(i,r){switch(te(we,r),te(me,i),te(re,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?iv(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=iv(r),i=sv(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Y(re),te(re,i)}function rt(){Y(re),Y(me),Y(we)}function Qi(i){i.memoizedState!==null&&te(Te,i);var r=re.current,a=sv(r,i.type);r!==a&&(te(me,i),te(re,a))}function io(i){me.current===i&&(Y(re),Y(me)),Te.current===i&&(Y(Te),Ko._currentValue=ae)}var so,Ju;function $n(i){if(so===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);so=r&&r[1]||"",Ju=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+so+i+Ju}var ro=!1;function Ps(i,r){if(!i||ro)return"";ro=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(q){var G=q}Reflect.construct(i,[],K)}else{try{K.call()}catch(q){G=q}i.call(K.prototype)}}else{try{throw Error()}catch(q){G=q}(K=i())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(q){if(q&&G&&typeof q.stack=="string")return[q.stack,G.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=c.DetermineComponentFrameRoot(),_=x[0],S=x[1];if(_&&S){var M=_.split(`
`),j=S.split(`
`);for(v=c=0;c<M.length&&!M[c].includes("DetermineComponentFrameRoot");)c++;for(;v<j.length&&!j[v].includes("DetermineComponentFrameRoot");)v++;if(c===M.length||v===j.length)for(c=M.length-1,v=j.length-1;1<=c&&0<=v&&M[c]!==j[v];)v--;for(;1<=c&&0<=v;c--,v--)if(M[c]!==j[v]){if(c!==1||v!==1)do if(c--,v--,0>v||M[c]!==j[v]){var F=`
`+M[c].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=c&&0<=v);break}}}finally{ro=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?$n(a):""}function ka(i,r){switch(i.tag){case 26:case 27:case 5:return $n(i.type);case 16:return $n("Lazy");case 13:return i.child!==r&&r!==null?$n("Suspense Fallback"):$n("Suspense");case 19:return $n("SuspenseList");case 0:case 15:return Ps(i.type,!1);case 11:return Ps(i.type.render,!1);case 1:return Ps(i.type,!0);case 31:return $n("Activity");default:return""}}function oo(i){try{var r="",a=null;do r+=ka(i,a),a=i,i=i.return;while(i);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Us=Object.prototype.hasOwnProperty,Ls=t.unstable_scheduleCallback,Os=t.unstable_cancelCallback,Jn=t.unstable_shouldYield,ao=t.unstable_requestPaint,Ge=t.unstable_now,Ku=t.unstable_getCurrentPriorityLevel,Da=t.unstable_ImmediatePriority,Pa=t.unstable_UserBlockingPriority,Vs=t.unstable_NormalPriority,Yu=t.unstable_LowPriority,Ua=t.unstable_IdlePriority,X=t.log,se=t.unstable_setDisableYieldValue,Ve=null,De=null;function Ee(i){if(typeof X=="function"&&se(i),De&&typeof De.setStrictMode=="function")try{De.setStrictMode(Ve,i)}catch{}}var Me=Math.clz32?Math.clz32:xi,Qe=Math.log,ft=Math.LN2;function xi(i){return i>>>=0,i===0?32:31-(Qe(i)/ft|0)|0}var Ye=256,Sn=262144,En=4194304;function An(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Vn(i,r,a){var c=i.pendingLanes;if(c===0)return 0;var v=0,x=i.suspendedLanes,_=i.pingedLanes;i=i.warmLanes;var S=c&134217727;return S!==0?(c=S&~x,c!==0?v=An(c):(_&=S,_!==0?v=An(_):a||(a=S&~i,a!==0&&(v=An(a))))):(S=c&~x,S!==0?v=An(S):_!==0?v=An(_):a||(a=c&~i,a!==0&&(v=An(a)))),v===0?0:r!==0&&r!==v&&(r&x)===0&&(x=v&-v,a=r&-r,x>=a||x===32&&(a&4194048)!==0)?r:v}function jn(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function jp(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tt(){var i=En;return En<<=1,(En&62914560)===0&&(En=4194304),i}function js(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function Zi(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function La(i,r,a,c,v,x){var _=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var S=i.entanglements,M=i.expirationTimes,j=i.hiddenUpdates;for(a=_&~a;0<a;){var F=31-Me(a),K=1<<F;S[F]=0,M[F]=-1;var G=j[F];if(G!==null)for(j[F]=null,F=0;F<G.length;F++){var q=G[F];q!==null&&(q.lane&=-536870913)}a&=~K}c!==0&&Tt(i,c,0),x!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=x&~(_&~r))}function Tt(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var c=31-Me(r);i.entangledLanes|=r,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function Bp(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var c=31-Me(a),v=1<<c;v&r|i[c]&r&&(i[c]|=r),a&=~v}}function Gp(i,r){var a=r&-r;return a=(a&42)!==0?1:Xu(a),(a&(i.suspendedLanes|r))!==0?0:a}function Xu(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Wu(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Hp(){var i=Q.p;return i!==0?i:(i=window.event,i===void 0?32:Cv(i.type))}function qp(i,r){var a=Q.p;try{return Q.p=i,r()}finally{Q.p=a}}var bi=Math.random().toString(36).slice(2),Ct="__reactFiber$"+bi,zt="__reactProps$"+bi,Bs="__reactContainer$"+bi,Qu="__reactEvents$"+bi,nS="__reactListeners$"+bi,iS="__reactHandles$"+bi,zp="__reactResources$"+bi,lo="__reactMarker$"+bi;function Zu(i){delete i[Ct],delete i[zt],delete i[Qu],delete i[nS],delete i[iS]}function Gs(i){var r=i[Ct];if(r)return r;for(var a=i.parentNode;a;){if(r=a[Bs]||a[Ct]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=dv(i);i!==null;){if(a=i[Ct])return a;i=dv(i)}return r}i=a,a=i.parentNode}return null}function Hs(i){if(i=i[Ct]||i[Bs]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function uo(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function qs(i){var r=i[zp];return r||(r=i[zp]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function St(i){i[lo]=!0}var Fp=new Set,$p={};function es(i,r){zs(i,r),zs(i+"Capture",r)}function zs(i,r){for($p[i]=r,i=0;i<r.length;i++)Fp.add(r[i])}var sS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jp={},Kp={};function rS(i){return Us.call(Kp,i)?!0:Us.call(Jp,i)?!1:sS.test(i)?Kp[i]=!0:(Jp[i]=!0,!1)}function Oa(i,r,a){if(rS(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function Va(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function Kn(i,r,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+c)}}function un(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Yp(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function oS(i,r,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,x=c.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return v.call(this)},set:function(_){a=""+_,x.call(this,_)}}),Object.defineProperty(i,r,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function ec(i){if(!i._valueTracker){var r=Yp(i)?"checked":"value";i._valueTracker=oS(i,r,""+i[r])}}function Xp(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return i&&(c=Yp(i)?i.checked?"true":"false":i.value),i=c,i!==a?(r.setValue(i),!0):!1}function ja(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var aS=/[\n"\\]/g;function cn(i){return i.replace(aS,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function tc(i,r,a,c,v,x,_,S){i.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.type=_:i.removeAttribute("type"),r!=null?_==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+un(r)):i.value!==""+un(r)&&(i.value=""+un(r)):_!=="submit"&&_!=="reset"||i.removeAttribute("value"),r!=null?nc(i,_,un(r)):a!=null?nc(i,_,un(a)):c!=null&&i.removeAttribute("value"),v==null&&x!=null&&(i.defaultChecked=!!x),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.name=""+un(S):i.removeAttribute("name")}function Wp(i,r,a,c,v,x,_,S){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.type=x),r!=null||a!=null){if(!(x!=="submit"&&x!=="reset"||r!=null)){ec(i);return}a=a!=null?""+un(a):"",r=r!=null?""+un(r):a,S||r===i.value||(i.value=r),i.defaultValue=r}c=c??v,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=S?i.checked:!!c,i.defaultChecked=!!c,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.name=_),ec(i)}function nc(i,r,a){r==="number"&&ja(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Fs(i,r,a,c){if(i=i.options,r){r={};for(var v=0;v<a.length;v++)r["$"+a[v]]=!0;for(a=0;a<i.length;a++)v=r.hasOwnProperty("$"+i[a].value),i[a].selected!==v&&(i[a].selected=v),v&&c&&(i[a].defaultSelected=!0)}else{for(a=""+un(a),r=null,v=0;v<i.length;v++){if(i[v].value===a){i[v].selected=!0,c&&(i[v].defaultSelected=!0);return}r!==null||i[v].disabled||(r=i[v])}r!==null&&(r.selected=!0)}}function Qp(i,r,a){if(r!=null&&(r=""+un(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+un(a):""}function Zp(i,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(s(92));if(st(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=un(r),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),ec(i)}function $s(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var lS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function em(i,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":c?i.setProperty(r,a):typeof a!="number"||a===0||lS.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function tm(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var v in r)c=r[v],r.hasOwnProperty(v)&&a[v]!==c&&em(i,v,c)}else for(var x in r)r.hasOwnProperty(x)&&em(i,x,r[x])}function ic(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ba(i){return cS.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Yn(){}var sc=null;function rc(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Js=null,Ks=null;function nm(i){var r=Hs(i);if(r&&(i=r.stateNode)){var a=i[zt]||null;e:switch(i=r.stateNode,r.type){case"input":if(tc(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+cn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==i&&c.form===i.form){var v=c[zt]||null;if(!v)throw Error(s(90));tc(c,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===i.form&&Xp(c)}break e;case"textarea":Qp(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Fs(i,!!a.multiple,r,!1)}}}var oc=!1;function im(i,r,a){if(oc)return i(r,a);oc=!0;try{var c=i(r);return c}finally{if(oc=!1,(Js!==null||Ks!==null)&&(Cl(),Js&&(r=Js,i=Ks,Ks=Js=null,nm(r),i)))for(r=0;r<i.length;r++)nm(i[r])}}function co(i,r){var a=i.stateNode;if(a===null)return null;var c=a[zt]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ac=!1;if(Xn)try{var fo={};Object.defineProperty(fo,"passive",{get:function(){ac=!0}}),window.addEventListener("test",fo,fo),window.removeEventListener("test",fo,fo)}catch{ac=!1}var wi=null,lc=null,Ga=null;function sm(){if(Ga)return Ga;var i,r=lc,a=r.length,c,v="value"in wi?wi.value:wi.textContent,x=v.length;for(i=0;i<a&&r[i]===v[i];i++);var _=a-i;for(c=1;c<=_&&r[a-c]===v[x-c];c++);return Ga=v.slice(i,1<c?1-c:void 0)}function Ha(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function qa(){return!0}function rm(){return!1}function Ft(i){function r(a,c,v,x,_){this._reactName=a,this._targetInst=v,this.type=c,this.nativeEvent=x,this.target=_,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(a=i[S],this[S]=a?a(x):x[S]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?qa:rm,this.isPropagationStopped=rm,this}return b(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=qa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=qa)},persist:function(){},isPersistent:qa}),r}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},za=Ft(ts),ho=b({},ts,{view:0,detail:0}),dS=Ft(ho),uc,cc,po,Fa=b({},ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==po&&(po&&i.type==="mousemove"?(uc=i.screenX-po.screenX,cc=i.screenY-po.screenY):cc=uc=0,po=i),uc)},movementY:function(i){return"movementY"in i?i.movementY:cc}}),om=Ft(Fa),fS=b({},Fa,{dataTransfer:0}),hS=Ft(fS),pS=b({},ho,{relatedTarget:0}),dc=Ft(pS),mS=b({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),gS=Ft(mS),yS=b({},ts,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),vS=Ft(yS),xS=b({},ts,{data:0}),am=Ft(xS),bS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_S={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TS(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=_S[i])?!!r[i]:!1}function fc(){return TS}var SS=b({},ho,{key:function(i){if(i.key){var r=bS[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Ha(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?wS[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fc,charCode:function(i){return i.type==="keypress"?Ha(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ha(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ES=Ft(SS),AS=b({},Fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lm=Ft(AS),CS=b({},ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fc}),NS=Ft(CS),RS=b({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),MS=Ft(RS),IS=b({},Fa,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),kS=Ft(IS),DS=b({},ts,{newState:0,oldState:0}),PS=Ft(DS),US=[9,13,27,32],hc=Xn&&"CompositionEvent"in window,mo=null;Xn&&"documentMode"in document&&(mo=document.documentMode);var LS=Xn&&"TextEvent"in window&&!mo,um=Xn&&(!hc||mo&&8<mo&&11>=mo),cm=" ",dm=!1;function fm(i,r){switch(i){case"keyup":return US.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hm(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ys=!1;function OS(i,r){switch(i){case"compositionend":return hm(r);case"keypress":return r.which!==32?null:(dm=!0,cm);case"textInput":return i=r.data,i===cm&&dm?null:i;default:return null}}function VS(i,r){if(Ys)return i==="compositionend"||!hc&&fm(i,r)?(i=sm(),Ga=lc=wi=null,Ys=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return um&&r.locale!=="ko"?null:r.data;default:return null}}var jS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pm(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!jS[i.type]:r==="textarea"}function mm(i,r,a,c){Js?Ks?Ks.push(c):Ks=[c]:Js=c,r=Pl(r,"onChange"),0<r.length&&(a=new za("onChange","change",null,a,c),i.push({event:a,listeners:r}))}var go=null,yo=null;function BS(i){Wy(i,0)}function $a(i){var r=uo(i);if(Xp(r))return i}function gm(i,r){if(i==="change")return r}var ym=!1;if(Xn){var pc;if(Xn){var mc="oninput"in document;if(!mc){var vm=document.createElement("div");vm.setAttribute("oninput","return;"),mc=typeof vm.oninput=="function"}pc=mc}else pc=!1;ym=pc&&(!document.documentMode||9<document.documentMode)}function xm(){go&&(go.detachEvent("onpropertychange",bm),yo=go=null)}function bm(i){if(i.propertyName==="value"&&$a(yo)){var r=[];mm(r,yo,i,rc(i)),im(BS,r)}}function GS(i,r,a){i==="focusin"?(xm(),go=r,yo=a,go.attachEvent("onpropertychange",bm)):i==="focusout"&&xm()}function HS(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return $a(yo)}function qS(i,r){if(i==="click")return $a(r)}function zS(i,r){if(i==="input"||i==="change")return $a(r)}function FS(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Qt=typeof Object.is=="function"?Object.is:FS;function vo(i,r){if(Qt(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var v=a[c];if(!Us.call(r,v)||!Qt(i[v],r[v]))return!1}return!0}function wm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function _m(i,r){var a=wm(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=r&&c>=r)return{node:a,offset:r-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=wm(a)}}function Tm(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Tm(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Sm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=ja(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=ja(i.document)}return r}function gc(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var $S=Xn&&"documentMode"in document&&11>=document.documentMode,Xs=null,yc=null,xo=null,vc=!1;function Em(i,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;vc||Xs==null||Xs!==ja(c)||(c=Xs,"selectionStart"in c&&gc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),xo&&vo(xo,c)||(xo=c,c=Pl(yc,"onSelect"),0<c.length&&(r=new za("onSelect","select",null,r,a),i.push({event:r,listeners:c}),r.target=Xs)))}function ns(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var Ws={animationend:ns("Animation","AnimationEnd"),animationiteration:ns("Animation","AnimationIteration"),animationstart:ns("Animation","AnimationStart"),transitionrun:ns("Transition","TransitionRun"),transitionstart:ns("Transition","TransitionStart"),transitioncancel:ns("Transition","TransitionCancel"),transitionend:ns("Transition","TransitionEnd")},xc={},Am={};Xn&&(Am=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function is(i){if(xc[i])return xc[i];if(!Ws[i])return i;var r=Ws[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in Am)return xc[i]=r[a];return i}var Cm=is("animationend"),Nm=is("animationiteration"),Rm=is("animationstart"),JS=is("transitionrun"),KS=is("transitionstart"),YS=is("transitioncancel"),Mm=is("transitionend"),Im=new Map,bc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bc.push("scrollEnd");function Cn(i,r){Im.set(i,r),es(r,[i])}var Ja=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},dn=[],Qs=0,wc=0;function Ka(){for(var i=Qs,r=wc=Qs=0;r<i;){var a=dn[r];dn[r++]=null;var c=dn[r];dn[r++]=null;var v=dn[r];dn[r++]=null;var x=dn[r];if(dn[r++]=null,c!==null&&v!==null){var _=c.pending;_===null?v.next=v:(v.next=_.next,_.next=v),c.pending=v}x!==0&&km(a,v,x)}}function Ya(i,r,a,c){dn[Qs++]=i,dn[Qs++]=r,dn[Qs++]=a,dn[Qs++]=c,wc|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function _c(i,r,a,c){return Ya(i,r,a,c),Xa(i)}function ss(i,r){return Ya(i,null,null,r),Xa(i)}function km(i,r,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var v=!1,x=i.return;x!==null;)x.childLanes|=a,c=x.alternate,c!==null&&(c.childLanes|=a),x.tag===22&&(i=x.stateNode,i===null||i._visibility&1||(v=!0)),i=x,x=x.return;return i.tag===3?(x=i.stateNode,v&&r!==null&&(v=31-Me(a),i=x.hiddenUpdates,c=i[v],c===null?i[v]=[r]:c.push(r),r.lane=a|536870912),x):null}function Xa(i){if(50<Go)throw Go=0,Id=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Zs={};function XS(i,r,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(i,r,a,c){return new XS(i,r,a,c)}function Tc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Wn(i,r){var a=i.alternate;return a===null?(a=Zt(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Dm(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Wa(i,r,a,c,v,x){var _=0;if(c=i,typeof i=="function")Tc(i)&&(_=1);else if(typeof i=="string")_=tA(i,a,re.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case J:return i=Zt(31,a,r,v),i.elementType=J,i.lanes=x,i;case A:return rs(a.children,v,x,r);case C:_=8,v|=24;break;case R:return i=Zt(12,a,r,v|2),i.elementType=R,i.lanes=x,i;case L:return i=Zt(13,a,r,v),i.elementType=L,i.lanes=x,i;case H:return i=Zt(19,a,r,v),i.elementType=H,i.lanes=x,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case N:_=10;break e;case k:_=9;break e;case I:_=11;break e;case O:_=14;break e;case W:_=16,c=null;break e}_=29,a=Error(s(130,i===null?"null":typeof i,"")),c=null}return r=Zt(_,a,r,v),r.elementType=i,r.type=c,r.lanes=x,r}function rs(i,r,a,c){return i=Zt(7,i,c,r),i.lanes=a,i}function Sc(i,r,a){return i=Zt(6,i,null,r),i.lanes=a,i}function Pm(i){var r=Zt(18,null,null,0);return r.stateNode=i,r}function Ec(i,r,a){return r=Zt(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Um=new WeakMap;function fn(i,r){if(typeof i=="object"&&i!==null){var a=Um.get(i);return a!==void 0?a:(r={value:i,source:r,stack:oo(r)},Um.set(i,r),r)}return{value:i,source:r,stack:oo(r)}}var er=[],tr=0,Qa=null,bo=0,hn=[],pn=0,_i=null,Bn=1,Gn="";function Qn(i,r){er[tr++]=bo,er[tr++]=Qa,Qa=i,bo=r}function Lm(i,r,a){hn[pn++]=Bn,hn[pn++]=Gn,hn[pn++]=_i,_i=i;var c=Bn;i=Gn;var v=32-Me(c)-1;c&=~(1<<v),a+=1;var x=32-Me(r)+v;if(30<x){var _=v-v%5;x=(c&(1<<_)-1).toString(32),c>>=_,v-=_,Bn=1<<32-Me(r)+v|a<<v|c,Gn=x+i}else Bn=1<<x|a<<v|c,Gn=i}function Ac(i){i.return!==null&&(Qn(i,1),Lm(i,1,0))}function Cc(i){for(;i===Qa;)Qa=er[--tr],er[tr]=null,bo=er[--tr],er[tr]=null;for(;i===_i;)_i=hn[--pn],hn[pn]=null,Gn=hn[--pn],hn[pn]=null,Bn=hn[--pn],hn[pn]=null}function Om(i,r){hn[pn++]=Bn,hn[pn++]=Gn,hn[pn++]=_i,Bn=r.id,Gn=r.overflow,_i=i}var Nt=null,Xe=null,Ie=!1,Ti=null,mn=!1,Nc=Error(s(519));function Si(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wo(fn(r,i)),Nc}function Vm(i){var r=i.stateNode,a=i.type,c=i.memoizedProps;switch(r[Ct]=i,r[zt]=c,a){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(a=0;a<qo.length;a++)Ce(qo[a],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":Ce("invalid",r),Wp(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ce("invalid",r);break;case"textarea":Ce("invalid",r),Zp(r,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||tv(r.textContent,a)?(c.popover!=null&&(Ce("beforetoggle",r),Ce("toggle",r)),c.onScroll!=null&&Ce("scroll",r),c.onScrollEnd!=null&&Ce("scrollend",r),c.onClick!=null&&(r.onclick=Yn),r=!0):r=!1,r||Si(i,!0)}function jm(i){for(Nt=i.return;Nt;)switch(Nt.tag){case 5:case 31:case 13:mn=!1;return;case 27:case 3:mn=!0;return;default:Nt=Nt.return}}function nr(i){if(i!==Nt)return!1;if(!Ie)return jm(i),Ie=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||$d(i.type,i.memoizedProps)),a=!a),a&&Xe&&Si(i),jm(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Xe=cv(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Xe=cv(i)}else r===27?(r=Xe,Vi(i.type)?(i=Wd,Wd=null,Xe=i):Xe=r):Xe=Nt?yn(i.stateNode.nextSibling):null;return!0}function os(){Xe=Nt=null,Ie=!1}function Rc(){var i=Ti;return i!==null&&(Yt===null?Yt=i:Yt.push.apply(Yt,i),Ti=null),i}function wo(i){Ti===null?Ti=[i]:Ti.push(i)}var Mc=P(null),as=null,Zn=null;function Ei(i,r,a){te(Mc,r._currentValue),r._currentValue=a}function ei(i){i._currentValue=Mc.current,Y(Mc)}function Ic(i,r,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),i===a)break;i=i.return}}function kc(i,r,a,c){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var x=v.dependencies;if(x!==null){var _=v.child;x=x.firstContext;e:for(;x!==null;){var S=x;x=v;for(var M=0;M<r.length;M++)if(S.context===r[M]){x.lanes|=a,S=x.alternate,S!==null&&(S.lanes|=a),Ic(x.return,a,i),c||(_=null);break e}x=S.next}}else if(v.tag===18){if(_=v.return,_===null)throw Error(s(341));_.lanes|=a,x=_.alternate,x!==null&&(x.lanes|=a),Ic(_,a,i),_=null}else _=v.child;if(_!==null)_.return=v;else for(_=v;_!==null;){if(_===i){_=null;break}if(v=_.sibling,v!==null){v.return=_.return,_=v;break}_=_.return}v=_}}function ir(i,r,a,c){i=null;for(var v=r,x=!1;v!==null;){if(!x){if((v.flags&524288)!==0)x=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var _=v.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var S=v.type;Qt(v.pendingProps.value,_.value)||(i!==null?i.push(S):i=[S])}}else if(v===Te.current){if(_=v.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(Ko):i=[Ko])}v=v.return}i!==null&&kc(r,i,a,c),r.flags|=262144}function Za(i){for(i=i.firstContext;i!==null;){if(!Qt(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ls(i){as=i,Zn=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Rt(i){return Bm(as,i)}function el(i,r){return as===null&&ls(i),Bm(i,r)}function Bm(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Zn===null){if(i===null)throw Error(s(308));Zn=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Zn=Zn.next=r;return a}var WS=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},QS=t.unstable_scheduleCallback,ZS=t.unstable_NormalPriority,ht={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dc(){return{controller:new WS,data:new Map,refCount:0}}function _o(i){i.refCount--,i.refCount===0&&QS(ZS,function(){i.controller.abort()})}var To=null,Pc=0,sr=0,rr=null;function eE(i,r){if(To===null){var a=To=[];Pc=0,sr=Od(),rr={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Pc++,r.then(Gm,Gm),r}function Gm(){if(--Pc===0&&To!==null){rr!==null&&(rr.status="fulfilled");var i=To;To=null,sr=0,rr=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function tE(i,r){var a=[],c={status:"pending",value:null,reason:null,then:function(v){a.push(v)}};return i.then(function(){c.status="fulfilled",c.value=r;for(var v=0;v<a.length;v++)(0,a[v])(r)},function(v){for(c.status="rejected",c.reason=v,v=0;v<a.length;v++)(0,a[v])(void 0)}),c}var Hm=z.S;z.S=function(i,r){Ey=Ge(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&eE(i,r),Hm!==null&&Hm(i,r)};var us=P(null);function Uc(){var i=us.current;return i!==null?i:Fe.pooledCache}function tl(i,r){r===null?te(us,us.current):te(us,r.pool)}function qm(){var i=Uc();return i===null?null:{parent:ht._currentValue,pool:i}}var or=Error(s(460)),Lc=Error(s(474)),nl=Error(s(542)),il={then:function(){}};function zm(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Fm(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(Yn,Yn),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Jm(i),i;default:if(typeof r.status=="string")r.then(Yn,Yn);else{if(i=Fe,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(c){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=c}},function(c){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Jm(i),i}throw ds=r,or}}function cs(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ds=a,or):a}}var ds=null;function $m(){if(ds===null)throw Error(s(459));var i=ds;return ds=null,i}function Jm(i){if(i===or||i===nl)throw Error(s(483))}var ar=null,So=0;function sl(i){var r=So;return So+=1,ar===null&&(ar=[]),Fm(ar,i,r)}function Eo(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function rl(i,r){throw r.$$typeof===w?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Km(i){function r(U,D){if(i){var V=U.deletions;V===null?(U.deletions=[D],U.flags|=16):V.push(D)}}function a(U,D){if(!i)return null;for(;D!==null;)r(U,D),D=D.sibling;return null}function c(U){for(var D=new Map;U!==null;)U.key!==null?D.set(U.key,U):D.set(U.index,U),U=U.sibling;return D}function v(U,D){return U=Wn(U,D),U.index=0,U.sibling=null,U}function x(U,D,V){return U.index=V,i?(V=U.alternate,V!==null?(V=V.index,V<D?(U.flags|=67108866,D):V):(U.flags|=67108866,D)):(U.flags|=1048576,D)}function _(U){return i&&U.alternate===null&&(U.flags|=67108866),U}function S(U,D,V,$){return D===null||D.tag!==6?(D=Sc(V,U.mode,$),D.return=U,D):(D=v(D,V),D.return=U,D)}function M(U,D,V,$){var ce=V.type;return ce===A?F(U,D,V.props.children,$,V.key):D!==null&&(D.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===W&&cs(ce)===D.type)?(D=v(D,V.props),Eo(D,V),D.return=U,D):(D=Wa(V.type,V.key,V.props,null,U.mode,$),Eo(D,V),D.return=U,D)}function j(U,D,V,$){return D===null||D.tag!==4||D.stateNode.containerInfo!==V.containerInfo||D.stateNode.implementation!==V.implementation?(D=Ec(V,U.mode,$),D.return=U,D):(D=v(D,V.children||[]),D.return=U,D)}function F(U,D,V,$,ce){return D===null||D.tag!==7?(D=rs(V,U.mode,$,ce),D.return=U,D):(D=v(D,V),D.return=U,D)}function K(U,D,V){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Sc(""+D,U.mode,V),D.return=U,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case T:return V=Wa(D.type,D.key,D.props,null,U.mode,V),Eo(V,D),V.return=U,V;case E:return D=Ec(D,U.mode,V),D.return=U,D;case W:return D=cs(D),K(U,D,V)}if(st(D)||ye(D))return D=rs(D,U.mode,V,null),D.return=U,D;if(typeof D.then=="function")return K(U,sl(D),V);if(D.$$typeof===N)return K(U,el(U,D),V);rl(U,D)}return null}function G(U,D,V,$){var ce=D!==null?D.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return ce!==null?null:S(U,D,""+V,$);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case T:return V.key===ce?M(U,D,V,$):null;case E:return V.key===ce?j(U,D,V,$):null;case W:return V=cs(V),G(U,D,V,$)}if(st(V)||ye(V))return ce!==null?null:F(U,D,V,$,null);if(typeof V.then=="function")return G(U,D,sl(V),$);if(V.$$typeof===N)return G(U,D,el(U,V),$);rl(U,V)}return null}function q(U,D,V,$,ce){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return U=U.get(V)||null,S(D,U,""+$,ce);if(typeof $=="object"&&$!==null){switch($.$$typeof){case T:return U=U.get($.key===null?V:$.key)||null,M(D,U,$,ce);case E:return U=U.get($.key===null?V:$.key)||null,j(D,U,$,ce);case W:return $=cs($),q(U,D,V,$,ce)}if(st($)||ye($))return U=U.get(V)||null,F(D,U,$,ce,null);if(typeof $.then=="function")return q(U,D,V,sl($),ce);if($.$$typeof===N)return q(U,D,V,el(D,$),ce);rl(D,$)}return null}function oe(U,D,V,$){for(var ce=null,Pe=null,le=D,be=D=0,Re=null;le!==null&&be<V.length;be++){le.index>be?(Re=le,le=null):Re=le.sibling;var Ue=G(U,le,V[be],$);if(Ue===null){le===null&&(le=Re);break}i&&le&&Ue.alternate===null&&r(U,le),D=x(Ue,D,be),Pe===null?ce=Ue:Pe.sibling=Ue,Pe=Ue,le=Re}if(be===V.length)return a(U,le),Ie&&Qn(U,be),ce;if(le===null){for(;be<V.length;be++)le=K(U,V[be],$),le!==null&&(D=x(le,D,be),Pe===null?ce=le:Pe.sibling=le,Pe=le);return Ie&&Qn(U,be),ce}for(le=c(le);be<V.length;be++)Re=q(le,U,be,V[be],$),Re!==null&&(i&&Re.alternate!==null&&le.delete(Re.key===null?be:Re.key),D=x(Re,D,be),Pe===null?ce=Re:Pe.sibling=Re,Pe=Re);return i&&le.forEach(function(qi){return r(U,qi)}),Ie&&Qn(U,be),ce}function de(U,D,V,$){if(V==null)throw Error(s(151));for(var ce=null,Pe=null,le=D,be=D=0,Re=null,Ue=V.next();le!==null&&!Ue.done;be++,Ue=V.next()){le.index>be?(Re=le,le=null):Re=le.sibling;var qi=G(U,le,Ue.value,$);if(qi===null){le===null&&(le=Re);break}i&&le&&qi.alternate===null&&r(U,le),D=x(qi,D,be),Pe===null?ce=qi:Pe.sibling=qi,Pe=qi,le=Re}if(Ue.done)return a(U,le),Ie&&Qn(U,be),ce;if(le===null){for(;!Ue.done;be++,Ue=V.next())Ue=K(U,Ue.value,$),Ue!==null&&(D=x(Ue,D,be),Pe===null?ce=Ue:Pe.sibling=Ue,Pe=Ue);return Ie&&Qn(U,be),ce}for(le=c(le);!Ue.done;be++,Ue=V.next())Ue=q(le,U,be,Ue.value,$),Ue!==null&&(i&&Ue.alternate!==null&&le.delete(Ue.key===null?be:Ue.key),D=x(Ue,D,be),Pe===null?ce=Ue:Pe.sibling=Ue,Pe=Ue);return i&&le.forEach(function(fA){return r(U,fA)}),Ie&&Qn(U,be),ce}function ze(U,D,V,$){if(typeof V=="object"&&V!==null&&V.type===A&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case T:e:{for(var ce=V.key;D!==null;){if(D.key===ce){if(ce=V.type,ce===A){if(D.tag===7){a(U,D.sibling),$=v(D,V.props.children),$.return=U,U=$;break e}}else if(D.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===W&&cs(ce)===D.type){a(U,D.sibling),$=v(D,V.props),Eo($,V),$.return=U,U=$;break e}a(U,D);break}else r(U,D);D=D.sibling}V.type===A?($=rs(V.props.children,U.mode,$,V.key),$.return=U,U=$):($=Wa(V.type,V.key,V.props,null,U.mode,$),Eo($,V),$.return=U,U=$)}return _(U);case E:e:{for(ce=V.key;D!==null;){if(D.key===ce)if(D.tag===4&&D.stateNode.containerInfo===V.containerInfo&&D.stateNode.implementation===V.implementation){a(U,D.sibling),$=v(D,V.children||[]),$.return=U,U=$;break e}else{a(U,D);break}else r(U,D);D=D.sibling}$=Ec(V,U.mode,$),$.return=U,U=$}return _(U);case W:return V=cs(V),ze(U,D,V,$)}if(st(V))return oe(U,D,V,$);if(ye(V)){if(ce=ye(V),typeof ce!="function")throw Error(s(150));return V=ce.call(V),de(U,D,V,$)}if(typeof V.then=="function")return ze(U,D,sl(V),$);if(V.$$typeof===N)return ze(U,D,el(U,V),$);rl(U,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,D!==null&&D.tag===6?(a(U,D.sibling),$=v(D,V),$.return=U,U=$):(a(U,D),$=Sc(V,U.mode,$),$.return=U,U=$),_(U)):a(U,D)}return function(U,D,V,$){try{So=0;var ce=ze(U,D,V,$);return ar=null,ce}catch(le){if(le===or||le===nl)throw le;var Pe=Zt(29,le,null,U.mode);return Pe.lanes=$,Pe.return=U,Pe}finally{}}}var fs=Km(!0),Ym=Km(!1),Ai=!1;function Oc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vc(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ci(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ni(i,r,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Oe&2)!==0){var v=c.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),c.pending=r,r=Xa(i),km(i,null,a),r}return Ya(i,c,r,a),Xa(i)}function Ao(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,Bp(i,a)}}function jc(i,r){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var v=null,x=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};x===null?v=x=_:x=x.next=_,a=a.next}while(a!==null);x===null?v=x=r:x=x.next=r}else v=x=r;a={baseState:c.baseState,firstBaseUpdate:v,lastBaseUpdate:x,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var Bc=!1;function Co(){if(Bc){var i=rr;if(i!==null)throw i}}function No(i,r,a,c){Bc=!1;var v=i.updateQueue;Ai=!1;var x=v.firstBaseUpdate,_=v.lastBaseUpdate,S=v.shared.pending;if(S!==null){v.shared.pending=null;var M=S,j=M.next;M.next=null,_===null?x=j:_.next=j,_=M;var F=i.alternate;F!==null&&(F=F.updateQueue,S=F.lastBaseUpdate,S!==_&&(S===null?F.firstBaseUpdate=j:S.next=j,F.lastBaseUpdate=M))}if(x!==null){var K=v.baseState;_=0,F=j=M=null,S=x;do{var G=S.lane&-536870913,q=G!==S.lane;if(q?(Ne&G)===G:(c&G)===G){G!==0&&G===sr&&(Bc=!0),F!==null&&(F=F.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var oe=i,de=S;G=r;var ze=a;switch(de.tag){case 1:if(oe=de.payload,typeof oe=="function"){K=oe.call(ze,K,G);break e}K=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=de.payload,G=typeof oe=="function"?oe.call(ze,K,G):oe,G==null)break e;K=b({},K,G);break e;case 2:Ai=!0}}G=S.callback,G!==null&&(i.flags|=64,q&&(i.flags|=8192),q=v.callbacks,q===null?v.callbacks=[G]:q.push(G))}else q={lane:G,tag:S.tag,payload:S.payload,callback:S.callback,next:null},F===null?(j=F=q,M=K):F=F.next=q,_|=G;if(S=S.next,S===null){if(S=v.shared.pending,S===null)break;q=S,S=q.next,q.next=null,v.lastBaseUpdate=q,v.shared.pending=null}}while(!0);F===null&&(M=K),v.baseState=M,v.firstBaseUpdate=j,v.lastBaseUpdate=F,x===null&&(v.shared.lanes=0),Di|=_,i.lanes=_,i.memoizedState=K}}function Xm(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Wm(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Xm(a[i],r)}var lr=P(null),ol=P(0);function Qm(i,r){i=ui,te(ol,i),te(lr,r),ui=i|r.baseLanes}function Gc(){te(ol,ui),te(lr,lr.current)}function Hc(){ui=ol.current,Y(lr),Y(ol)}var en=P(null),gn=null;function Ri(i){var r=i.alternate;te(ct,ct.current&1),te(en,i),gn===null&&(r===null||lr.current!==null||r.memoizedState!==null)&&(gn=i)}function qc(i){te(ct,ct.current),te(en,i),gn===null&&(gn=i)}function Zm(i){i.tag===22?(te(ct,ct.current),te(en,i),gn===null&&(gn=i)):Mi()}function Mi(){te(ct,ct.current),te(en,en.current)}function tn(i){Y(en),gn===i&&(gn=null),Y(ct)}var ct=P(0);function al(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Yd(a)||Xd(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ti=0,xe=null,He=null,pt=null,ll=!1,ur=!1,hs=!1,ul=0,Ro=0,cr=null,nE=0;function ot(){throw Error(s(321))}function zc(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!Qt(i[a],r[a]))return!1;return!0}function Fc(i,r,a,c,v,x){return ti=x,xe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,z.H=i===null||i.memoizedState===null?Lg:od,hs=!1,x=a(c,v),hs=!1,ur&&(x=tg(r,a,c,v)),eg(i),x}function eg(i){z.H=ko;var r=He!==null&&He.next!==null;if(ti=0,pt=He=xe=null,ll=!1,Ro=0,cr=null,r)throw Error(s(300));i===null||mt||(i=i.dependencies,i!==null&&Za(i)&&(mt=!0))}function tg(i,r,a,c){xe=i;var v=0;do{if(ur&&(cr=null),Ro=0,ur=!1,25<=v)throw Error(s(301));if(v+=1,pt=He=null,i.updateQueue!=null){var x=i.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}z.H=Og,x=r(a,c)}while(ur);return x}function iE(){var i=z.H,r=i.useState()[0];return r=typeof r.then=="function"?Mo(r):r,i=i.useState()[0],(He!==null?He.memoizedState:null)!==i&&(xe.flags|=1024),r}function $c(){var i=ul!==0;return ul=0,i}function Jc(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function Kc(i){if(ll){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ll=!1}ti=0,pt=He=xe=null,ur=!1,Ro=ul=0,cr=null}function Bt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?xe.memoizedState=pt=i:pt=pt.next=i,pt}function dt(){if(He===null){var i=xe.alternate;i=i!==null?i.memoizedState:null}else i=He.next;var r=pt===null?xe.memoizedState:pt.next;if(r!==null)pt=r,He=i;else{if(i===null)throw xe.alternate===null?Error(s(467)):Error(s(310));He=i,i={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},pt===null?xe.memoizedState=pt=i:pt=pt.next=i}return pt}function cl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mo(i){var r=Ro;return Ro+=1,cr===null&&(cr=[]),i=Fm(cr,i,r),r=xe,(pt===null?r.memoizedState:pt.next)===null&&(r=r.alternate,z.H=r===null||r.memoizedState===null?Lg:od),i}function dl(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Mo(i);if(i.$$typeof===N)return Rt(i)}throw Error(s(438,String(i)))}function Yc(i){var r=null,a=xe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=xe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=cl(),xe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),c=0;c<i;c++)a[c]=ie;return r.index++,a}function ni(i,r){return typeof r=="function"?r(i):r}function fl(i){var r=dt();return Xc(r,He,i)}function Xc(i,r,a){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var v=i.baseQueue,x=c.pending;if(x!==null){if(v!==null){var _=v.next;v.next=x.next,x.next=_}r.baseQueue=v=x,c.pending=null}if(x=i.baseState,v===null)i.memoizedState=x;else{r=v.next;var S=_=null,M=null,j=r,F=!1;do{var K=j.lane&-536870913;if(K!==j.lane?(Ne&K)===K:(ti&K)===K){var G=j.revertLane;if(G===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),K===sr&&(F=!0);else if((ti&G)===G){j=j.next,G===sr&&(F=!0);continue}else K={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},M===null?(S=M=K,_=x):M=M.next=K,xe.lanes|=G,Di|=G;K=j.action,hs&&a(x,K),x=j.hasEagerState?j.eagerState:a(x,K)}else G={lane:K,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},M===null?(S=M=G,_=x):M=M.next=G,xe.lanes|=K,Di|=K;j=j.next}while(j!==null&&j!==r);if(M===null?_=x:M.next=S,!Qt(x,i.memoizedState)&&(mt=!0,F&&(a=rr,a!==null)))throw a;i.memoizedState=x,i.baseState=_,i.baseQueue=M,c.lastRenderedState=x}return v===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Wc(i){var r=dt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var c=a.dispatch,v=a.pending,x=r.memoizedState;if(v!==null){a.pending=null;var _=v=v.next;do x=i(x,_.action),_=_.next;while(_!==v);Qt(x,r.memoizedState)||(mt=!0),r.memoizedState=x,r.baseQueue===null&&(r.baseState=x),a.lastRenderedState=x}return[x,c]}function ng(i,r,a){var c=xe,v=dt(),x=Ie;if(x){if(a===void 0)throw Error(s(407));a=a()}else a=r();var _=!Qt((He||v).memoizedState,a);if(_&&(v.memoizedState=a,mt=!0),v=v.queue,ed(rg.bind(null,c,v,i),[i]),v.getSnapshot!==r||_||pt!==null&&pt.memoizedState.tag&1){if(c.flags|=2048,dr(9,{destroy:void 0},sg.bind(null,c,v,a,r),null),Fe===null)throw Error(s(349));x||(ti&127)!==0||ig(c,r,a)}return a}function ig(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=xe.updateQueue,r===null?(r=cl(),xe.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function sg(i,r,a,c){r.value=a,r.getSnapshot=c,og(r)&&ag(i)}function rg(i,r,a){return a(function(){og(r)&&ag(i)})}function og(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!Qt(i,a)}catch{return!0}}function ag(i){var r=ss(i,2);r!==null&&Xt(r,i,2)}function Qc(i){var r=Bt();if(typeof i=="function"){var a=i;if(i=a(),hs){Ee(!0);try{a()}finally{Ee(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:i},r}function lg(i,r,a,c){return i.baseState=a,Xc(i,He,typeof c=="function"?c:ni)}function sE(i,r,a,c,v){if(ml(i))throw Error(s(485));if(i=r.action,i!==null){var x={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){x.listeners.push(_)}};z.T!==null?a(!0):x.isTransition=!1,c(x),a=r.pending,a===null?(x.next=r.pending=x,ug(r,x)):(x.next=a.next,r.pending=a.next=x)}}function ug(i,r){var a=r.action,c=r.payload,v=i.state;if(r.isTransition){var x=z.T,_={};z.T=_;try{var S=a(v,c),M=z.S;M!==null&&M(_,S),cg(i,r,S)}catch(j){Zc(i,r,j)}finally{x!==null&&_.types!==null&&(x.types=_.types),z.T=x}}else try{x=a(v,c),cg(i,r,x)}catch(j){Zc(i,r,j)}}function cg(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){dg(i,r,c)},function(c){return Zc(i,r,c)}):dg(i,r,a)}function dg(i,r,a){r.status="fulfilled",r.value=a,fg(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,ug(i,a)))}function Zc(i,r,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,fg(r),r=r.next;while(r!==c)}i.action=null}function fg(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function hg(i,r){return r}function pg(i,r){if(Ie){var a=Fe.formState;if(a!==null){e:{var c=xe;if(Ie){if(Xe){t:{for(var v=Xe,x=mn;v.nodeType!==8;){if(!x){v=null;break t}if(v=yn(v.nextSibling),v===null){v=null;break t}}x=v.data,v=x==="F!"||x==="F"?v:null}if(v){Xe=yn(v.nextSibling),c=v.data==="F!";break e}}Si(c)}c=!1}c&&(r=a[0])}}return a=Bt(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hg,lastRenderedState:r},a.queue=c,a=Dg.bind(null,xe,c),c.dispatch=a,c=Qc(!1),x=rd.bind(null,xe,!1,c.queue),c=Bt(),v={state:r,dispatch:null,action:i,pending:null},c.queue=v,a=sE.bind(null,xe,v,x,a),v.dispatch=a,c.memoizedState=i,[r,a,!1]}function mg(i){var r=dt();return gg(r,He,i)}function gg(i,r,a){if(r=Xc(i,r,hg)[0],i=fl(ni)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Mo(r)}catch(_){throw _===or?nl:_}else c=r;r=dt();var v=r.queue,x=v.dispatch;return a!==r.memoizedState&&(xe.flags|=2048,dr(9,{destroy:void 0},rE.bind(null,v,a),null)),[c,x,i]}function rE(i,r){i.action=r}function yg(i){var r=dt(),a=He;if(a!==null)return gg(r,a,i);dt(),r=r.memoizedState,a=dt();var c=a.queue.dispatch;return a.memoizedState=i,[r,c,!1]}function dr(i,r,a,c){return i={tag:i,create:a,deps:c,inst:r,next:null},r=xe.updateQueue,r===null&&(r=cl(),xe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,r.lastEffect=i),i}function vg(){return dt().memoizedState}function hl(i,r,a,c){var v=Bt();xe.flags|=i,v.memoizedState=dr(1|r,{destroy:void 0},a,c===void 0?null:c)}function pl(i,r,a,c){var v=dt();c=c===void 0?null:c;var x=v.memoizedState.inst;He!==null&&c!==null&&zc(c,He.memoizedState.deps)?v.memoizedState=dr(r,x,a,c):(xe.flags|=i,v.memoizedState=dr(1|r,x,a,c))}function xg(i,r){hl(8390656,8,i,r)}function ed(i,r){pl(2048,8,i,r)}function oE(i){xe.flags|=4;var r=xe.updateQueue;if(r===null)r=cl(),xe.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function bg(i){var r=dt().memoizedState;return oE({ref:r,nextImpl:i}),function(){if((Oe&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function wg(i,r){return pl(4,2,i,r)}function _g(i,r){return pl(4,4,i,r)}function Tg(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Sg(i,r,a){a=a!=null?a.concat([i]):null,pl(4,4,Tg.bind(null,r,i),a)}function td(){}function Eg(i,r){var a=dt();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&zc(r,c[1])?c[0]:(a.memoizedState=[i,r],i)}function Ag(i,r){var a=dt();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&zc(r,c[1]))return c[0];if(c=i(),hs){Ee(!0);try{i()}finally{Ee(!1)}}return a.memoizedState=[c,r],c}function nd(i,r,a){return a===void 0||(ti&1073741824)!==0&&(Ne&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=Cy(),xe.lanes|=i,Di|=i,a)}function Cg(i,r,a,c){return Qt(a,r)?a:lr.current!==null?(i=nd(i,a,c),Qt(i,r)||(mt=!0),i):(ti&42)===0||(ti&1073741824)!==0&&(Ne&261930)===0?(mt=!0,i.memoizedState=a):(i=Cy(),xe.lanes|=i,Di|=i,r)}function Ng(i,r,a,c,v){var x=Q.p;Q.p=x!==0&&8>x?x:8;var _=z.T,S={};z.T=S,rd(i,!1,r,a);try{var M=v(),j=z.S;if(j!==null&&j(S,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var F=tE(M,c);Io(i,r,F,rn(i))}else Io(i,r,c,rn(i))}catch(K){Io(i,r,{then:function(){},status:"rejected",reason:K},rn())}finally{Q.p=x,_!==null&&S.types!==null&&(_.types=S.types),z.T=_}}function aE(){}function id(i,r,a,c){if(i.tag!==5)throw Error(s(476));var v=Rg(i).queue;Ng(i,v,r,ae,a===null?aE:function(){return Mg(i),a(c)})}function Rg(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:ae},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Mg(i){var r=Rg(i);r.next===null&&(r=i.alternate.memoizedState),Io(i,r.next.queue,{},rn())}function sd(){return Rt(Ko)}function Ig(){return dt().memoizedState}function kg(){return dt().memoizedState}function lE(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=rn();i=Ci(a);var c=Ni(r,i,a);c!==null&&(Xt(c,r,a),Ao(c,r,a)),r={cache:Dc()},i.payload=r;return}r=r.return}}function uE(i,r,a){var c=rn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ml(i)?Pg(r,a):(a=_c(i,r,a,c),a!==null&&(Xt(a,i,c),Ug(a,r,c)))}function Dg(i,r,a){var c=rn();Io(i,r,a,c)}function Io(i,r,a,c){var v={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ml(i))Pg(r,v);else{var x=i.alternate;if(i.lanes===0&&(x===null||x.lanes===0)&&(x=r.lastRenderedReducer,x!==null))try{var _=r.lastRenderedState,S=x(_,a);if(v.hasEagerState=!0,v.eagerState=S,Qt(S,_))return Ya(i,r,v,0),Fe===null&&Ka(),!1}catch{}finally{}if(a=_c(i,r,v,c),a!==null)return Xt(a,i,c),Ug(a,r,c),!0}return!1}function rd(i,r,a,c){if(c={lane:2,revertLane:Od(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ml(i)){if(r)throw Error(s(479))}else r=_c(i,a,c,2),r!==null&&Xt(r,i,2)}function ml(i){var r=i.alternate;return i===xe||r!==null&&r===xe}function Pg(i,r){ur=ll=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function Ug(i,r,a){if((a&4194048)!==0){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,Bp(i,a)}}var ko={readContext:Rt,use:dl,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useLayoutEffect:ot,useInsertionEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useSyncExternalStore:ot,useId:ot,useHostTransitionStatus:ot,useFormState:ot,useActionState:ot,useOptimistic:ot,useMemoCache:ot,useCacheRefresh:ot};ko.useEffectEvent=ot;var Lg={readContext:Rt,use:dl,useCallback:function(i,r){return Bt().memoizedState=[i,r===void 0?null:r],i},useContext:Rt,useEffect:xg,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,hl(4194308,4,Tg.bind(null,r,i),a)},useLayoutEffect:function(i,r){return hl(4194308,4,i,r)},useInsertionEffect:function(i,r){hl(4,2,i,r)},useMemo:function(i,r){var a=Bt();r=r===void 0?null:r;var c=i();if(hs){Ee(!0);try{i()}finally{Ee(!1)}}return a.memoizedState=[c,r],c},useReducer:function(i,r,a){var c=Bt();if(a!==void 0){var v=a(r);if(hs){Ee(!0);try{a(r)}finally{Ee(!1)}}}else v=r;return c.memoizedState=c.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},c.queue=i,i=i.dispatch=uE.bind(null,xe,i),[c.memoizedState,i]},useRef:function(i){var r=Bt();return i={current:i},r.memoizedState=i},useState:function(i){i=Qc(i);var r=i.queue,a=Dg.bind(null,xe,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:td,useDeferredValue:function(i,r){var a=Bt();return nd(a,i,r)},useTransition:function(){var i=Qc(!1);return i=Ng.bind(null,xe,i.queue,!0,!1),Bt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var c=xe,v=Bt();if(Ie){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),Fe===null)throw Error(s(349));(Ne&127)!==0||ig(c,r,a)}v.memoizedState=a;var x={value:a,getSnapshot:r};return v.queue=x,xg(rg.bind(null,c,x,i),[i]),c.flags|=2048,dr(9,{destroy:void 0},sg.bind(null,c,x,a,r),null),a},useId:function(){var i=Bt(),r=Fe.identifierPrefix;if(Ie){var a=Gn,c=Bn;a=(c&~(1<<32-Me(c)-1)).toString(32)+a,r="_"+r+"R_"+a,a=ul++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=nE++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:sd,useFormState:pg,useActionState:pg,useOptimistic:function(i){var r=Bt();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=rd.bind(null,xe,!0,a),a.dispatch=r,[i,r]},useMemoCache:Yc,useCacheRefresh:function(){return Bt().memoizedState=lE.bind(null,xe)},useEffectEvent:function(i){var r=Bt(),a={impl:i};return r.memoizedState=a,function(){if((Oe&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},od={readContext:Rt,use:dl,useCallback:Eg,useContext:Rt,useEffect:ed,useImperativeHandle:Sg,useInsertionEffect:wg,useLayoutEffect:_g,useMemo:Ag,useReducer:fl,useRef:vg,useState:function(){return fl(ni)},useDebugValue:td,useDeferredValue:function(i,r){var a=dt();return Cg(a,He.memoizedState,i,r)},useTransition:function(){var i=fl(ni)[0],r=dt().memoizedState;return[typeof i=="boolean"?i:Mo(i),r]},useSyncExternalStore:ng,useId:Ig,useHostTransitionStatus:sd,useFormState:mg,useActionState:mg,useOptimistic:function(i,r){var a=dt();return lg(a,He,i,r)},useMemoCache:Yc,useCacheRefresh:kg};od.useEffectEvent=bg;var Og={readContext:Rt,use:dl,useCallback:Eg,useContext:Rt,useEffect:ed,useImperativeHandle:Sg,useInsertionEffect:wg,useLayoutEffect:_g,useMemo:Ag,useReducer:Wc,useRef:vg,useState:function(){return Wc(ni)},useDebugValue:td,useDeferredValue:function(i,r){var a=dt();return He===null?nd(a,i,r):Cg(a,He.memoizedState,i,r)},useTransition:function(){var i=Wc(ni)[0],r=dt().memoizedState;return[typeof i=="boolean"?i:Mo(i),r]},useSyncExternalStore:ng,useId:Ig,useHostTransitionStatus:sd,useFormState:yg,useActionState:yg,useOptimistic:function(i,r){var a=dt();return He!==null?lg(a,He,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Yc,useCacheRefresh:kg};Og.useEffectEvent=bg;function ad(i,r,a,c){r=i.memoizedState,a=a(c,r),a=a==null?r:b({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var ld={enqueueSetState:function(i,r,a){i=i._reactInternals;var c=rn(),v=Ci(c);v.payload=r,a!=null&&(v.callback=a),r=Ni(i,v,c),r!==null&&(Xt(r,i,c),Ao(r,i,c))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var c=rn(),v=Ci(c);v.tag=1,v.payload=r,a!=null&&(v.callback=a),r=Ni(i,v,c),r!==null&&(Xt(r,i,c),Ao(r,i,c))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=rn(),c=Ci(a);c.tag=2,r!=null&&(c.callback=r),r=Ni(i,c,a),r!==null&&(Xt(r,i,a),Ao(r,i,a))}};function Vg(i,r,a,c,v,x,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,x,_):r.prototype&&r.prototype.isPureReactComponent?!vo(a,c)||!vo(v,x):!0}function jg(i,r,a,c){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==i&&ld.enqueueReplaceState(r,r.state,null)}function ps(i,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(i=i.defaultProps){a===r&&(a=b({},a));for(var v in i)a[v]===void 0&&(a[v]=i[v])}return a}function Bg(i){Ja(i)}function Gg(i){console.error(i)}function Hg(i){Ja(i)}function gl(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function qg(i,r,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function ud(i,r,a){return a=Ci(a),a.tag=3,a.payload={element:null},a.callback=function(){gl(i,r)},a}function zg(i){return i=Ci(i),i.tag=3,i}function Fg(i,r,a,c){var v=a.type.getDerivedStateFromError;if(typeof v=="function"){var x=c.value;i.payload=function(){return v(x)},i.callback=function(){qg(r,a,c)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(i.callback=function(){qg(r,a,c),typeof v!="function"&&(Pi===null?Pi=new Set([this]):Pi.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function cE(i,r,a,c,v){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&ir(r,a,v,!0),a=en.current,a!==null){switch(a.tag){case 31:case 13:return gn===null?Nl():a.alternate===null&&at===0&&(at=3),a.flags&=-257,a.flags|=65536,a.lanes=v,c===il?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),Pd(i,c,v)),!1;case 22:return a.flags|=65536,c===il?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),Pd(i,c,v)),!1}throw Error(s(435,a.tag))}return Pd(i,c,v),Nl(),!1}if(Ie)return r=en.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,c!==Nc&&(i=Error(s(422),{cause:c}),wo(fn(i,a)))):(c!==Nc&&(r=Error(s(423),{cause:c}),wo(fn(r,a))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,c=fn(c,a),v=ud(i.stateNode,c,v),jc(i,v),at!==4&&(at=2)),!1;var x=Error(s(520),{cause:c});if(x=fn(x,a),Bo===null?Bo=[x]:Bo.push(x),at!==4&&(at=2),r===null)return!0;c=fn(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=v&-v,a.lanes|=i,i=ud(a.stateNode,c,i),jc(a,i),!1;case 1:if(r=a.type,x=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Pi===null||!Pi.has(x))))return a.flags|=65536,v&=-v,a.lanes|=v,v=zg(v),Fg(v,i,a,c),jc(a,v),!1}a=a.return}while(a!==null);return!1}var cd=Error(s(461)),mt=!1;function Mt(i,r,a,c){r.child=i===null?Ym(r,null,a,c):fs(r,i.child,a,c)}function $g(i,r,a,c,v){a=a.render;var x=r.ref;if("ref"in c){var _={};for(var S in c)S!=="ref"&&(_[S]=c[S])}else _=c;return ls(r),c=Fc(i,r,a,_,x,v),S=$c(),i!==null&&!mt?(Jc(i,r,v),ii(i,r,v)):(Ie&&S&&Ac(r),r.flags|=1,Mt(i,r,c,v),r.child)}function Jg(i,r,a,c,v){if(i===null){var x=a.type;return typeof x=="function"&&!Tc(x)&&x.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=x,Kg(i,r,x,c,v)):(i=Wa(a.type,null,c,r,r.mode,v),i.ref=r.ref,i.return=r,r.child=i)}if(x=i.child,!vd(i,v)){var _=x.memoizedProps;if(a=a.compare,a=a!==null?a:vo,a(_,c)&&i.ref===r.ref)return ii(i,r,v)}return r.flags|=1,i=Wn(x,c),i.ref=r.ref,i.return=r,r.child=i}function Kg(i,r,a,c,v){if(i!==null){var x=i.memoizedProps;if(vo(x,c)&&i.ref===r.ref)if(mt=!1,r.pendingProps=c=x,vd(i,v))(i.flags&131072)!==0&&(mt=!0);else return r.lanes=i.lanes,ii(i,r,v)}return dd(i,r,a,c,v)}function Yg(i,r,a,c){var v=c.children,x=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(x=x!==null?x.baseLanes|a:a,i!==null){for(c=r.child=i.child,v=0;c!==null;)v=v|c.lanes|c.childLanes,c=c.sibling;c=v&~x}else c=0,r.child=null;return Xg(i,r,x,a,c)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&tl(r,x!==null?x.cachePool:null),x!==null?Qm(r,x):Gc(),Zm(r);else return c=r.lanes=536870912,Xg(i,r,x!==null?x.baseLanes|a:a,a,c)}else x!==null?(tl(r,x.cachePool),Qm(r,x),Mi(),r.memoizedState=null):(i!==null&&tl(r,null),Gc(),Mi());return Mt(i,r,v,a),r.child}function Do(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Xg(i,r,a,c,v){var x=Uc();return x=x===null?null:{parent:ht._currentValue,pool:x},r.memoizedState={baseLanes:a,cachePool:x},i!==null&&tl(r,null),Gc(),Zm(r),i!==null&&ir(i,r,c,!0),r.childLanes=v,null}function yl(i,r){return r=xl({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function Wg(i,r,a){return fs(r,i.child,null,a),i=yl(r,r.pendingProps),i.flags|=2,tn(r),r.memoizedState=null,i}function dE(i,r,a){var c=r.pendingProps,v=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Ie){if(c.mode==="hidden")return i=yl(r,c),r.lanes=536870912,Do(null,i);if(qc(r),(i=Xe)?(i=uv(i,mn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:_i!==null?{id:Bn,overflow:Gn}:null,retryLane:536870912,hydrationErrors:null},a=Pm(i),a.return=r,r.child=a,Nt=r,Xe=null)):i=null,i===null)throw Si(r);return r.lanes=536870912,null}return yl(r,c)}var x=i.memoizedState;if(x!==null){var _=x.dehydrated;if(qc(r),v)if(r.flags&256)r.flags&=-257,r=Wg(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(mt||ir(i,r,a,!1),v=(a&i.childLanes)!==0,mt||v){if(c=Fe,c!==null&&(_=Gp(c,a),_!==0&&_!==x.retryLane))throw x.retryLane=_,ss(i,_),Xt(c,i,_),cd;Nl(),r=Wg(i,r,a)}else i=x.treeContext,Xe=yn(_.nextSibling),Nt=r,Ie=!0,Ti=null,mn=!1,i!==null&&Om(r,i),r=yl(r,c),r.flags|=4096;return r}return i=Wn(i.child,{mode:c.mode,children:c.children}),i.ref=r.ref,r.child=i,i.return=r,i}function vl(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function dd(i,r,a,c,v){return ls(r),a=Fc(i,r,a,c,void 0,v),c=$c(),i!==null&&!mt?(Jc(i,r,v),ii(i,r,v)):(Ie&&c&&Ac(r),r.flags|=1,Mt(i,r,a,v),r.child)}function Qg(i,r,a,c,v,x){return ls(r),r.updateQueue=null,a=tg(r,c,a,v),eg(i),c=$c(),i!==null&&!mt?(Jc(i,r,x),ii(i,r,x)):(Ie&&c&&Ac(r),r.flags|=1,Mt(i,r,a,x),r.child)}function Zg(i,r,a,c,v){if(ls(r),r.stateNode===null){var x=Zs,_=a.contextType;typeof _=="object"&&_!==null&&(x=Rt(_)),x=new a(c,x),r.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=ld,r.stateNode=x,x._reactInternals=r,x=r.stateNode,x.props=c,x.state=r.memoizedState,x.refs={},Oc(r),_=a.contextType,x.context=typeof _=="object"&&_!==null?Rt(_):Zs,x.state=r.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(ad(r,a,_,c),x.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(_=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),_!==x.state&&ld.enqueueReplaceState(x,x.state,null),No(r,c,x,v),Co(),x.state=r.memoizedState),typeof x.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(i===null){x=r.stateNode;var S=r.memoizedProps,M=ps(a,S);x.props=M;var j=x.context,F=a.contextType;_=Zs,typeof F=="object"&&F!==null&&(_=Rt(F));var K=a.getDerivedStateFromProps;F=typeof K=="function"||typeof x.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,F||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(S||j!==_)&&jg(r,x,c,_),Ai=!1;var G=r.memoizedState;x.state=G,No(r,c,x,v),Co(),j=r.memoizedState,S||G!==j||Ai?(typeof K=="function"&&(ad(r,a,K,c),j=r.memoizedState),(M=Ai||Vg(r,a,M,c,G,j,_))?(F||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(r.flags|=4194308)):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=j),x.props=c,x.state=j,x.context=_,c=M):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{x=r.stateNode,Vc(i,r),_=r.memoizedProps,F=ps(a,_),x.props=F,K=r.pendingProps,G=x.context,j=a.contextType,M=Zs,typeof j=="object"&&j!==null&&(M=Rt(j)),S=a.getDerivedStateFromProps,(j=typeof S=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(_!==K||G!==M)&&jg(r,x,c,M),Ai=!1,G=r.memoizedState,x.state=G,No(r,c,x,v),Co();var q=r.memoizedState;_!==K||G!==q||Ai||i!==null&&i.dependencies!==null&&Za(i.dependencies)?(typeof S=="function"&&(ad(r,a,S,c),q=r.memoizedState),(F=Ai||Vg(r,a,F,c,G,q,M)||i!==null&&i.dependencies!==null&&Za(i.dependencies))?(j||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(c,q,M),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(c,q,M)),typeof x.componentDidUpdate=="function"&&(r.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof x.componentDidUpdate!="function"||_===i.memoizedProps&&G===i.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&G===i.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=q),x.props=c,x.state=q,x.context=M,c=F):(typeof x.componentDidUpdate!="function"||_===i.memoizedProps&&G===i.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&G===i.memoizedState||(r.flags|=1024),c=!1)}return x=c,vl(i,r),c=(r.flags&128)!==0,x||c?(x=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:x.render(),r.flags|=1,i!==null&&c?(r.child=fs(r,i.child,null,v),r.child=fs(r,null,a,v)):Mt(i,r,a,v),r.memoizedState=x.state,i=r.child):i=ii(i,r,v),i}function ey(i,r,a,c){return os(),r.flags|=256,Mt(i,r,a,c),r.child}var fd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hd(i){return{baseLanes:i,cachePool:qm()}}function pd(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=sn),i}function ty(i,r,a){var c=r.pendingProps,v=!1,x=(r.flags&128)!==0,_;if((_=x)||(_=i!==null&&i.memoizedState===null?!1:(ct.current&2)!==0),_&&(v=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,i===null){if(Ie){if(v?Ri(r):Mi(),(i=Xe)?(i=uv(i,mn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:_i!==null?{id:Bn,overflow:Gn}:null,retryLane:536870912,hydrationErrors:null},a=Pm(i),a.return=r,r.child=a,Nt=r,Xe=null)):i=null,i===null)throw Si(r);return Xd(i)?r.lanes=32:r.lanes=536870912,null}var S=c.children;return c=c.fallback,v?(Mi(),v=r.mode,S=xl({mode:"hidden",children:S},v),c=rs(c,v,a,null),S.return=r,c.return=r,S.sibling=c,r.child=S,c=r.child,c.memoizedState=hd(a),c.childLanes=pd(i,_,a),r.memoizedState=fd,Do(null,c)):(Ri(r),md(r,S))}var M=i.memoizedState;if(M!==null&&(S=M.dehydrated,S!==null)){if(x)r.flags&256?(Ri(r),r.flags&=-257,r=gd(i,r,a)):r.memoizedState!==null?(Mi(),r.child=i.child,r.flags|=128,r=null):(Mi(),S=c.fallback,v=r.mode,c=xl({mode:"visible",children:c.children},v),S=rs(S,v,a,null),S.flags|=2,c.return=r,S.return=r,c.sibling=S,r.child=c,fs(r,i.child,null,a),c=r.child,c.memoizedState=hd(a),c.childLanes=pd(i,_,a),r.memoizedState=fd,r=Do(null,c));else if(Ri(r),Xd(S)){if(_=S.nextSibling&&S.nextSibling.dataset,_)var j=_.dgst;_=j,c=Error(s(419)),c.stack="",c.digest=_,wo({value:c,source:null,stack:null}),r=gd(i,r,a)}else if(mt||ir(i,r,a,!1),_=(a&i.childLanes)!==0,mt||_){if(_=Fe,_!==null&&(c=Gp(_,a),c!==0&&c!==M.retryLane))throw M.retryLane=c,ss(i,c),Xt(_,i,c),cd;Yd(S)||Nl(),r=gd(i,r,a)}else Yd(S)?(r.flags|=192,r.child=i.child,r=null):(i=M.treeContext,Xe=yn(S.nextSibling),Nt=r,Ie=!0,Ti=null,mn=!1,i!==null&&Om(r,i),r=md(r,c.children),r.flags|=4096);return r}return v?(Mi(),S=c.fallback,v=r.mode,M=i.child,j=M.sibling,c=Wn(M,{mode:"hidden",children:c.children}),c.subtreeFlags=M.subtreeFlags&65011712,j!==null?S=Wn(j,S):(S=rs(S,v,a,null),S.flags|=2),S.return=r,c.return=r,c.sibling=S,r.child=c,Do(null,c),c=r.child,S=i.child.memoizedState,S===null?S=hd(a):(v=S.cachePool,v!==null?(M=ht._currentValue,v=v.parent!==M?{parent:M,pool:M}:v):v=qm(),S={baseLanes:S.baseLanes|a,cachePool:v}),c.memoizedState=S,c.childLanes=pd(i,_,a),r.memoizedState=fd,Do(i.child,c)):(Ri(r),a=i.child,i=a.sibling,a=Wn(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,i!==null&&(_=r.deletions,_===null?(r.deletions=[i],r.flags|=16):_.push(i)),r.child=a,r.memoizedState=null,a)}function md(i,r){return r=xl({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function xl(i,r){return i=Zt(22,i,null,r),i.lanes=0,i}function gd(i,r,a){return fs(r,i.child,null,a),i=md(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function ny(i,r,a){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r),Ic(i.return,r,a)}function yd(i,r,a,c,v,x){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:v,treeForkCount:x}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=a,_.tailMode=v,_.treeForkCount=x)}function iy(i,r,a){var c=r.pendingProps,v=c.revealOrder,x=c.tail;c=c.children;var _=ct.current,S=(_&2)!==0;if(S?(_=_&1|2,r.flags|=128):_&=1,te(ct,_),Mt(i,r,c,a),c=Ie?bo:0,!S&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ny(i,a,r);else if(i.tag===19)ny(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(v){case"forwards":for(a=r.child,v=null;a!==null;)i=a.alternate,i!==null&&al(i)===null&&(v=a),a=a.sibling;a=v,a===null?(v=r.child,r.child=null):(v=a.sibling,a.sibling=null),yd(r,!1,v,a,x,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,v=r.child,r.child=null;v!==null;){if(i=v.alternate,i!==null&&al(i)===null){r.child=v;break}i=v.sibling,v.sibling=a,a=v,v=i}yd(r,!0,a,null,x,c);break;case"together":yd(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function ii(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),Di|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(ir(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=Wn(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=Wn(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function vd(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Za(i)))}function fE(i,r,a){switch(r.tag){case 3:_t(r,r.stateNode.containerInfo),Ei(r,ht,i.memoizedState.cache),os();break;case 27:case 5:Qi(r);break;case 4:_t(r,r.stateNode.containerInfo);break;case 10:Ei(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,qc(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ri(r),r.flags|=128,null):(a&r.child.childLanes)!==0?ty(i,r,a):(Ri(r),i=ii(i,r,a),i!==null?i.sibling:null);Ri(r);break;case 19:var v=(i.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(ir(i,r,a,!1),c=(a&r.childLanes)!==0),v){if(c)return iy(i,r,a);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),te(ct,ct.current),c)break;return null;case 22:return r.lanes=0,Yg(i,r,a,r.pendingProps);case 24:Ei(r,ht,i.memoizedState.cache)}return ii(i,r,a)}function sy(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)mt=!0;else{if(!vd(i,a)&&(r.flags&128)===0)return mt=!1,fE(i,r,a);mt=(i.flags&131072)!==0}else mt=!1,Ie&&(r.flags&1048576)!==0&&Lm(r,bo,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(i=cs(r.elementType),r.type=i,typeof i=="function")Tc(i)?(c=ps(i,c),r.tag=1,r=Zg(null,r,i,c,a)):(r.tag=0,r=dd(null,r,i,c,a));else{if(i!=null){var v=i.$$typeof;if(v===I){r.tag=11,r=$g(null,r,i,c,a);break e}else if(v===O){r.tag=14,r=Jg(null,r,i,c,a);break e}}throw r=Je(i)||i,Error(s(306,r,""))}}return r;case 0:return dd(i,r,r.type,r.pendingProps,a);case 1:return c=r.type,v=ps(c,r.pendingProps),Zg(i,r,c,v,a);case 3:e:{if(_t(r,r.stateNode.containerInfo),i===null)throw Error(s(387));c=r.pendingProps;var x=r.memoizedState;v=x.element,Vc(i,r),No(r,c,null,a);var _=r.memoizedState;if(c=_.cache,Ei(r,ht,c),c!==x.cache&&kc(r,[ht],a,!0),Co(),c=_.element,x.isDehydrated)if(x={element:c,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=x,r.memoizedState=x,r.flags&256){r=ey(i,r,c,a);break e}else if(c!==v){v=fn(Error(s(424)),r),wo(v),r=ey(i,r,c,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Xe=yn(i.firstChild),Nt=r,Ie=!0,Ti=null,mn=!0,a=Ym(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(os(),c===v){r=ii(i,r,a);break e}Mt(i,r,c,a)}r=r.child}return r;case 26:return vl(i,r),i===null?(a=mv(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ie||(a=r.type,i=r.pendingProps,c=Ul(we.current).createElement(a),c[Ct]=r,c[zt]=i,It(c,a,i),St(c),r.stateNode=c):r.memoizedState=mv(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Qi(r),i===null&&Ie&&(c=r.stateNode=fv(r.type,r.pendingProps,we.current),Nt=r,mn=!0,v=Xe,Vi(r.type)?(Wd=v,Xe=yn(c.firstChild)):Xe=v),Mt(i,r,r.pendingProps.children,a),vl(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Ie&&((v=c=Xe)&&(c=HE(c,r.type,r.pendingProps,mn),c!==null?(r.stateNode=c,Nt=r,Xe=yn(c.firstChild),mn=!1,v=!0):v=!1),v||Si(r)),Qi(r),v=r.type,x=r.pendingProps,_=i!==null?i.memoizedProps:null,c=x.children,$d(v,x)?c=null:_!==null&&$d(v,_)&&(r.flags|=32),r.memoizedState!==null&&(v=Fc(i,r,iE,null,null,a),Ko._currentValue=v),vl(i,r),Mt(i,r,c,a),r.child;case 6:return i===null&&Ie&&((i=a=Xe)&&(a=qE(a,r.pendingProps,mn),a!==null?(r.stateNode=a,Nt=r,Xe=null,i=!0):i=!1),i||Si(r)),null;case 13:return ty(i,r,a);case 4:return _t(r,r.stateNode.containerInfo),c=r.pendingProps,i===null?r.child=fs(r,null,c,a):Mt(i,r,c,a),r.child;case 11:return $g(i,r,r.type,r.pendingProps,a);case 7:return Mt(i,r,r.pendingProps,a),r.child;case 8:return Mt(i,r,r.pendingProps.children,a),r.child;case 12:return Mt(i,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,Ei(r,r.type,c.value),Mt(i,r,c.children,a),r.child;case 9:return v=r.type._context,c=r.pendingProps.children,ls(r),v=Rt(v),c=c(v),r.flags|=1,Mt(i,r,c,a),r.child;case 14:return Jg(i,r,r.type,r.pendingProps,a);case 15:return Kg(i,r,r.type,r.pendingProps,a);case 19:return iy(i,r,a);case 31:return dE(i,r,a);case 22:return Yg(i,r,a,r.pendingProps);case 24:return ls(r),c=Rt(ht),i===null?(v=Uc(),v===null&&(v=Fe,x=Dc(),v.pooledCache=x,x.refCount++,x!==null&&(v.pooledCacheLanes|=a),v=x),r.memoizedState={parent:c,cache:v},Oc(r),Ei(r,ht,v)):((i.lanes&a)!==0&&(Vc(i,r),No(r,null,null,a),Co()),v=i.memoizedState,x=r.memoizedState,v.parent!==c?(v={parent:c,cache:c},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),Ei(r,ht,c)):(c=x.cache,Ei(r,ht,c),c!==v.cache&&kc(r,[ht],a,!0))),Mt(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function si(i){i.flags|=4}function xd(i,r,a,c,v){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(v&335544128)===v)if(i.stateNode.complete)i.flags|=8192;else if(Iy())i.flags|=8192;else throw ds=il,Lc}else i.flags&=-16777217}function ry(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!bv(r))if(Iy())i.flags|=8192;else throw ds=il,Lc}function bl(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?tt():536870912,i.lanes|=r,mr|=r)}function Po(i,r){if(!Ie)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function We(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(r)for(var v=i.child;v!==null;)a|=v.lanes|v.childLanes,c|=v.subtreeFlags&65011712,c|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)a|=v.lanes|v.childLanes,c|=v.subtreeFlags,c|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=c,i.childLanes=a,r}function hE(i,r,a){var c=r.pendingProps;switch(Cc(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(r),null;case 1:return We(r),null;case 3:return a=r.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ei(ht),rt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(nr(r)?si(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Rc())),We(r),null;case 26:var v=r.type,x=r.memoizedState;return i===null?(si(r),x!==null?(We(r),ry(r,x)):(We(r),xd(r,v,null,c,a))):x?x!==i.memoizedState?(si(r),We(r),ry(r,x)):(We(r),r.flags&=-16777217):(i=i.memoizedProps,i!==c&&si(r),We(r),xd(r,v,i,c,a)),null;case 27:if(io(r),a=we.current,v=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&si(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return We(r),null}i=re.current,nr(r)?Vm(r):(i=fv(v,c,a),r.stateNode=i,si(r))}return We(r),null;case 5:if(io(r),v=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&si(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return We(r),null}if(x=re.current,nr(r))Vm(r);else{var _=Ul(we.current);switch(x){case 1:x=_.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:x=_.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":x=_.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":x=_.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":x=_.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof c.is=="string"?_.createElement("select",{is:c.is}):_.createElement("select"),c.multiple?x.multiple=!0:c.size&&(x.size=c.size);break;default:x=typeof c.is=="string"?_.createElement(v,{is:c.is}):_.createElement(v)}}x[Ct]=r,x[zt]=c;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)x.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=x;e:switch(It(x,v,c),v){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&si(r)}}return We(r),xd(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==c&&si(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(s(166));if(i=we.current,nr(r)){if(i=r.stateNode,a=r.memoizedProps,c=null,v=Nt,v!==null)switch(v.tag){case 27:case 5:c=v.memoizedProps}i[Ct]=r,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||tv(i.nodeValue,a)),i||Si(r,!0)}else i=Ul(i).createTextNode(c),i[Ct]=r,r.stateNode=i}return We(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(c=nr(r),a!==null){if(i===null){if(!c)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Ct]=r}else os(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;We(r),i=!1}else a=Rc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(tn(r),r):(tn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return We(r),null;case 13:if(c=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=nr(r),c!==null&&c.dehydrated!==null){if(i===null){if(!v)throw Error(s(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[Ct]=r}else os(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;We(r),v=!1}else v=Rc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(tn(r),r):(tn(r),null)}return tn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=r.child,v=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(v=c.alternate.memoizedState.cachePool.pool),x=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),x!==v&&(c.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),bl(r,r.updateQueue),We(r),null);case 4:return rt(),i===null&&Gd(r.stateNode.containerInfo),We(r),null;case 10:return ei(r.type),We(r),null;case 19:if(Y(ct),c=r.memoizedState,c===null)return We(r),null;if(v=(r.flags&128)!==0,x=c.rendering,x===null)if(v)Po(c,!1);else{if(at!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(x=al(i),x!==null){for(r.flags|=128,Po(c,!1),i=x.updateQueue,r.updateQueue=i,bl(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)Dm(a,i),a=a.sibling;return te(ct,ct.current&1|2),Ie&&Qn(r,c.treeForkCount),r.child}i=i.sibling}c.tail!==null&&Ge()>El&&(r.flags|=128,v=!0,Po(c,!1),r.lanes=4194304)}else{if(!v)if(i=al(x),i!==null){if(r.flags|=128,v=!0,i=i.updateQueue,r.updateQueue=i,bl(r,i),Po(c,!0),c.tail===null&&c.tailMode==="hidden"&&!x.alternate&&!Ie)return We(r),null}else 2*Ge()-c.renderingStartTime>El&&a!==536870912&&(r.flags|=128,v=!0,Po(c,!1),r.lanes=4194304);c.isBackwards?(x.sibling=r.child,r.child=x):(i=c.last,i!==null?i.sibling=x:r.child=x,c.last=x)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=Ge(),i.sibling=null,a=ct.current,te(ct,v?a&1|2:a&1),Ie&&Qn(r,c.treeForkCount),i):(We(r),null);case 22:case 23:return tn(r),Hc(),c=r.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(We(r),r.subtreeFlags&6&&(r.flags|=8192)):We(r),a=r.updateQueue,a!==null&&bl(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),i!==null&&Y(us),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ei(ht),We(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function pE(i,r){switch(Cc(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return ei(ht),rt(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return io(r),null;case 31:if(r.memoizedState!==null){if(tn(r),r.alternate===null)throw Error(s(340));os()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(tn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));os()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return Y(ct),null;case 4:return rt(),null;case 10:return ei(r.type),null;case 22:case 23:return tn(r),Hc(),i!==null&&Y(us),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return ei(ht),null;case 25:return null;default:return null}}function oy(i,r){switch(Cc(r),r.tag){case 3:ei(ht),rt();break;case 26:case 27:case 5:io(r);break;case 4:rt();break;case 31:r.memoizedState!==null&&tn(r);break;case 13:tn(r);break;case 19:Y(ct);break;case 10:ei(r.type);break;case 22:case 23:tn(r),Hc(),i!==null&&Y(us);break;case 24:ei(ht)}}function Uo(i,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var v=c.next;a=v;do{if((a.tag&i)===i){c=void 0;var x=a.create,_=a.inst;c=x(),_.destroy=c}a=a.next}while(a!==v)}}catch(S){Be(r,r.return,S)}}function Ii(i,r,a){try{var c=r.updateQueue,v=c!==null?c.lastEffect:null;if(v!==null){var x=v.next;c=x;do{if((c.tag&i)===i){var _=c.inst,S=_.destroy;if(S!==void 0){_.destroy=void 0,v=r;var M=a,j=S;try{j()}catch(F){Be(v,M,F)}}}c=c.next}while(c!==x)}}catch(F){Be(r,r.return,F)}}function ay(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{Wm(r,a)}catch(c){Be(i,i.return,c)}}}function ly(i,r,a){a.props=ps(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){Be(i,r,c)}}function Lo(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(v){Be(i,r,v)}}function Hn(i,r){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(v){Be(i,r,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(v){Be(i,r,v)}else a.current=null}function uy(i){var r=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(v){Be(i,i.return,v)}}function bd(i,r,a){try{var c=i.stateNode;LE(c,i.type,a,r),c[zt]=r}catch(v){Be(i,i.return,v)}}function cy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Vi(i.type)||i.tag===4}function wd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||cy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Vi(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function _d(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Yn));else if(c!==4&&(c===27&&Vi(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(_d(i,r,a),i=i.sibling;i!==null;)_d(i,r,a),i=i.sibling}function wl(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(c!==4&&(c===27&&Vi(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(wl(i,r,a),i=i.sibling;i!==null;)wl(i,r,a),i=i.sibling}function dy(i){var r=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);It(r,c,a),r[Ct]=i,r[zt]=a}catch(x){Be(i,i.return,x)}}var ri=!1,gt=!1,Td=!1,fy=typeof WeakSet=="function"?WeakSet:Set,Et=null;function mE(i,r){if(i=i.containerInfo,zd=Hl,i=Sm(i),gc(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var v=c.anchorOffset,x=c.focusNode;c=c.focusOffset;try{a.nodeType,x.nodeType}catch{a=null;break e}var _=0,S=-1,M=-1,j=0,F=0,K=i,G=null;t:for(;;){for(var q;K!==a||v!==0&&K.nodeType!==3||(S=_+v),K!==x||c!==0&&K.nodeType!==3||(M=_+c),K.nodeType===3&&(_+=K.nodeValue.length),(q=K.firstChild)!==null;)G=K,K=q;for(;;){if(K===i)break t;if(G===a&&++j===v&&(S=_),G===x&&++F===c&&(M=_),(q=K.nextSibling)!==null)break;K=G,G=K.parentNode}K=q}a=S===-1||M===-1?null:{start:S,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(Fd={focusedElem:i,selectionRange:a},Hl=!1,Et=r;Et!==null;)if(r=Et,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Et=i;else for(;Et!==null;){switch(r=Et,x=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)v=i[a],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&x!==null){i=void 0,a=r,v=x.memoizedProps,x=x.memoizedState,c=a.stateNode;try{var oe=ps(a.type,v);i=c.getSnapshotBeforeUpdate(oe,x),c.__reactInternalSnapshotBeforeUpdate=i}catch(de){Be(a,a.return,de)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)Kd(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Kd(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Et=i;break}Et=r.return}}function hy(i,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:ai(i,a),c&4&&Uo(5,a);break;case 1:if(ai(i,a),c&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(_){Be(a,a.return,_)}else{var v=ps(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(v,r,i.__reactInternalSnapshotBeforeUpdate)}catch(_){Be(a,a.return,_)}}c&64&&ay(a),c&512&&Lo(a,a.return);break;case 3:if(ai(i,a),c&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Wm(i,r)}catch(_){Be(a,a.return,_)}}break;case 27:r===null&&c&4&&dy(a);case 26:case 5:ai(i,a),r===null&&c&4&&uy(a),c&512&&Lo(a,a.return);break;case 12:ai(i,a);break;case 31:ai(i,a),c&4&&gy(i,a);break;case 13:ai(i,a),c&4&&yy(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=SE.bind(null,a),zE(i,a))));break;case 22:if(c=a.memoizedState!==null||ri,!c){r=r!==null&&r.memoizedState!==null||gt,v=ri;var x=gt;ri=c,(gt=r)&&!x?li(i,a,(a.subtreeFlags&8772)!==0):ai(i,a),ri=v,gt=x}break;case 30:break;default:ai(i,a)}}function py(i){var r=i.alternate;r!==null&&(i.alternate=null,py(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Zu(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ze=null,$t=!1;function oi(i,r,a){for(a=a.child;a!==null;)my(i,r,a),a=a.sibling}function my(i,r,a){if(De&&typeof De.onCommitFiberUnmount=="function")try{De.onCommitFiberUnmount(Ve,a)}catch{}switch(a.tag){case 26:gt||Hn(a,r),oi(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:gt||Hn(a,r);var c=Ze,v=$t;Vi(a.type)&&(Ze=a.stateNode,$t=!1),oi(i,r,a),Fo(a.stateNode),Ze=c,$t=v;break;case 5:gt||Hn(a,r);case 6:if(c=Ze,v=$t,Ze=null,oi(i,r,a),Ze=c,$t=v,Ze!==null)if($t)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(a.stateNode)}catch(x){Be(a,r,x)}else try{Ze.removeChild(a.stateNode)}catch(x){Be(a,r,x)}break;case 18:Ze!==null&&($t?(i=Ze,av(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Tr(i)):av(Ze,a.stateNode));break;case 4:c=Ze,v=$t,Ze=a.stateNode.containerInfo,$t=!0,oi(i,r,a),Ze=c,$t=v;break;case 0:case 11:case 14:case 15:Ii(2,a,r),gt||Ii(4,a,r),oi(i,r,a);break;case 1:gt||(Hn(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&ly(a,r,c)),oi(i,r,a);break;case 21:oi(i,r,a);break;case 22:gt=(c=gt)||a.memoizedState!==null,oi(i,r,a),gt=c;break;default:oi(i,r,a)}}function gy(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Tr(i)}catch(a){Be(r,r.return,a)}}}function yy(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Tr(i)}catch(a){Be(r,r.return,a)}}function gE(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new fy),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new fy),r;default:throw Error(s(435,i.tag))}}function _l(i,r){var a=gE(i);r.forEach(function(c){if(!a.has(c)){a.add(c);var v=EE.bind(null,i,c);c.then(v,v)}})}function Jt(i,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var v=a[c],x=i,_=r,S=_;e:for(;S!==null;){switch(S.tag){case 27:if(Vi(S.type)){Ze=S.stateNode,$t=!1;break e}break;case 5:Ze=S.stateNode,$t=!1;break e;case 3:case 4:Ze=S.stateNode.containerInfo,$t=!0;break e}S=S.return}if(Ze===null)throw Error(s(160));my(x,_,v),Ze=null,$t=!1,x=v.alternate,x!==null&&(x.return=null),v.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)vy(r,i),r=r.sibling}var Nn=null;function vy(i,r){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Jt(r,i),Kt(i),c&4&&(Ii(3,i,i.return),Uo(3,i),Ii(5,i,i.return));break;case 1:Jt(r,i),Kt(i),c&512&&(gt||a===null||Hn(a,a.return)),c&64&&ri&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var v=Nn;if(Jt(r,i),Kt(i),c&512&&(gt||a===null||Hn(a,a.return)),c&4){var x=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,v=v.ownerDocument||v;t:switch(c){case"title":x=v.getElementsByTagName("title")[0],(!x||x[lo]||x[Ct]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=v.createElement(c),v.head.insertBefore(x,v.querySelector("head > title"))),It(x,c,a),x[Ct]=i,St(x),c=x;break e;case"link":var _=vv("link","href",v).get(c+(a.href||""));if(_){for(var S=0;S<_.length;S++)if(x=_[S],x.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&x.getAttribute("rel")===(a.rel==null?null:a.rel)&&x.getAttribute("title")===(a.title==null?null:a.title)&&x.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(S,1);break t}}x=v.createElement(c),It(x,c,a),v.head.appendChild(x);break;case"meta":if(_=vv("meta","content",v).get(c+(a.content||""))){for(S=0;S<_.length;S++)if(x=_[S],x.getAttribute("content")===(a.content==null?null:""+a.content)&&x.getAttribute("name")===(a.name==null?null:a.name)&&x.getAttribute("property")===(a.property==null?null:a.property)&&x.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&x.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(S,1);break t}}x=v.createElement(c),It(x,c,a),v.head.appendChild(x);break;default:throw Error(s(468,c))}x[Ct]=i,St(x),c=x}i.stateNode=c}else xv(v,i.type,i.stateNode);else i.stateNode=yv(v,c,i.memoizedProps);else x!==c?(x===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):x.count--,c===null?xv(v,i.type,i.stateNode):yv(v,c,i.memoizedProps)):c===null&&i.stateNode!==null&&bd(i,i.memoizedProps,a.memoizedProps)}break;case 27:Jt(r,i),Kt(i),c&512&&(gt||a===null||Hn(a,a.return)),a!==null&&c&4&&bd(i,i.memoizedProps,a.memoizedProps);break;case 5:if(Jt(r,i),Kt(i),c&512&&(gt||a===null||Hn(a,a.return)),i.flags&32){v=i.stateNode;try{$s(v,"")}catch(oe){Be(i,i.return,oe)}}c&4&&i.stateNode!=null&&(v=i.memoizedProps,bd(i,v,a!==null?a.memoizedProps:v)),c&1024&&(Td=!0);break;case 6:if(Jt(r,i),Kt(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(oe){Be(i,i.return,oe)}}break;case 3:if(Vl=null,v=Nn,Nn=Ll(r.containerInfo),Jt(r,i),Nn=v,Kt(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Tr(r.containerInfo)}catch(oe){Be(i,i.return,oe)}Td&&(Td=!1,xy(i));break;case 4:c=Nn,Nn=Ll(i.stateNode.containerInfo),Jt(r,i),Kt(i),Nn=c;break;case 12:Jt(r,i),Kt(i);break;case 31:Jt(r,i),Kt(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,_l(i,c)));break;case 13:Jt(r,i),Kt(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Sl=Ge()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,_l(i,c)));break;case 22:v=i.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,j=ri,F=gt;if(ri=j||v,gt=F||M,Jt(r,i),gt=F,ri=j,Kt(i),c&8192)e:for(r=i.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(a===null||M||ri||gt||ms(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){M=a=r;try{if(x=M.stateNode,v)_=x.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{S=M.stateNode;var K=M.memoizedProps.style,G=K!=null&&K.hasOwnProperty("display")?K.display:null;S.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(oe){Be(M,M.return,oe)}}}else if(r.tag===6){if(a===null){M=r;try{M.stateNode.nodeValue=v?"":M.memoizedProps}catch(oe){Be(M,M.return,oe)}}}else if(r.tag===18){if(a===null){M=r;try{var q=M.stateNode;v?lv(q,!0):lv(M.stateNode,!1)}catch(oe){Be(M,M.return,oe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,_l(i,a))));break;case 19:Jt(r,i),Kt(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,_l(i,c)));break;case 30:break;case 21:break;default:Jt(r,i),Kt(i)}}function Kt(i){var r=i.flags;if(r&2){try{for(var a,c=i.return;c!==null;){if(cy(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var v=a.stateNode,x=wd(i);wl(i,x,v);break;case 5:var _=a.stateNode;a.flags&32&&($s(_,""),a.flags&=-33);var S=wd(i);wl(i,S,_);break;case 3:case 4:var M=a.stateNode.containerInfo,j=wd(i);_d(i,j,M);break;default:throw Error(s(161))}}catch(F){Be(i,i.return,F)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function xy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;xy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function ai(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)hy(i,r.alternate,r),r=r.sibling}function ms(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Ii(4,r,r.return),ms(r);break;case 1:Hn(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&ly(r,r.return,a),ms(r);break;case 27:Fo(r.stateNode);case 26:case 5:Hn(r,r.return),ms(r);break;case 22:r.memoizedState===null&&ms(r);break;case 30:ms(r);break;default:ms(r)}i=i.sibling}}function li(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,v=i,x=r,_=x.flags;switch(x.tag){case 0:case 11:case 15:li(v,x,a),Uo(4,x);break;case 1:if(li(v,x,a),c=x,v=c.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(j){Be(c,c.return,j)}if(c=x,v=c.updateQueue,v!==null){var S=c.stateNode;try{var M=v.shared.hiddenCallbacks;if(M!==null)for(v.shared.hiddenCallbacks=null,v=0;v<M.length;v++)Xm(M[v],S)}catch(j){Be(c,c.return,j)}}a&&_&64&&ay(x),Lo(x,x.return);break;case 27:dy(x);case 26:case 5:li(v,x,a),a&&c===null&&_&4&&uy(x),Lo(x,x.return);break;case 12:li(v,x,a);break;case 31:li(v,x,a),a&&_&4&&gy(v,x);break;case 13:li(v,x,a),a&&_&4&&yy(v,x);break;case 22:x.memoizedState===null&&li(v,x,a),Lo(x,x.return);break;case 30:break;default:li(v,x,a)}r=r.sibling}}function Sd(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&_o(a))}function Ed(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&_o(i))}function Rn(i,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)by(i,r,a,c),r=r.sibling}function by(i,r,a,c){var v=r.flags;switch(r.tag){case 0:case 11:case 15:Rn(i,r,a,c),v&2048&&Uo(9,r);break;case 1:Rn(i,r,a,c);break;case 3:Rn(i,r,a,c),v&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&_o(i)));break;case 12:if(v&2048){Rn(i,r,a,c),i=r.stateNode;try{var x=r.memoizedProps,_=x.id,S=x.onPostCommit;typeof S=="function"&&S(_,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(M){Be(r,r.return,M)}}else Rn(i,r,a,c);break;case 31:Rn(i,r,a,c);break;case 13:Rn(i,r,a,c);break;case 23:break;case 22:x=r.stateNode,_=r.alternate,r.memoizedState!==null?x._visibility&2?Rn(i,r,a,c):Oo(i,r):x._visibility&2?Rn(i,r,a,c):(x._visibility|=2,fr(i,r,a,c,(r.subtreeFlags&10256)!==0||!1)),v&2048&&Sd(_,r);break;case 24:Rn(i,r,a,c),v&2048&&Ed(r.alternate,r);break;default:Rn(i,r,a,c)}}function fr(i,r,a,c,v){for(v=v&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var x=i,_=r,S=a,M=c,j=_.flags;switch(_.tag){case 0:case 11:case 15:fr(x,_,S,M,v),Uo(8,_);break;case 23:break;case 22:var F=_.stateNode;_.memoizedState!==null?F._visibility&2?fr(x,_,S,M,v):Oo(x,_):(F._visibility|=2,fr(x,_,S,M,v)),v&&j&2048&&Sd(_.alternate,_);break;case 24:fr(x,_,S,M,v),v&&j&2048&&Ed(_.alternate,_);break;default:fr(x,_,S,M,v)}r=r.sibling}}function Oo(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,c=r,v=c.flags;switch(c.tag){case 22:Oo(a,c),v&2048&&Sd(c.alternate,c);break;case 24:Oo(a,c),v&2048&&Ed(c.alternate,c);break;default:Oo(a,c)}r=r.sibling}}var Vo=8192;function hr(i,r,a){if(i.subtreeFlags&Vo)for(i=i.child;i!==null;)wy(i,r,a),i=i.sibling}function wy(i,r,a){switch(i.tag){case 26:hr(i,r,a),i.flags&Vo&&i.memoizedState!==null&&nA(a,Nn,i.memoizedState,i.memoizedProps);break;case 5:hr(i,r,a);break;case 3:case 4:var c=Nn;Nn=Ll(i.stateNode.containerInfo),hr(i,r,a),Nn=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=Vo,Vo=16777216,hr(i,r,a),Vo=c):hr(i,r,a));break;default:hr(i,r,a)}}function _y(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function jo(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Et=c,Sy(c,i)}_y(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ty(i),i=i.sibling}function Ty(i){switch(i.tag){case 0:case 11:case 15:jo(i),i.flags&2048&&Ii(9,i,i.return);break;case 3:jo(i);break;case 12:jo(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Tl(i)):jo(i);break;default:jo(i)}}function Tl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Et=c,Sy(c,i)}_y(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Ii(8,r,r.return),Tl(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Tl(r));break;default:Tl(r)}i=i.sibling}}function Sy(i,r){for(;Et!==null;){var a=Et;switch(a.tag){case 0:case 11:case 15:Ii(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:_o(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Et=c;else e:for(a=i;Et!==null;){c=Et;var v=c.sibling,x=c.return;if(py(c),c===a){Et=null;break e}if(v!==null){v.return=x,Et=v;break e}Et=x}}}var yE={getCacheForType:function(i){var r=Rt(ht),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return Rt(ht).controller.signal}},vE=typeof WeakMap=="function"?WeakMap:Map,Oe=0,Fe=null,Ae=null,Ne=0,je=0,nn=null,ki=!1,pr=!1,Ad=!1,ui=0,at=0,Di=0,gs=0,Cd=0,sn=0,mr=0,Bo=null,Yt=null,Nd=!1,Sl=0,Ey=0,El=1/0,Al=null,Pi=null,xt=0,Ui=null,gr=null,ci=0,Rd=0,Md=null,Ay=null,Go=0,Id=null;function rn(){return(Oe&2)!==0&&Ne!==0?Ne&-Ne:z.T!==null?Od():Hp()}function Cy(){if(sn===0)if((Ne&536870912)===0||Ie){var i=Sn;Sn<<=1,(Sn&3932160)===0&&(Sn=262144),sn=i}else sn=536870912;return i=en.current,i!==null&&(i.flags|=32),sn}function Xt(i,r,a){(i===Fe&&(je===2||je===9)||i.cancelPendingCommit!==null)&&(yr(i,0),Li(i,Ne,sn,!1)),Zi(i,a),((Oe&2)===0||i!==Fe)&&(i===Fe&&((Oe&2)===0&&(gs|=a),at===4&&Li(i,Ne,sn,!1)),qn(i))}function Ny(i,r,a){if((Oe&6)!==0)throw Error(s(327));var c=!a&&(r&127)===0&&(r&i.expiredLanes)===0||jn(i,r),v=c?wE(i,r):Dd(i,r,!0),x=c;do{if(v===0){pr&&!c&&Li(i,r,0,!1);break}else{if(a=i.current.alternate,x&&!xE(a)){v=Dd(i,r,!1),x=!1;continue}if(v===2){if(x=r,i.errorRecoveryDisabledLanes&x)var _=0;else _=i.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var S=i;v=Bo;var M=S.current.memoizedState.isDehydrated;if(M&&(yr(S,_).flags|=256),_=Dd(S,_,!1),_!==2){if(Ad&&!M){S.errorRecoveryDisabledLanes|=x,gs|=x,v=4;break e}x=Yt,Yt=v,x!==null&&(Yt===null?Yt=x:Yt.push.apply(Yt,x))}v=_}if(x=!1,v!==2)continue}}if(v===1){yr(i,0),Li(i,r,0,!0);break}e:{switch(c=i,x=v,x){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Li(c,r,sn,!ki);break e;case 2:Yt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(v=Sl+300-Ge(),10<v)){if(Li(c,r,sn,!ki),Vn(c,0,!0)!==0)break e;ci=r,c.timeoutHandle=rv(Ry.bind(null,c,a,Yt,Al,Nd,r,sn,gs,mr,ki,x,"Throttled",-0,0),v);break e}Ry(c,a,Yt,Al,Nd,r,sn,gs,mr,ki,x,null,-0,0)}}break}while(!0);qn(i)}function Ry(i,r,a,c,v,x,_,S,M,j,F,K,G,q){if(i.timeoutHandle=-1,K=r.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yn},wy(r,x,K);var oe=(x&62914560)===x?Sl-Ge():(x&4194048)===x?Ey-Ge():0;if(oe=iA(K,oe),oe!==null){ci=x,i.cancelPendingCommit=oe(Oy.bind(null,i,r,x,a,c,v,_,S,M,F,K,null,G,q)),Li(i,x,_,!j);return}}Oy(i,r,x,a,c,v,_,S,M)}function xE(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var v=a[c],x=v.getSnapshot;v=v.value;try{if(!Qt(x(),v))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Li(i,r,a,c){r&=~Cd,r&=~gs,i.suspendedLanes|=r,i.pingedLanes&=~r,c&&(i.warmLanes|=r),c=i.expirationTimes;for(var v=r;0<v;){var x=31-Me(v),_=1<<x;c[x]=-1,v&=~_}a!==0&&Tt(i,a,r)}function Cl(){return(Oe&6)===0?(Ho(0),!1):!0}function kd(){if(Ae!==null){if(je===0)var i=Ae.return;else i=Ae,Zn=as=null,Kc(i),ar=null,So=0,i=Ae;for(;i!==null;)oy(i.alternate,i),i=i.return;Ae=null}}function yr(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,jE(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),ci=0,kd(),Fe=i,Ae=a=Wn(i.current,null),Ne=r,je=0,nn=null,ki=!1,pr=jn(i,r),Ad=!1,mr=sn=Cd=gs=Di=at=0,Yt=Bo=null,Nd=!1,(r&8)!==0&&(r|=r&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=r;0<c;){var v=31-Me(c),x=1<<v;r|=i[v],c&=~x}return ui=r,Ka(),a}function My(i,r){xe=null,z.H=ko,r===or||r===nl?(r=$m(),je=3):r===Lc?(r=$m(),je=4):je=r===cd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,nn=r,Ae===null&&(at=1,gl(i,fn(r,i.current)))}function Iy(){var i=en.current;return i===null?!0:(Ne&4194048)===Ne?gn===null:(Ne&62914560)===Ne||(Ne&536870912)!==0?i===gn:!1}function ky(){var i=z.H;return z.H=ko,i===null?ko:i}function Dy(){var i=z.A;return z.A=yE,i}function Nl(){at=4,ki||(Ne&4194048)!==Ne&&en.current!==null||(pr=!0),(Di&134217727)===0&&(gs&134217727)===0||Fe===null||Li(Fe,Ne,sn,!1)}function Dd(i,r,a){var c=Oe;Oe|=2;var v=ky(),x=Dy();(Fe!==i||Ne!==r)&&(Al=null,yr(i,r)),r=!1;var _=at;e:do try{if(je!==0&&Ae!==null){var S=Ae,M=nn;switch(je){case 8:kd(),_=6;break e;case 3:case 2:case 9:case 6:en.current===null&&(r=!0);var j=je;if(je=0,nn=null,vr(i,S,M,j),a&&pr){_=0;break e}break;default:j=je,je=0,nn=null,vr(i,S,M,j)}}bE(),_=at;break}catch(F){My(i,F)}while(!0);return r&&i.shellSuspendCounter++,Zn=as=null,Oe=c,z.H=v,z.A=x,Ae===null&&(Fe=null,Ne=0,Ka()),_}function bE(){for(;Ae!==null;)Py(Ae)}function wE(i,r){var a=Oe;Oe|=2;var c=ky(),v=Dy();Fe!==i||Ne!==r?(Al=null,El=Ge()+500,yr(i,r)):pr=jn(i,r);e:do try{if(je!==0&&Ae!==null){r=Ae;var x=nn;t:switch(je){case 1:je=0,nn=null,vr(i,r,x,1);break;case 2:case 9:if(zm(x)){je=0,nn=null,Uy(r);break}r=function(){je!==2&&je!==9||Fe!==i||(je=7),qn(i)},x.then(r,r);break e;case 3:je=7;break e;case 4:je=5;break e;case 7:zm(x)?(je=0,nn=null,Uy(r)):(je=0,nn=null,vr(i,r,x,7));break;case 5:var _=null;switch(Ae.tag){case 26:_=Ae.memoizedState;case 5:case 27:var S=Ae;if(_?bv(_):S.stateNode.complete){je=0,nn=null;var M=S.sibling;if(M!==null)Ae=M;else{var j=S.return;j!==null?(Ae=j,Rl(j)):Ae=null}break t}}je=0,nn=null,vr(i,r,x,5);break;case 6:je=0,nn=null,vr(i,r,x,6);break;case 8:kd(),at=6;break e;default:throw Error(s(462))}}_E();break}catch(F){My(i,F)}while(!0);return Zn=as=null,z.H=c,z.A=v,Oe=a,Ae!==null?0:(Fe=null,Ne=0,Ka(),at)}function _E(){for(;Ae!==null&&!Jn();)Py(Ae)}function Py(i){var r=sy(i.alternate,i,ui);i.memoizedProps=i.pendingProps,r===null?Rl(i):Ae=r}function Uy(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=Qg(a,r,r.pendingProps,r.type,void 0,Ne);break;case 11:r=Qg(a,r,r.pendingProps,r.type.render,r.ref,Ne);break;case 5:Kc(r);default:oy(a,r),r=Ae=Dm(r,ui),r=sy(a,r,ui)}i.memoizedProps=i.pendingProps,r===null?Rl(i):Ae=r}function vr(i,r,a,c){Zn=as=null,Kc(r),ar=null,So=0;var v=r.return;try{if(cE(i,v,r,a,Ne)){at=1,gl(i,fn(a,i.current)),Ae=null;return}}catch(x){if(v!==null)throw Ae=v,x;at=1,gl(i,fn(a,i.current)),Ae=null;return}r.flags&32768?(Ie||c===1?i=!0:pr||(Ne&536870912)!==0?i=!1:(ki=i=!0,(c===2||c===9||c===3||c===6)&&(c=en.current,c!==null&&c.tag===13&&(c.flags|=16384))),Ly(r,i)):Rl(r)}function Rl(i){var r=i;do{if((r.flags&32768)!==0){Ly(r,ki);return}i=r.return;var a=hE(r.alternate,r,ui);if(a!==null){Ae=a;return}if(r=r.sibling,r!==null){Ae=r;return}Ae=r=i}while(r!==null);at===0&&(at=5)}function Ly(i,r){do{var a=pE(i.alternate,i);if(a!==null){a.flags&=32767,Ae=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){Ae=i;return}Ae=i=a}while(i!==null);at=6,Ae=null}function Oy(i,r,a,c,v,x,_,S,M){i.cancelPendingCommit=null;do Ml();while(xt!==0);if((Oe&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(x=r.lanes|r.childLanes,x|=wc,La(i,a,x,_,S,M),i===Fe&&(Ae=Fe=null,Ne=0),gr=r,Ui=i,ci=a,Rd=x,Md=v,Ay=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,AE(Vs,function(){return Hy(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=z.T,z.T=null,v=Q.p,Q.p=2,_=Oe,Oe|=4;try{mE(i,r,a)}finally{Oe=_,Q.p=v,z.T=c}}xt=1,Vy(),jy(),By()}}function Vy(){if(xt===1){xt=0;var i=Ui,r=gr,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=z.T,z.T=null;var c=Q.p;Q.p=2;var v=Oe;Oe|=4;try{vy(r,i);var x=Fd,_=Sm(i.containerInfo),S=x.focusedElem,M=x.selectionRange;if(_!==S&&S&&S.ownerDocument&&Tm(S.ownerDocument.documentElement,S)){if(M!==null&&gc(S)){var j=M.start,F=M.end;if(F===void 0&&(F=j),"selectionStart"in S)S.selectionStart=j,S.selectionEnd=Math.min(F,S.value.length);else{var K=S.ownerDocument||document,G=K&&K.defaultView||window;if(G.getSelection){var q=G.getSelection(),oe=S.textContent.length,de=Math.min(M.start,oe),ze=M.end===void 0?de:Math.min(M.end,oe);!q.extend&&de>ze&&(_=ze,ze=de,de=_);var U=_m(S,de),D=_m(S,ze);if(U&&D&&(q.rangeCount!==1||q.anchorNode!==U.node||q.anchorOffset!==U.offset||q.focusNode!==D.node||q.focusOffset!==D.offset)){var V=K.createRange();V.setStart(U.node,U.offset),q.removeAllRanges(),de>ze?(q.addRange(V),q.extend(D.node,D.offset)):(V.setEnd(D.node,D.offset),q.addRange(V))}}}}for(K=[],q=S;q=q.parentNode;)q.nodeType===1&&K.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<K.length;S++){var $=K[S];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Hl=!!zd,Fd=zd=null}finally{Oe=v,Q.p=c,z.T=a}}i.current=r,xt=2}}function jy(){if(xt===2){xt=0;var i=Ui,r=gr,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=z.T,z.T=null;var c=Q.p;Q.p=2;var v=Oe;Oe|=4;try{hy(i,r.alternate,r)}finally{Oe=v,Q.p=c,z.T=a}}xt=3}}function By(){if(xt===4||xt===3){xt=0,ao();var i=Ui,r=gr,a=ci,c=Ay;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?xt=5:(xt=0,gr=Ui=null,Gy(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(Pi=null),Wu(a),r=r.stateNode,De&&typeof De.onCommitFiberRoot=="function")try{De.onCommitFiberRoot(Ve,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=z.T,v=Q.p,Q.p=2,z.T=null;try{for(var x=i.onRecoverableError,_=0;_<c.length;_++){var S=c[_];x(S.value,{componentStack:S.stack})}}finally{z.T=r,Q.p=v}}(ci&3)!==0&&Ml(),qn(i),v=i.pendingLanes,(a&261930)!==0&&(v&42)!==0?i===Id?Go++:(Go=0,Id=i):Go=0,Ho(0)}}function Gy(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,_o(r)))}function Ml(){return Vy(),jy(),By(),Hy()}function Hy(){if(xt!==5)return!1;var i=Ui,r=Rd;Rd=0;var a=Wu(ci),c=z.T,v=Q.p;try{Q.p=32>a?32:a,z.T=null,a=Md,Md=null;var x=Ui,_=ci;if(xt=0,gr=Ui=null,ci=0,(Oe&6)!==0)throw Error(s(331));var S=Oe;if(Oe|=4,Ty(x.current),by(x,x.current,_,a),Oe=S,Ho(0,!1),De&&typeof De.onPostCommitFiberRoot=="function")try{De.onPostCommitFiberRoot(Ve,x)}catch{}return!0}finally{Q.p=v,z.T=c,Gy(i,r)}}function qy(i,r,a){r=fn(a,r),r=ud(i.stateNode,r,2),i=Ni(i,r,2),i!==null&&(Zi(i,2),qn(i))}function Be(i,r,a){if(i.tag===3)qy(i,i,a);else for(;r!==null;){if(r.tag===3){qy(r,i,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Pi===null||!Pi.has(c))){i=fn(a,i),a=zg(2),c=Ni(r,a,2),c!==null&&(Fg(a,c,r,i),Zi(c,2),qn(c));break}}r=r.return}}function Pd(i,r,a){var c=i.pingCache;if(c===null){c=i.pingCache=new vE;var v=new Set;c.set(r,v)}else v=c.get(r),v===void 0&&(v=new Set,c.set(r,v));v.has(a)||(Ad=!0,v.add(a),i=TE.bind(null,i,r,a),r.then(i,i))}function TE(i,r,a){var c=i.pingCache;c!==null&&c.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,Fe===i&&(Ne&a)===a&&(at===4||at===3&&(Ne&62914560)===Ne&&300>Ge()-Sl?(Oe&2)===0&&yr(i,0):Cd|=a,mr===Ne&&(mr=0)),qn(i)}function zy(i,r){r===0&&(r=tt()),i=ss(i,r),i!==null&&(Zi(i,r),qn(i))}function SE(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),zy(i,a)}function EE(i,r){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,v=i.memoizedState;v!==null&&(a=v.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(r),zy(i,a)}function AE(i,r){return Ls(i,r)}var Il=null,xr=null,Ud=!1,kl=!1,Ld=!1,Oi=0;function qn(i){i!==xr&&i.next===null&&(xr===null?Il=xr=i:xr=xr.next=i),kl=!0,Ud||(Ud=!0,NE())}function Ho(i,r){if(!Ld&&kl){Ld=!0;do for(var a=!1,c=Il;c!==null;){if(i!==0){var v=c.pendingLanes;if(v===0)var x=0;else{var _=c.suspendedLanes,S=c.pingedLanes;x=(1<<31-Me(42|i)+1)-1,x&=v&~(_&~S),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(a=!0,Ky(c,x))}else x=Ne,x=Vn(c,c===Fe?x:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(x&3)===0||jn(c,x)||(a=!0,Ky(c,x));c=c.next}while(a);Ld=!1}}function CE(){Fy()}function Fy(){kl=Ud=!1;var i=0;Oi!==0&&VE()&&(i=Oi);for(var r=Ge(),a=null,c=Il;c!==null;){var v=c.next,x=$y(c,r);x===0?(c.next=null,a===null?Il=v:a.next=v,v===null&&(xr=a)):(a=c,(i!==0||(x&3)!==0)&&(kl=!0)),c=v}xt!==0&&xt!==5||Ho(i),Oi!==0&&(Oi=0)}function $y(i,r){for(var a=i.suspendedLanes,c=i.pingedLanes,v=i.expirationTimes,x=i.pendingLanes&-62914561;0<x;){var _=31-Me(x),S=1<<_,M=v[_];M===-1?((S&a)===0||(S&c)!==0)&&(v[_]=jp(S,r)):M<=r&&(i.expiredLanes|=S),x&=~S}if(r=Fe,a=Ne,a=Vn(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===r&&(je===2||je===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Os(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||jn(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(c!==null&&Os(c),Wu(a)){case 2:case 8:a=Pa;break;case 32:a=Vs;break;case 268435456:a=Ua;break;default:a=Vs}return c=Jy.bind(null,i),a=Ls(a,c),i.callbackPriority=r,i.callbackNode=a,r}return c!==null&&c!==null&&Os(c),i.callbackPriority=2,i.callbackNode=null,2}function Jy(i,r){if(xt!==0&&xt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Ml()&&i.callbackNode!==a)return null;var c=Ne;return c=Vn(i,i===Fe?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(Ny(i,c,r),$y(i,Ge()),i.callbackNode!=null&&i.callbackNode===a?Jy.bind(null,i):null)}function Ky(i,r){if(Ml())return null;Ny(i,r,!0)}function NE(){BE(function(){(Oe&6)!==0?Ls(Da,CE):Fy()})}function Od(){if(Oi===0){var i=sr;i===0&&(i=Ye,Ye<<=1,(Ye&261888)===0&&(Ye=256)),Oi=i}return Oi}function Yy(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ba(""+i)}function Xy(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function RE(i,r,a,c,v){if(r==="submit"&&a&&a.stateNode===v){var x=Yy((v[zt]||null).action),_=c.submitter;_&&(r=(r=_[zt]||null)?Yy(r.formAction):_.getAttribute("formAction"),r!==null&&(x=r,_=null));var S=new za("action","action",null,c,v);i.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Oi!==0){var M=_?Xy(v,_):new FormData(v);id(a,{pending:!0,data:M,method:v.method,action:x},null,M)}}else typeof x=="function"&&(S.preventDefault(),M=_?Xy(v,_):new FormData(v),id(a,{pending:!0,data:M,method:v.method,action:x},x,M))},currentTarget:v}]})}}for(var Vd=0;Vd<bc.length;Vd++){var jd=bc[Vd],ME=jd.toLowerCase(),IE=jd[0].toUpperCase()+jd.slice(1);Cn(ME,"on"+IE)}Cn(Cm,"onAnimationEnd"),Cn(Nm,"onAnimationIteration"),Cn(Rm,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(JS,"onTransitionRun"),Cn(KS,"onTransitionStart"),Cn(YS,"onTransitionCancel"),Cn(Mm,"onTransitionEnd"),zs("onMouseEnter",["mouseout","mouseover"]),zs("onMouseLeave",["mouseout","mouseover"]),zs("onPointerEnter",["pointerout","pointerover"]),zs("onPointerLeave",["pointerout","pointerover"]),es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),es("onBeforeInput",["compositionend","keypress","textInput","paste"]),es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qo));function Wy(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],v=c.event;c=c.listeners;e:{var x=void 0;if(r)for(var _=c.length-1;0<=_;_--){var S=c[_],M=S.instance,j=S.currentTarget;if(S=S.listener,M!==x&&v.isPropagationStopped())break e;x=S,v.currentTarget=j;try{x(v)}catch(F){Ja(F)}v.currentTarget=null,x=M}else for(_=0;_<c.length;_++){if(S=c[_],M=S.instance,j=S.currentTarget,S=S.listener,M!==x&&v.isPropagationStopped())break e;x=S,v.currentTarget=j;try{x(v)}catch(F){Ja(F)}v.currentTarget=null,x=M}}}}function Ce(i,r){var a=r[Qu];a===void 0&&(a=r[Qu]=new Set);var c=i+"__bubble";a.has(c)||(Qy(r,i,2,!1),a.add(c))}function Bd(i,r,a){var c=0;r&&(c|=4),Qy(a,i,c,r)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function Gd(i){if(!i[Dl]){i[Dl]=!0,Fp.forEach(function(a){a!=="selectionchange"&&(kE.has(a)||Bd(a,!1,i),Bd(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Dl]||(r[Dl]=!0,Bd("selectionchange",!1,r))}}function Qy(i,r,a,c){switch(Cv(r)){case 2:var v=oA;break;case 8:v=aA;break;default:v=nf}a=v.bind(null,r,a,i),v=void 0,!ac||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),c?v!==void 0?i.addEventListener(r,a,{capture:!0,passive:v}):i.addEventListener(r,a,!0):v!==void 0?i.addEventListener(r,a,{passive:v}):i.addEventListener(r,a,!1)}function Hd(i,r,a,c,v){var x=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var S=c.stateNode.containerInfo;if(S===v)break;if(_===4)for(_=c.return;_!==null;){var M=_.tag;if((M===3||M===4)&&_.stateNode.containerInfo===v)return;_=_.return}for(;S!==null;){if(_=Gs(S),_===null)return;if(M=_.tag,M===5||M===6||M===26||M===27){c=x=_;continue e}S=S.parentNode}}c=c.return}im(function(){var j=x,F=rc(a),K=[];e:{var G=Im.get(i);if(G!==void 0){var q=za,oe=i;switch(i){case"keypress":if(Ha(a)===0)break e;case"keydown":case"keyup":q=ES;break;case"focusin":oe="focus",q=dc;break;case"focusout":oe="blur",q=dc;break;case"beforeblur":case"afterblur":q=dc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=om;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=hS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=NS;break;case Cm:case Nm:case Rm:q=gS;break;case Mm:q=MS;break;case"scroll":case"scrollend":q=dS;break;case"wheel":q=kS;break;case"copy":case"cut":case"paste":q=vS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=lm;break;case"toggle":case"beforetoggle":q=PS}var de=(r&4)!==0,ze=!de&&(i==="scroll"||i==="scrollend"),U=de?G!==null?G+"Capture":null:G;de=[];for(var D=j,V;D!==null;){var $=D;if(V=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||V===null||U===null||($=co(D,U),$!=null&&de.push(zo(D,$,V))),ze)break;D=D.return}0<de.length&&(G=new q(G,oe,null,a,F),K.push({event:G,listeners:de}))}}if((r&7)===0){e:{if(G=i==="mouseover"||i==="pointerover",q=i==="mouseout"||i==="pointerout",G&&a!==sc&&(oe=a.relatedTarget||a.fromElement)&&(Gs(oe)||oe[Bs]))break e;if((q||G)&&(G=F.window===F?F:(G=F.ownerDocument)?G.defaultView||G.parentWindow:window,q?(oe=a.relatedTarget||a.toElement,q=j,oe=oe?Gs(oe):null,oe!==null&&(ze=l(oe),de=oe.tag,oe!==ze||de!==5&&de!==27&&de!==6)&&(oe=null)):(q=null,oe=j),q!==oe)){if(de=om,$="onMouseLeave",U="onMouseEnter",D="mouse",(i==="pointerout"||i==="pointerover")&&(de=lm,$="onPointerLeave",U="onPointerEnter",D="pointer"),ze=q==null?G:uo(q),V=oe==null?G:uo(oe),G=new de($,D+"leave",q,a,F),G.target=ze,G.relatedTarget=V,$=null,Gs(F)===j&&(de=new de(U,D+"enter",oe,a,F),de.target=V,de.relatedTarget=ze,$=de),ze=$,q&&oe)t:{for(de=DE,U=q,D=oe,V=0,$=U;$;$=de($))V++;$=0;for(var ce=D;ce;ce=de(ce))$++;for(;0<V-$;)U=de(U),V--;for(;0<$-V;)D=de(D),$--;for(;V--;){if(U===D||D!==null&&U===D.alternate){de=U;break t}U=de(U),D=de(D)}de=null}else de=null;q!==null&&Zy(K,G,q,de,!1),oe!==null&&ze!==null&&Zy(K,ze,oe,de,!0)}}e:{if(G=j?uo(j):window,q=G.nodeName&&G.nodeName.toLowerCase(),q==="select"||q==="input"&&G.type==="file")var Pe=gm;else if(pm(G))if(ym)Pe=zS;else{Pe=HS;var le=GS}else q=G.nodeName,!q||q.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?j&&ic(j.elementType)&&(Pe=gm):Pe=qS;if(Pe&&(Pe=Pe(i,j))){mm(K,Pe,a,F);break e}le&&le(i,G,j),i==="focusout"&&j&&G.type==="number"&&j.memoizedProps.value!=null&&nc(G,"number",G.value)}switch(le=j?uo(j):window,i){case"focusin":(pm(le)||le.contentEditable==="true")&&(Xs=le,yc=j,xo=null);break;case"focusout":xo=yc=Xs=null;break;case"mousedown":vc=!0;break;case"contextmenu":case"mouseup":case"dragend":vc=!1,Em(K,a,F);break;case"selectionchange":if($S)break;case"keydown":case"keyup":Em(K,a,F)}var be;if(hc)e:{switch(i){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Ys?fm(i,a)&&(Re="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&(um&&a.locale!=="ko"&&(Ys||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Ys&&(be=sm()):(wi=F,lc="value"in wi?wi.value:wi.textContent,Ys=!0)),le=Pl(j,Re),0<le.length&&(Re=new am(Re,i,null,a,F),K.push({event:Re,listeners:le}),be?Re.data=be:(be=hm(a),be!==null&&(Re.data=be)))),(be=LS?OS(i,a):VS(i,a))&&(Re=Pl(j,"onBeforeInput"),0<Re.length&&(le=new am("onBeforeInput","beforeinput",null,a,F),K.push({event:le,listeners:Re}),le.data=be)),RE(K,i,j,a,F)}Wy(K,r)})}function zo(i,r,a){return{instance:i,listener:r,currentTarget:a}}function Pl(i,r){for(var a=r+"Capture",c=[];i!==null;){var v=i,x=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||x===null||(v=co(i,a),v!=null&&c.unshift(zo(i,v,x)),v=co(i,r),v!=null&&c.push(zo(i,v,x))),i.tag===3)return c;i=i.return}return[]}function DE(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Zy(i,r,a,c,v){for(var x=r._reactName,_=[];a!==null&&a!==c;){var S=a,M=S.alternate,j=S.stateNode;if(S=S.tag,M!==null&&M===c)break;S!==5&&S!==26&&S!==27||j===null||(M=j,v?(j=co(a,x),j!=null&&_.unshift(zo(a,j,M))):v||(j=co(a,x),j!=null&&_.push(zo(a,j,M)))),a=a.return}_.length!==0&&i.push({event:r,listeners:_})}var PE=/\r\n?/g,UE=/\u0000|\uFFFD/g;function ev(i){return(typeof i=="string"?i:""+i).replace(PE,`
`).replace(UE,"")}function tv(i,r){return r=ev(r),ev(i)===r}function qe(i,r,a,c,v,x){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||$s(i,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&$s(i,""+c);break;case"className":Va(i,"class",c);break;case"tabIndex":Va(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Va(i,a,c);break;case"style":tm(i,c,x);break;case"data":if(r!=="object"){Va(i,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Ba(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(a==="formAction"?(r!=="input"&&qe(i,r,"name",v.name,v,null),qe(i,r,"formEncType",v.formEncType,v,null),qe(i,r,"formMethod",v.formMethod,v,null),qe(i,r,"formTarget",v.formTarget,v,null)):(qe(i,r,"encType",v.encType,v,null),qe(i,r,"method",v.method,v,null),qe(i,r,"target",v.target,v,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Ba(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=Yn);break;case"onScroll":c!=null&&Ce("scroll",i);break;case"onScrollEnd":c!=null&&Ce("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(v.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=Ba(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":Ce("beforetoggle",i),Ce("toggle",i),Oa(i,"popover",c);break;case"xlinkActuate":Kn(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Kn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Kn(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Kn(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Kn(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Kn(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Kn(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Kn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Kn(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Oa(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=uS.get(a)||a,Oa(i,a,c))}}function qd(i,r,a,c,v,x){switch(a){case"style":tm(i,c,x);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(v.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof c=="string"?$s(i,c):(typeof c=="number"||typeof c=="bigint")&&$s(i,""+c);break;case"onScroll":c!=null&&Ce("scroll",i);break;case"onScrollEnd":c!=null&&Ce("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Yn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$p.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(v=a.endsWith("Capture"),r=a.slice(2,v?a.length-7:void 0),x=i[zt]||null,x=x!=null?x[a]:null,typeof x=="function"&&i.removeEventListener(r,x,v),typeof c=="function")){typeof x!="function"&&x!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,c,v);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):Oa(i,a,c)}}}function It(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",i),Ce("load",i);var c=!1,v=!1,x;for(x in a)if(a.hasOwnProperty(x)){var _=a[x];if(_!=null)switch(x){case"src":c=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:qe(i,r,x,_,a,null)}}v&&qe(i,r,"srcSet",a.srcSet,a,null),c&&qe(i,r,"src",a.src,a,null);return;case"input":Ce("invalid",i);var S=x=_=v=null,M=null,j=null;for(c in a)if(a.hasOwnProperty(c)){var F=a[c];if(F!=null)switch(c){case"name":v=F;break;case"type":_=F;break;case"checked":M=F;break;case"defaultChecked":j=F;break;case"value":x=F;break;case"defaultValue":S=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,r));break;default:qe(i,r,c,F,a,null)}}Wp(i,x,S,M,j,_,v,!1);return;case"select":Ce("invalid",i),c=_=x=null;for(v in a)if(a.hasOwnProperty(v)&&(S=a[v],S!=null))switch(v){case"value":x=S;break;case"defaultValue":_=S;break;case"multiple":c=S;default:qe(i,r,v,S,a,null)}r=x,a=_,i.multiple=!!c,r!=null?Fs(i,!!c,r,!1):a!=null&&Fs(i,!!c,a,!0);return;case"textarea":Ce("invalid",i),x=v=c=null;for(_ in a)if(a.hasOwnProperty(_)&&(S=a[_],S!=null))switch(_){case"value":c=S;break;case"defaultValue":v=S;break;case"children":x=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:qe(i,r,_,S,a,null)}Zp(i,c,v,x);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(c=a[M],c!=null))switch(M){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:qe(i,r,M,c,a,null)}return;case"dialog":Ce("beforetoggle",i),Ce("toggle",i),Ce("cancel",i),Ce("close",i);break;case"iframe":case"object":Ce("load",i);break;case"video":case"audio":for(c=0;c<qo.length;c++)Ce(qo[c],i);break;case"image":Ce("error",i),Ce("load",i);break;case"details":Ce("toggle",i);break;case"embed":case"source":case"link":Ce("error",i),Ce("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(c=a[j],c!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:qe(i,r,j,c,a,null)}return;default:if(ic(r)){for(F in a)a.hasOwnProperty(F)&&(c=a[F],c!==void 0&&qd(i,r,F,c,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(c=a[S],c!=null&&qe(i,r,S,c,a,null))}function LE(i,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,x=null,_=null,S=null,M=null,j=null,F=null;for(q in a){var K=a[q];if(a.hasOwnProperty(q)&&K!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":M=K;default:c.hasOwnProperty(q)||qe(i,r,q,null,c,K)}}for(var G in c){var q=c[G];if(K=a[G],c.hasOwnProperty(G)&&(q!=null||K!=null))switch(G){case"type":x=q;break;case"name":v=q;break;case"checked":j=q;break;case"defaultChecked":F=q;break;case"value":_=q;break;case"defaultValue":S=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,r));break;default:q!==K&&qe(i,r,G,q,c,K)}}tc(i,_,S,M,j,F,x,v);return;case"select":q=_=S=G=null;for(x in a)if(M=a[x],a.hasOwnProperty(x)&&M!=null)switch(x){case"value":break;case"multiple":q=M;default:c.hasOwnProperty(x)||qe(i,r,x,null,c,M)}for(v in c)if(x=c[v],M=a[v],c.hasOwnProperty(v)&&(x!=null||M!=null))switch(v){case"value":G=x;break;case"defaultValue":S=x;break;case"multiple":_=x;default:x!==M&&qe(i,r,v,x,c,M)}r=S,a=_,c=q,G!=null?Fs(i,!!a,G,!1):!!c!=!!a&&(r!=null?Fs(i,!!a,r,!0):Fs(i,!!a,a?[]:"",!1));return;case"textarea":q=G=null;for(S in a)if(v=a[S],a.hasOwnProperty(S)&&v!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:qe(i,r,S,null,c,v)}for(_ in c)if(v=c[_],x=a[_],c.hasOwnProperty(_)&&(v!=null||x!=null))switch(_){case"value":G=v;break;case"defaultValue":q=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:v!==x&&qe(i,r,_,v,c,x)}Qp(i,G,q);return;case"option":for(var oe in a)if(G=a[oe],a.hasOwnProperty(oe)&&G!=null&&!c.hasOwnProperty(oe))switch(oe){case"selected":i.selected=!1;break;default:qe(i,r,oe,null,c,G)}for(M in c)if(G=c[M],q=a[M],c.hasOwnProperty(M)&&G!==q&&(G!=null||q!=null))switch(M){case"selected":i.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:qe(i,r,M,G,c,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var de in a)G=a[de],a.hasOwnProperty(de)&&G!=null&&!c.hasOwnProperty(de)&&qe(i,r,de,null,c,G);for(j in c)if(G=c[j],q=a[j],c.hasOwnProperty(j)&&G!==q&&(G!=null||q!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,r));break;default:qe(i,r,j,G,c,q)}return;default:if(ic(r)){for(var ze in a)G=a[ze],a.hasOwnProperty(ze)&&G!==void 0&&!c.hasOwnProperty(ze)&&qd(i,r,ze,void 0,c,G);for(F in c)G=c[F],q=a[F],!c.hasOwnProperty(F)||G===q||G===void 0&&q===void 0||qd(i,r,F,G,c,q);return}}for(var U in a)G=a[U],a.hasOwnProperty(U)&&G!=null&&!c.hasOwnProperty(U)&&qe(i,r,U,null,c,G);for(K in c)G=c[K],q=a[K],!c.hasOwnProperty(K)||G===q||G==null&&q==null||qe(i,r,K,G,c,q)}function nv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function OE(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var v=a[c],x=v.transferSize,_=v.initiatorType,S=v.duration;if(x&&S&&nv(_)){for(_=0,S=v.responseEnd,c+=1;c<a.length;c++){var M=a[c],j=M.startTime;if(j>S)break;var F=M.transferSize,K=M.initiatorType;F&&nv(K)&&(M=M.responseEnd,_+=F*(M<S?1:(S-j)/(M-j)))}if(--c,r+=8*(x+_)/(v.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var zd=null,Fd=null;function Ul(i){return i.nodeType===9?i:i.ownerDocument}function iv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sv(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function $d(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Jd=null;function VE(){var i=window.event;return i&&i.type==="popstate"?i===Jd?!1:(Jd=i,!0):(Jd=null,!1)}var rv=typeof setTimeout=="function"?setTimeout:void 0,jE=typeof clearTimeout=="function"?clearTimeout:void 0,ov=typeof Promise=="function"?Promise:void 0,BE=typeof queueMicrotask=="function"?queueMicrotask:typeof ov<"u"?function(i){return ov.resolve(null).then(i).catch(GE)}:rv;function GE(i){setTimeout(function(){throw i})}function Vi(i){return i==="head"}function av(i,r){var a=r,c=0;do{var v=a.nextSibling;if(i.removeChild(a),v&&v.nodeType===8)if(a=v.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(v),Tr(r);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Fo(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Fo(a);for(var x=a.firstChild;x;){var _=x.nextSibling,S=x.nodeName;x[lo]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&x.rel.toLowerCase()==="stylesheet"||a.removeChild(x),x=_}}else a==="body"&&Fo(i.ownerDocument.body);a=v}while(a);Tr(r)}function lv(i,r){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function Kd(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Kd(a),Zu(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function HE(i,r,a,c){for(;i.nodeType===1;){var v=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[lo])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(x=i.getAttribute("rel"),x==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(x!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(x=i.getAttribute("src"),(x!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&x&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var x=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===x)return i}else return i;if(i=yn(i.nextSibling),i===null)break}return null}function qE(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=yn(i.nextSibling),i===null))return null;return i}function uv(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=yn(i.nextSibling),i===null))return null;return i}function Yd(i){return i.data==="$?"||i.data==="$~"}function Xd(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function zE(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function yn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Wd=null;function cv(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return yn(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function dv(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function fv(i,r,a){switch(r=Ul(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Fo(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Zu(i)}var vn=new Map,hv=new Set;function Ll(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var di=Q.d;Q.d={f:FE,r:$E,D:JE,C:KE,L:YE,m:XE,X:QE,S:WE,M:ZE};function FE(){var i=di.f(),r=Cl();return i||r}function $E(i){var r=Hs(i);r!==null&&r.tag===5&&r.type==="form"?Mg(r):di.r(i)}var br=typeof document>"u"?null:document;function pv(i,r,a){var c=br;if(c&&typeof r=="string"&&r){var v=cn(r);v='link[rel="'+i+'"][href="'+v+'"]',typeof a=="string"&&(v+='[crossorigin="'+a+'"]'),hv.has(v)||(hv.add(v),i={rel:i,crossOrigin:a,href:r},c.querySelector(v)===null&&(r=c.createElement("link"),It(r,"link",i),St(r),c.head.appendChild(r)))}}function JE(i){di.D(i),pv("dns-prefetch",i,null)}function KE(i,r){di.C(i,r),pv("preconnect",i,r)}function YE(i,r,a){di.L(i,r,a);var c=br;if(c&&i&&r){var v='link[rel="preload"][as="'+cn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(v+='[imagesrcset="'+cn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(v+='[imagesizes="'+cn(a.imageSizes)+'"]')):v+='[href="'+cn(i)+'"]';var x=v;switch(r){case"style":x=wr(i);break;case"script":x=_r(i)}vn.has(x)||(i=b({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),vn.set(x,i),c.querySelector(v)!==null||r==="style"&&c.querySelector($o(x))||r==="script"&&c.querySelector(Jo(x))||(r=c.createElement("link"),It(r,"link",i),St(r),c.head.appendChild(r)))}}function XE(i,r){di.m(i,r);var a=br;if(a&&i){var c=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+cn(c)+'"][href="'+cn(i)+'"]',x=v;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=_r(i)}if(!vn.has(x)&&(i=b({rel:"modulepreload",href:i},r),vn.set(x,i),a.querySelector(v)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Jo(x)))return}c=a.createElement("link"),It(c,"link",i),St(c),a.head.appendChild(c)}}}function WE(i,r,a){di.S(i,r,a);var c=br;if(c&&i){var v=qs(c).hoistableStyles,x=wr(i);r=r||"default";var _=v.get(x);if(!_){var S={loading:0,preload:null};if(_=c.querySelector($o(x)))S.loading=5;else{i=b({rel:"stylesheet",href:i,"data-precedence":r},a),(a=vn.get(x))&&Qd(i,a);var M=_=c.createElement("link");St(M),It(M,"link",i),M._p=new Promise(function(j,F){M.onload=j,M.onerror=F}),M.addEventListener("load",function(){S.loading|=1}),M.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Ol(_,r,c)}_={type:"stylesheet",instance:_,count:1,state:S},v.set(x,_)}}}function QE(i,r){di.X(i,r);var a=br;if(a&&i){var c=qs(a).hoistableScripts,v=_r(i),x=c.get(v);x||(x=a.querySelector(Jo(v)),x||(i=b({src:i,async:!0},r),(r=vn.get(v))&&Zd(i,r),x=a.createElement("script"),St(x),It(x,"link",i),a.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},c.set(v,x))}}function ZE(i,r){di.M(i,r);var a=br;if(a&&i){var c=qs(a).hoistableScripts,v=_r(i),x=c.get(v);x||(x=a.querySelector(Jo(v)),x||(i=b({src:i,async:!0,type:"module"},r),(r=vn.get(v))&&Zd(i,r),x=a.createElement("script"),St(x),It(x,"link",i),a.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},c.set(v,x))}}function mv(i,r,a,c){var v=(v=we.current)?Ll(v):null;if(!v)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=wr(a.href),a=qs(v).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=wr(a.href);var x=qs(v).hoistableStyles,_=x.get(i);if(_||(v=v.ownerDocument||v,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(i,_),(x=v.querySelector($o(i)))&&!x._p&&(_.instance=x,_.state.loading=5),vn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},vn.set(i,a),x||eA(v,i,a,_.state))),r&&c===null)throw Error(s(528,""));return _}if(r&&c!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=_r(a),a=qs(v).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function wr(i){return'href="'+cn(i)+'"'}function $o(i){return'link[rel="stylesheet"]['+i+"]"}function gv(i){return b({},i,{"data-precedence":i.precedence,precedence:null})}function eA(i,r,a,c){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=i.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),It(r,"link",a),St(r),i.head.appendChild(r))}function _r(i){return'[src="'+cn(i)+'"]'}function Jo(i){return"script[async]"+i}function yv(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=i.querySelector('style[data-href~="'+cn(a.href)+'"]');if(c)return r.instance=c,St(c),c;var v=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),St(c),It(c,"style",v),Ol(c,a.precedence,i),r.instance=c;case"stylesheet":v=wr(a.href);var x=i.querySelector($o(v));if(x)return r.state.loading|=4,r.instance=x,St(x),x;c=gv(a),(v=vn.get(v))&&Qd(c,v),x=(i.ownerDocument||i).createElement("link"),St(x);var _=x;return _._p=new Promise(function(S,M){_.onload=S,_.onerror=M}),It(x,"link",c),r.state.loading|=4,Ol(x,a.precedence,i),r.instance=x;case"script":return x=_r(a.src),(v=i.querySelector(Jo(x)))?(r.instance=v,St(v),v):(c=a,(v=vn.get(x))&&(c=b({},a),Zd(c,v)),i=i.ownerDocument||i,v=i.createElement("script"),St(v),It(v,"link",c),i.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Ol(c,a.precedence,i));return r.instance}function Ol(i,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=c.length?c[c.length-1]:null,x=v,_=0;_<c.length;_++){var S=c[_];if(S.dataset.precedence===r)x=S;else if(x!==v)break}x?x.parentNode.insertBefore(i,x.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function Qd(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Zd(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Vl=null;function vv(i,r,a){if(Vl===null){var c=new Map,v=Vl=new Map;v.set(a,c)}else v=Vl,c=v.get(a),c||(c=new Map,v.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),v=0;v<a.length;v++){var x=a[v];if(!(x[lo]||x[Ct]||i==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var _=x.getAttribute(r)||"";_=i+_;var S=c.get(_);S?S.push(x):c.set(_,[x])}}return c}function xv(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function tA(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function bv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function nA(i,r,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var v=wr(c.href),x=r.querySelector($o(v));if(x){r=x._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=jl.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=x,St(x);return}x=r.ownerDocument||r,c=gv(c),(v=vn.get(v))&&Qd(c,v),x=x.createElement("link"),St(x);var _=x;_._p=new Promise(function(S,M){_.onload=S,_.onerror=M}),It(x,"link",c),a.instance=x}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=jl.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var ef=0;function iA(i,r){return i.stylesheets&&i.count===0&&Gl(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&Gl(i,i.stylesheets),i.unsuspend){var x=i.unsuspend;i.unsuspend=null,x()}},6e4+r);0<i.imgBytes&&ef===0&&(ef=62500*OE());var v=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Gl(i,i.stylesheets),i.unsuspend)){var x=i.unsuspend;i.unsuspend=null,x()}},(i.imgBytes>ef?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(v)}}:null}function jl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gl(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Bl=null;function Gl(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Bl=new Map,r.forEach(sA,i),Bl=null,jl.call(i))}function sA(i,r){if(!(r.state.loading&4)){var a=Bl.get(i);if(a)var c=a.get(null);else{a=new Map,Bl.set(i,a);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<v.length;x++){var _=v[x];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),c=_)}c&&a.set(null,c)}v=r.instance,_=v.getAttribute("data-precedence"),x=a.get(_)||c,x===c&&a.set(null,v),a.set(_,v),this.count++,c=jl.bind(this),v.addEventListener("load",c),v.addEventListener("error",c),x?x.parentNode.insertBefore(v,x.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),r.state.loading|=4}}var Ko={$$typeof:N,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function rA(i,r,a,c,v,x,_,S,M){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=js(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=js(0),this.hiddenUpdates=js(null),this.identifierPrefix=c,this.onUncaughtError=v,this.onCaughtError=x,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function wv(i,r,a,c,v,x,_,S,M,j,F,K){return i=new rA(i,r,a,_,M,j,F,K,S),r=1,x===!0&&(r|=24),x=Zt(3,null,null,r),i.current=x,x.stateNode=i,r=Dc(),r.refCount++,i.pooledCache=r,r.refCount++,x.memoizedState={element:c,isDehydrated:a,cache:r},Oc(x),i}function _v(i){return i?(i=Zs,i):Zs}function Tv(i,r,a,c,v,x){v=_v(v),c.context===null?c.context=v:c.pendingContext=v,c=Ci(r),c.payload={element:a},x=x===void 0?null:x,x!==null&&(c.callback=x),a=Ni(i,c,r),a!==null&&(Xt(a,i,r),Ao(a,i,r))}function Sv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function tf(i,r){Sv(i,r),(i=i.alternate)&&Sv(i,r)}function Ev(i){if(i.tag===13||i.tag===31){var r=ss(i,67108864);r!==null&&Xt(r,i,67108864),tf(i,67108864)}}function Av(i){if(i.tag===13||i.tag===31){var r=rn();r=Xu(r);var a=ss(i,r);a!==null&&Xt(a,i,r),tf(i,r)}}var Hl=!0;function oA(i,r,a,c){var v=z.T;z.T=null;var x=Q.p;try{Q.p=2,nf(i,r,a,c)}finally{Q.p=x,z.T=v}}function aA(i,r,a,c){var v=z.T;z.T=null;var x=Q.p;try{Q.p=8,nf(i,r,a,c)}finally{Q.p=x,z.T=v}}function nf(i,r,a,c){if(Hl){var v=sf(c);if(v===null)Hd(i,r,c,ql,a),Nv(i,c);else if(uA(v,i,r,a,c))c.stopPropagation();else if(Nv(i,c),r&4&&-1<lA.indexOf(i)){for(;v!==null;){var x=Hs(v);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var _=An(x.pendingLanes);if(_!==0){var S=x;for(S.pendingLanes|=2,S.entangledLanes|=2;_;){var M=1<<31-Me(_);S.entanglements[1]|=M,_&=~M}qn(x),(Oe&6)===0&&(El=Ge()+500,Ho(0))}}break;case 31:case 13:S=ss(x,2),S!==null&&Xt(S,x,2),Cl(),tf(x,2)}if(x=sf(c),x===null&&Hd(i,r,c,ql,a),x===v)break;v=x}v!==null&&c.stopPropagation()}else Hd(i,r,c,null,a)}}function sf(i){return i=rc(i),rf(i)}var ql=null;function rf(i){if(ql=null,i=Gs(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=u(r),i!==null)return i;i=null}else if(a===31){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return ql=i,null}function Cv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ku()){case Da:return 2;case Pa:return 8;case Vs:case Yu:return 32;case Ua:return 268435456;default:return 32}default:return 32}}var of=!1,ji=null,Bi=null,Gi=null,Yo=new Map,Xo=new Map,Hi=[],lA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nv(i,r){switch(i){case"focusin":case"focusout":ji=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":Gi=null;break;case"pointerover":case"pointerout":Yo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(r.pointerId)}}function Wo(i,r,a,c,v,x){return i===null||i.nativeEvent!==x?(i={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:x,targetContainers:[v]},r!==null&&(r=Hs(r),r!==null&&Ev(r)),i):(i.eventSystemFlags|=c,r=i.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),i)}function uA(i,r,a,c,v){switch(r){case"focusin":return ji=Wo(ji,i,r,a,c,v),!0;case"dragenter":return Bi=Wo(Bi,i,r,a,c,v),!0;case"mouseover":return Gi=Wo(Gi,i,r,a,c,v),!0;case"pointerover":var x=v.pointerId;return Yo.set(x,Wo(Yo.get(x)||null,i,r,a,c,v)),!0;case"gotpointercapture":return x=v.pointerId,Xo.set(x,Wo(Xo.get(x)||null,i,r,a,c,v)),!0}return!1}function Rv(i){var r=Gs(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){i.blockedOn=r,qp(i.priority,function(){Av(a)});return}}else if(r===31){if(r=d(a),r!==null){i.blockedOn=r,qp(i.priority,function(){Av(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function zl(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=sf(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);sc=c,a.target.dispatchEvent(c),sc=null}else return r=Hs(a),r!==null&&Ev(r),i.blockedOn=a,!1;r.shift()}return!0}function Mv(i,r,a){zl(i)&&a.delete(r)}function cA(){of=!1,ji!==null&&zl(ji)&&(ji=null),Bi!==null&&zl(Bi)&&(Bi=null),Gi!==null&&zl(Gi)&&(Gi=null),Yo.forEach(Mv),Xo.forEach(Mv)}function Fl(i,r){i.blockedOn===r&&(i.blockedOn=null,of||(of=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,cA)))}var $l=null;function Iv(i){$l!==i&&($l=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){$l===i&&($l=null);for(var r=0;r<i.length;r+=3){var a=i[r],c=i[r+1],v=i[r+2];if(typeof c!="function"){if(rf(c||a)===null)continue;break}var x=Hs(a);x!==null&&(i.splice(r,3),r-=3,id(x,{pending:!0,data:v,method:a.method,action:c},c,v))}}))}function Tr(i){function r(M){return Fl(M,i)}ji!==null&&Fl(ji,i),Bi!==null&&Fl(Bi,i),Gi!==null&&Fl(Gi,i),Yo.forEach(r),Xo.forEach(r);for(var a=0;a<Hi.length;a++){var c=Hi[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<Hi.length&&(a=Hi[0],a.blockedOn===null);)Rv(a),a.blockedOn===null&&Hi.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var v=a[c],x=a[c+1],_=v[zt]||null;if(typeof x=="function")_||Iv(a);else if(_){var S=null;if(x&&x.hasAttribute("formAction")){if(v=x,_=x[zt]||null)S=_.formAction;else if(rf(v)!==null)continue}else S=_.action;typeof S=="function"?a[c+1]=S:(a.splice(c,3),c-=3),Iv(a)}}}function kv(){function i(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(_){return v=_})},focusReset:"manual",scroll:"manual"})}function r(){v!==null&&(v(),v=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,v=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),v!==null&&(v(),v=null)}}}function af(i){this._internalRoot=i}Jl.prototype.render=af.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,c=rn();Tv(a,c,i,r,null,null)},Jl.prototype.unmount=af.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;Tv(i.current,2,null,i,null,null),Cl(),r[Bs]=null}};function Jl(i){this._internalRoot=i}Jl.prototype.unstable_scheduleHydration=function(i){if(i){var r=Hp();i={blockedOn:null,target:i,priority:r};for(var a=0;a<Hi.length&&r!==0&&r<Hi[a].priority;a++);Hi.splice(a,0,i),a===0&&Rv(i)}};var Dv=e.version;if(Dv!=="19.2.3")throw Error(s(527,Dv,"19.2.3"));Q.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(r),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var dA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kl.isDisabled&&Kl.supportsFiber)try{Ve=Kl.inject(dA),De=Kl}catch{}}return Zo.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,c="",v=Bg,x=Gg,_=Hg;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(x=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=wv(i,1,!1,null,null,a,c,null,v,x,_,kv),i[Bs]=r.current,Gd(i),new af(r)},Zo.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var c=!1,v="",x=Bg,_=Gg,S=Hg,M=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(v=a.identifierPrefix),a.onUncaughtError!==void 0&&(x=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),r=wv(i,1,!0,r,a??null,c,v,M,x,_,S,kv),r.context=_v(null),a=r.current,c=rn(),c=Xu(c),v=Ci(c),v.callback=null,Ni(a,v,c),a=c,r.current.lanes=a,Zi(r,a),qn(r),i[Bs]=r.current,Gd(i),new Jl(r)},Zo.version="19.2.3",Zo}var qv;function wA(){if(qv)return cf.exports;qv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),cf.exports=bA(),cf.exports}var lw=wA();const _A=aw(lw),qh=B.createContext({});function zh(t){const e=B.useRef(null);return e.current===null&&(e.current=t()),e.current}const Fh=typeof window<"u",uw=Fh?B.useLayoutEffect:B.useEffect,ku=B.createContext(null);function $h(t,e){t.indexOf(e)===-1&&t.push(e)}function Jh(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const hi=(t,e,n)=>n>e?e:n<t?t:n;let Kh=()=>{};const pi={},cw=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function dw(t){return typeof t=="object"&&t!==null}const fw=t=>/^0[^.\s]+$/u.test(t);function Yh(t){let e;return()=>(e===void 0&&(e=t()),e)}const wn=t=>t,TA=(t,e)=>n=>e(t(n)),Aa=(...t)=>t.reduce(TA),ma=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class Xh{constructor(){this.subscriptions=[]}add(e){return $h(this.subscriptions,e),()=>Jh(this.subscriptions,e)}notify(e,n,s){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,s);else for(let l=0;l<o;l++){const u=this.subscriptions[l];u&&u(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const zn=t=>t*1e3,bn=t=>t/1e3;function hw(t,e){return e?t*(1e3/e):0}const pw=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,SA=1e-7,EA=12;function AA(t,e,n,s,o){let l,u,d=0;do u=e+(n-e)/2,l=pw(u,s,o)-t,l>0?n=u:e=u;while(Math.abs(l)>SA&&++d<EA);return u}function Ca(t,e,n,s){if(t===e&&n===s)return wn;const o=l=>AA(l,0,1,t,n);return l=>l===0||l===1?l:pw(o(l),e,s)}const mw=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,gw=t=>e=>1-t(1-e),yw=Ca(.33,1.53,.69,.99),Wh=gw(yw),vw=mw(Wh),xw=t=>(t*=2)<1?.5*Wh(t):.5*(2-Math.pow(2,-10*(t-1))),Qh=t=>1-Math.sin(Math.acos(t)),bw=gw(Qh),ww=mw(Qh),CA=Ca(.42,0,1,1),NA=Ca(0,0,.58,1),_w=Ca(.42,0,.58,1),RA=t=>Array.isArray(t)&&typeof t[0]!="number",Tw=t=>Array.isArray(t)&&typeof t[0]=="number",MA={linear:wn,easeIn:CA,easeInOut:_w,easeOut:NA,circIn:Qh,circInOut:ww,circOut:bw,backIn:Wh,backInOut:vw,backOut:yw,anticipate:xw},IA=t=>typeof t=="string",zv=t=>{if(Tw(t)){Kh(t.length===4);const[e,n,s,o]=t;return Ca(e,n,s,o)}else if(IA(t))return MA[t];return t},Yl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function kA(t,e){let n=new Set,s=new Set,o=!1,l=!1;const u=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function f(y){u.has(y)&&(p.schedule(y),t()),y(d)}const p={schedule:(y,b=!1,w=!1)=>{const E=w&&o?n:s;return b&&u.add(y),E.has(y)||E.add(y),y},cancel:y=>{s.delete(y),u.delete(y)},process:y=>{if(d=y,o){l=!0;return}o=!0,[n,s]=[s,n],n.forEach(f),n.clear(),o=!1,l&&(l=!1,p.process(y))}};return p}const DA=40;function Sw(t,e){let n=!1,s=!0;const o={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,u=Yl.reduce((N,I)=>(N[I]=kA(l),N),{}),{setup:d,read:f,resolveKeyframes:p,preUpdate:y,update:b,preRender:w,render:T,postRender:E}=u,A=()=>{const N=pi.useManualTiming?o.timestamp:performance.now();n=!1,pi.useManualTiming||(o.delta=s?1e3/60:Math.max(Math.min(N-o.timestamp,DA),1)),o.timestamp=N,o.isProcessing=!0,d.process(o),f.process(o),p.process(o),y.process(o),b.process(o),w.process(o),T.process(o),E.process(o),o.isProcessing=!1,n&&e&&(s=!1,t(A))},C=()=>{n=!0,s=!0,o.isProcessing||t(A)};return{schedule:Yl.reduce((N,I)=>{const L=u[I];return N[I]=(H,O=!1,W=!1)=>(n||C(),L.schedule(H,O,W)),N},{}),cancel:N=>{for(let I=0;I<Yl.length;I++)u[Yl[I]].cancel(N)},state:o,steps:u}}const{schedule:et,cancel:Ki,state:Pt,steps:pf}=Sw(typeof requestAnimationFrame<"u"?requestAnimationFrame:wn,!0);let cu;function PA(){cu=void 0}const Wt={now:()=>(cu===void 0&&Wt.set(Pt.isProcessing||pi.useManualTiming?Pt.timestamp:performance.now()),cu),set:t=>{cu=t,queueMicrotask(PA)}},Ew=t=>e=>typeof e=="string"&&e.startsWith(t),Aw=Ew("--"),UA=Ew("var(--"),Zh=t=>UA(t)?LA.test(t.split("/*")[0].trim()):!1,LA=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Wr={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ga={...Wr,transform:t=>hi(0,1,t)},Xl={...Wr,default:1},ua=t=>Math.round(t*1e5)/1e5,ep=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function OA(t){return t==null}const VA=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,tp=(t,e)=>n=>!!(typeof n=="string"&&VA.test(n)&&n.startsWith(t)||e&&!OA(n)&&Object.prototype.hasOwnProperty.call(n,e)),Cw=(t,e,n)=>s=>{if(typeof s!="string")return s;const[o,l,u,d]=s.match(ep);return{[t]:parseFloat(o),[e]:parseFloat(l),[n]:parseFloat(u),alpha:d!==void 0?parseFloat(d):1}},jA=t=>hi(0,255,t),mf={...Wr,transform:t=>Math.round(jA(t))},Cs={test:tp("rgb","red"),parse:Cw("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+mf.transform(t)+", "+mf.transform(e)+", "+mf.transform(n)+", "+ua(ga.transform(s))+")"};function BA(t){let e="",n="",s="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,s+=s,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:o?parseInt(o,16)/255:1}}const Jf={test:tp("#"),parse:BA,transform:Cs.transform},Na=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),zi=Na("deg"),Fn=Na("%"),pe=Na("px"),GA=Na("vh"),HA=Na("vw"),Fv={...Fn,parse:t=>Fn.parse(t)/100,transform:t=>Fn.transform(t*100)},Ur={test:tp("hsl","hue"),parse:Cw("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Fn.transform(ua(e))+", "+Fn.transform(ua(n))+", "+ua(ga.transform(s))+")"},vt={test:t=>Cs.test(t)||Jf.test(t)||Ur.test(t),parse:t=>Cs.test(t)?Cs.parse(t):Ur.test(t)?Ur.parse(t):Jf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Cs.transform(t):Ur.transform(t),getAnimatableNone:t=>{const e=vt.parse(t);return e.alpha=0,vt.transform(e)}},qA=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function zA(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(ep))==null?void 0:e.length)||0)+(((n=t.match(qA))==null?void 0:n.length)||0)>0}const Nw="number",Rw="color",FA="var",$A="var(",$v="${}",JA=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ya(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},o=[];let l=0;const d=e.replace(JA,f=>(vt.test(f)?(s.color.push(l),o.push(Rw),n.push(vt.parse(f))):f.startsWith($A)?(s.var.push(l),o.push(FA),n.push(f)):(s.number.push(l),o.push(Nw),n.push(parseFloat(f))),++l,$v)).split($v);return{values:n,split:d,indexes:s,types:o}}function Mw(t){return ya(t).values}function Iw(t){const{split:e,types:n}=ya(t),s=e.length;return o=>{let l="";for(let u=0;u<s;u++)if(l+=e[u],o[u]!==void 0){const d=n[u];d===Nw?l+=ua(o[u]):d===Rw?l+=vt.transform(o[u]):l+=o[u]}return l}}const KA=t=>typeof t=="number"?0:vt.test(t)?vt.getAnimatableNone(t):t;function YA(t){const e=Mw(t);return Iw(t)(e.map(KA))}const Yi={test:zA,parse:Mw,createTransformer:Iw,getAnimatableNone:YA};function gf(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function XA({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let o=0,l=0,u=0;if(!e)o=l=u=n;else{const d=n<.5?n*(1+e):n+e-n*e,f=2*n-d;o=gf(f,d,t+1/3),l=gf(f,d,t),u=gf(f,d,t-1/3)}return{red:Math.round(o*255),green:Math.round(l*255),blue:Math.round(u*255),alpha:s}}function yu(t,e){return n=>n>0?e:t}const it=(t,e,n)=>t+(e-t)*n,yf=(t,e,n)=>{const s=t*t,o=n*(e*e-s)+s;return o<0?0:Math.sqrt(o)},WA=[Jf,Cs,Ur],QA=t=>WA.find(e=>e.test(t));function Jv(t){const e=QA(t);if(!e)return!1;let n=e.parse(t);return e===Ur&&(n=XA(n)),n}const Kv=(t,e)=>{const n=Jv(t),s=Jv(e);if(!n||!s)return yu(t,e);const o={...n};return l=>(o.red=yf(n.red,s.red,l),o.green=yf(n.green,s.green,l),o.blue=yf(n.blue,s.blue,l),o.alpha=it(n.alpha,s.alpha,l),Cs.transform(o))},Kf=new Set(["none","hidden"]);function ZA(t,e){return Kf.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function eC(t,e){return n=>it(t,e,n)}function np(t){return typeof t=="number"?eC:typeof t=="string"?Zh(t)?yu:vt.test(t)?Kv:iC:Array.isArray(t)?kw:typeof t=="object"?vt.test(t)?Kv:tC:yu}function kw(t,e){const n=[...t],s=n.length,o=t.map((l,u)=>np(l)(l,e[u]));return l=>{for(let u=0;u<s;u++)n[u]=o[u](l);return n}}function tC(t,e){const n={...t,...e},s={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(s[o]=np(t[o])(t[o],e[o]));return o=>{for(const l in s)n[l]=s[l](o);return n}}function nC(t,e){const n=[],s={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],u=t.indexes[l][s[l]],d=t.values[u]??0;n[o]=d,s[l]++}return n}const iC=(t,e)=>{const n=Yi.createTransformer(e),s=ya(t),o=ya(e);return s.indexes.var.length===o.indexes.var.length&&s.indexes.color.length===o.indexes.color.length&&s.indexes.number.length>=o.indexes.number.length?Kf.has(t)&&!o.values.length||Kf.has(e)&&!s.values.length?ZA(t,e):Aa(kw(nC(s,o),o.values),n):yu(t,e)};function Dw(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?it(t,e,n):np(t)(t,e)}const sC=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>et.update(e,n),stop:()=>Ki(e),now:()=>Pt.isProcessing?Pt.timestamp:Wt.now()}},Pw=(t,e,n=10)=>{let s="";const o=Math.max(Math.round(e/n),2);for(let l=0;l<o;l++)s+=Math.round(t(l/(o-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},vu=2e4;function ip(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<vu;)e+=n,s=t.next(e);return e>=vu?1/0:e}function rC(t,e=100,n){const s=n({...t,keyframes:[0,e]}),o=Math.min(ip(s),vu);return{type:"keyframes",ease:l=>s.next(o*l).value/e,duration:bn(o)}}const oC=5;function Uw(t,e,n){const s=Math.max(e-oC,0);return hw(n-t(s),e-s)}const ut={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vf=.001;function aC({duration:t=ut.duration,bounce:e=ut.bounce,velocity:n=ut.velocity,mass:s=ut.mass}){let o,l,u=1-e;u=hi(ut.minDamping,ut.maxDamping,u),t=hi(ut.minDuration,ut.maxDuration,bn(t)),u<1?(o=p=>{const y=p*u,b=y*t,w=y-n,T=Yf(p,u),E=Math.exp(-b);return vf-w/T*E},l=p=>{const b=p*u*t,w=b*n+n,T=Math.pow(u,2)*Math.pow(p,2)*t,E=Math.exp(-b),A=Yf(Math.pow(p,2),u);return(-o(p)+vf>0?-1:1)*((w-T)*E)/A}):(o=p=>{const y=Math.exp(-p*t),b=(p-n)*t+1;return-vf+y*b},l=p=>{const y=Math.exp(-p*t),b=(n-p)*(t*t);return y*b});const d=5/t,f=uC(o,l,d);if(t=zn(t),isNaN(f))return{stiffness:ut.stiffness,damping:ut.damping,duration:t};{const p=Math.pow(f,2)*s;return{stiffness:p,damping:u*2*Math.sqrt(s*p),duration:t}}}const lC=12;function uC(t,e,n){let s=n;for(let o=1;o<lC;o++)s=s-t(s)/e(s);return s}function Yf(t,e){return t*Math.sqrt(1-e*e)}const cC=["duration","bounce"],dC=["stiffness","damping","mass"];function Yv(t,e){return e.some(n=>t[n]!==void 0)}function fC(t){let e={velocity:ut.velocity,stiffness:ut.stiffness,damping:ut.damping,mass:ut.mass,isResolvedFromDuration:!1,...t};if(!Yv(t,dC)&&Yv(t,cC))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),o=s*s,l=2*hi(.05,1,1-(t.bounce||0))*Math.sqrt(o);e={...e,mass:ut.mass,stiffness:o,damping:l}}else{const n=aC(t);e={...e,...n,mass:ut.mass},e.isResolvedFromDuration=!0}return e}function xu(t=ut.visualDuration,e=ut.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:o}=n;const l=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],d={done:!1,value:l},{stiffness:f,damping:p,mass:y,duration:b,velocity:w,isResolvedFromDuration:T}=fC({...n,velocity:-bn(n.velocity||0)}),E=w||0,A=p/(2*Math.sqrt(f*y)),C=u-l,R=bn(Math.sqrt(f/y)),k=Math.abs(C)<5;s||(s=k?ut.restSpeed.granular:ut.restSpeed.default),o||(o=k?ut.restDelta.granular:ut.restDelta.default);let N;if(A<1){const L=Yf(R,A);N=H=>{const O=Math.exp(-A*R*H);return u-O*((E+A*R*C)/L*Math.sin(L*H)+C*Math.cos(L*H))}}else if(A===1)N=L=>u-Math.exp(-R*L)*(C+(E+R*C)*L);else{const L=R*Math.sqrt(A*A-1);N=H=>{const O=Math.exp(-A*R*H),W=Math.min(L*H,300);return u-O*((E+A*R*C)*Math.sinh(W)+L*C*Math.cosh(W))/L}}const I={calculatedDuration:T&&b||null,next:L=>{const H=N(L);if(T)d.done=L>=b;else{let O=L===0?E:0;A<1&&(O=L===0?zn(E):Uw(N,L,H));const W=Math.abs(O)<=s,J=Math.abs(u-H)<=o;d.done=W&&J}return d.value=d.done?u:H,d},toString:()=>{const L=Math.min(ip(I),vu),H=Pw(O=>I.next(L*O).value,L,30);return L+"ms "+H},toTransition:()=>{}};return I}xu.applyToOptions=t=>{const e=rC(t,100,xu);return t.ease=e.ease,t.duration=zn(e.duration),t.type="keyframes",t};function Xf({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:o=10,bounceStiffness:l=500,modifyTarget:u,min:d,max:f,restDelta:p=.5,restSpeed:y}){const b=t[0],w={done:!1,value:b},T=W=>d!==void 0&&W<d||f!==void 0&&W>f,E=W=>d===void 0?f:f===void 0||Math.abs(d-W)<Math.abs(f-W)?d:f;let A=n*e;const C=b+A,R=u===void 0?C:u(C);R!==C&&(A=R-b);const k=W=>-A*Math.exp(-W/s),N=W=>R+k(W),I=W=>{const J=k(W),ie=N(W);w.done=Math.abs(J)<=p,w.value=w.done?R:ie};let L,H;const O=W=>{T(w.value)&&(L=W,H=xu({keyframes:[w.value,E(w.value)],velocity:Uw(N,W,w.value),damping:o,stiffness:l,restDelta:p,restSpeed:y}))};return O(0),{calculatedDuration:null,next:W=>{let J=!1;return!H&&L===void 0&&(J=!0,I(W),O(W)),L!==void 0&&W>=L?H.next(W-L):(!J&&I(W),w)}}}function hC(t,e,n){const s=[],o=n||pi.mix||Dw,l=t.length-1;for(let u=0;u<l;u++){let d=o(t[u],t[u+1]);if(e){const f=Array.isArray(e)?e[u]||wn:e;d=Aa(f,d)}s.push(d)}return s}function pC(t,e,{clamp:n=!0,ease:s,mixer:o}={}){const l=t.length;if(Kh(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=hC(e,s,o),f=d.length,p=y=>{if(u&&y<t[0])return e[0];let b=0;if(f>1)for(;b<t.length-2&&!(y<t[b+1]);b++);const w=ma(t[b],t[b+1],y);return d[b](w)};return n?y=>p(hi(t[0],t[l-1],y)):p}function mC(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const o=ma(0,e,s);t.push(it(n,1,o))}}function gC(t){const e=[0];return mC(e,t.length-1),e}function yC(t,e){return t.map(n=>n*e)}function vC(t,e){return t.map(()=>e||_w).splice(0,t.length-1)}function ca({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const o=RA(s)?s.map(zv):zv(s),l={done:!1,value:e[0]},u=yC(n&&n.length===e.length?n:gC(e),t),d=pC(u,e,{ease:Array.isArray(o)?o:vC(e,o)});return{calculatedDuration:t,next:f=>(l.value=d(f),l.done=f>=t,l)}}const xC=t=>t!==null;function sp(t,{repeat:e,repeatType:n="loop"},s,o=1){const l=t.filter(xC),d=o<0||e&&n!=="loop"&&e%2===1?0:l.length-1;return!d||s===void 0?l[d]:s}const bC={decay:Xf,inertia:Xf,tween:ca,keyframes:ca,spring:xu};function Lw(t){typeof t.type=="string"&&(t.type=bC[t.type])}class rp{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const wC=t=>t/100;class op extends rp{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,o;const{motionValue:n}=this.options;n&&n.updatedAt!==Wt.now()&&this.tick(Wt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(s=this.options).onStop)==null||o.call(s))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Lw(e);const{type:n=ca,repeat:s=0,repeatDelay:o=0,repeatType:l,velocity:u=0}=e;let{keyframes:d}=e;const f=n||ca;f!==ca&&typeof d[0]!="number"&&(this.mixKeyframes=Aa(wC,Dw(d[0],d[1])),d=[0,100]);const p=f({...e,keyframes:d});l==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...d].reverse(),velocity:-u})),p.calculatedDuration===null&&(p.calculatedDuration=ip(p));const{calculatedDuration:y}=p;this.calculatedDuration=y,this.resolvedDuration=y+o,this.totalDuration=this.resolvedDuration*(s+1)-o,this.generator=p}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:o,mixKeyframes:l,mirroredGenerator:u,resolvedDuration:d,calculatedDuration:f}=this;if(this.startTime===null)return s.next(0);const{delay:p=0,keyframes:y,repeat:b,repeatType:w,repeatDelay:T,type:E,onUpdate:A,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const R=this.currentTime-p*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?R<0:R>o;this.currentTime=Math.max(R,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let N=this.currentTime,I=s;if(b){const W=Math.min(this.currentTime,o)/d;let J=Math.floor(W),ie=W%1;!ie&&W>=1&&(ie=1),ie===1&&J--,J=Math.min(J,b+1),!!(J%2)&&(w==="reverse"?(ie=1-ie,T&&(ie-=T/d)):w==="mirror"&&(I=u)),N=hi(0,1,ie)*d}const L=k?{done:!1,value:y[0]}:I.next(N);l&&(L.value=l(L.value));let{done:H}=L;!k&&f!==null&&(H=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return O&&E!==Xf&&(L.value=sp(y,this.options,C,this.speed)),A&&A(L.value),O&&this.finish(),L}then(e,n){return this.finished.then(e,n)}get duration(){return bn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+bn(e)}get time(){return bn(this.currentTime)}set time(e){var n;e=zn(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Wt.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=bn(this.currentTime))}play(){var o,l;if(this.isStopped)return;const{driver:e=sC,startTime:n}=this.options;this.driver||(this.driver=e(u=>this.tick(u))),(l=(o=this.options).onPlay)==null||l.call(o);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Wt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function _C(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ns=t=>t*180/Math.PI,Wf=t=>{const e=Ns(Math.atan2(t[1],t[0]));return Qf(e)},TC={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Wf,rotateZ:Wf,skewX:t=>Ns(Math.atan(t[1])),skewY:t=>Ns(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Qf=t=>(t=t%360,t<0&&(t+=360),t),Xv=Wf,Wv=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Qv=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),SC={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Wv,scaleY:Qv,scale:t=>(Wv(t)+Qv(t))/2,rotateX:t=>Qf(Ns(Math.atan2(t[6],t[5]))),rotateY:t=>Qf(Ns(Math.atan2(-t[2],t[0]))),rotateZ:Xv,rotate:Xv,skewX:t=>Ns(Math.atan(t[4])),skewY:t=>Ns(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Zf(t){return t.includes("scale")?1:0}function eh(t,e){if(!t||t==="none")return Zf(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,o;if(n)s=SC,o=n;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=TC,o=d}if(!o)return Zf(e);const l=s[e],u=o[1].split(",").map(AC);return typeof l=="function"?l(u):u[l]}const EC=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return eh(n,e)};function AC(t){return parseFloat(t.trim())}const Qr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zr=new Set(Qr),Zv=t=>t===Wr||t===pe,CC=new Set(["x","y","z"]),NC=Qr.filter(t=>!CC.has(t));function RC(t){const e=[];return NC.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const Ms={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>eh(e,"x"),y:(t,{transform:e})=>eh(e,"y")};Ms.translateX=Ms.x;Ms.translateY=Ms.y;const Is=new Set;let th=!1,nh=!1,ih=!1;function Ow(){if(nh){const t=Array.from(Is).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const o=RC(s);o.length&&(n.set(s,o),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const o=n.get(s);o&&o.forEach(([l,u])=>{var d;(d=s.getValue(l))==null||d.set(u)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}nh=!1,th=!1,Is.forEach(t=>t.complete(ih)),Is.clear()}function Vw(){Is.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(nh=!0)})}function MC(){ih=!0,Vw(),Ow(),ih=!1}class ap{constructor(e,n,s,o,l,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=o,this.element=l,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(Is.add(this),th||(th=!0,et.read(Vw),et.resolveKeyframes(Ow))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:o}=this;if(e[0]===null){const l=o==null?void 0:o.get(),u=e[e.length-1];if(l!==void 0)e[0]=l;else if(s&&n){const d=s.readValue(n,u);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=u),o&&l===void 0&&o.set(e[0])}_C(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Is.delete(this)}cancel(){this.state==="scheduled"&&(Is.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const IC=t=>t.startsWith("--");function kC(t,e,n){IC(e)?t.style.setProperty(e,n):t.style[e]=n}const DC=Yh(()=>window.ScrollTimeline!==void 0),PC={};function UC(t,e){const n=Yh(t);return()=>PC[e]??n()}const jw=UC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ra=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,e0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ra([0,.65,.55,1]),circOut:ra([.55,0,1,.45]),backIn:ra([.31,.01,.66,-.59]),backOut:ra([.33,1.53,.69,.99])};function Bw(t,e){if(t)return typeof t=="function"?jw()?Pw(t,e):"ease-out":Tw(t)?ra(t):Array.isArray(t)?t.map(n=>Bw(n,e)||e0.easeOut):e0[t]}function LC(t,e,n,{delay:s=0,duration:o=300,repeat:l=0,repeatType:u="loop",ease:d="easeOut",times:f}={},p=void 0){const y={[e]:n};f&&(y.offset=f);const b=Bw(d,o);Array.isArray(b)&&(y.easing=b);const w={delay:s,duration:o,easing:Array.isArray(b)?"linear":b,fill:"both",iterations:l+1,direction:u==="reverse"?"alternate":"normal"};return p&&(w.pseudoElement=p),t.animate(y,w)}function Gw(t){return typeof t=="function"&&"applyToOptions"in t}function OC({type:t,...e}){return Gw(t)&&jw()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class VC extends rp{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:o,pseudoElement:l,allowFlatten:u=!1,finalKeyframe:d,onComplete:f}=e;this.isPseudoElement=!!l,this.allowFlatten=u,this.options=e,Kh(typeof e.type!="string");const p=OC(e);this.animation=LC(n,s,o,p,l),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const y=sp(o,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(y):kC(n,s,y),this.animation.cancel()}f==null||f(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,s;const e=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return bn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+bn(e)}get time(){return bn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=zn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&DC()?(this.animation.timeline=e,wn):n(this)}}const Hw={anticipate:xw,backInOut:vw,circInOut:ww};function jC(t){return t in Hw}function BC(t){typeof t.ease=="string"&&jC(t.ease)&&(t.ease=Hw[t.ease])}const t0=10;class GC extends VC{constructor(e){BC(e),Lw(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:o,element:l,...u}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const d=new op({...u,autoplay:!1}),f=zn(this.finishedTime??this.time);n.setWithVelocity(d.sample(f-t0).value,d.sample(f).value,t0),d.stop()}}const n0=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Yi.test(t)||t==="0")&&!t.startsWith("url("));function HC(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function qC(t,e,n,s){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],u=n0(o,e),d=n0(l,e);return!u||!d?!1:HC(t)||(n==="spring"||Gw(n))&&s}function sh(t){t.duration=0,t.type="keyframes"}const zC=new Set(["opacity","clipPath","filter","transform"]),FC=Yh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function $C(t){var y;const{motionValue:e,name:n,repeatDelay:s,repeatType:o,damping:l,type:u}=t;if(!(((y=e==null?void 0:e.owner)==null?void 0:y.current)instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:p}=e.owner.getProps();return FC()&&n&&zC.has(n)&&(n!=="transform"||!p)&&!f&&!s&&o!=="mirror"&&l!==0&&u!=="inertia"}const JC=40;class KC extends rp{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:o=0,repeatDelay:l=0,repeatType:u="loop",keyframes:d,name:f,motionValue:p,element:y,...b}){var E;super(),this.stop=()=>{var A,C;this._animation&&(this._animation.stop(),(A=this.stopTimeline)==null||A.call(this)),(C=this.keyframeResolver)==null||C.cancel()},this.createdAt=Wt.now();const w={autoplay:e,delay:n,type:s,repeat:o,repeatDelay:l,repeatType:u,name:f,motionValue:p,element:y,...b},T=(y==null?void 0:y.KeyframeResolver)||ap;this.keyframeResolver=new T(d,(A,C,R)=>this.onKeyframesResolved(A,C,w,!R),f,p,y),(E=this.keyframeResolver)==null||E.scheduleResolve()}onKeyframesResolved(e,n,s,o){this.keyframeResolver=void 0;const{name:l,type:u,velocity:d,delay:f,isHandoff:p,onUpdate:y}=s;this.resolvedAt=Wt.now(),qC(e,l,u,d)||((pi.instantAnimations||!f)&&(y==null||y(sp(e,s,n))),e[0]=e[e.length-1],sh(s),s.repeat=0);const w={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>JC?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},T=!p&&$C(w)?new GC({...w,element:w.motionValue.owner.current}):new op(w);T.finished.then(()=>this.notifyFinished()).catch(wn),this.pendingTimeline&&(this.stopTimeline=T.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=T}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),MC()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const YC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function XC(t){const e=YC.exec(t);if(!e)return[,];const[,n,s,o]=e;return[`--${n??s}`,o]}function qw(t,e,n=1){const[s,o]=XC(t);if(!s)return;const l=window.getComputedStyle(e).getPropertyValue(s);if(l){const u=l.trim();return cw(u)?parseFloat(u):u}return Zh(o)?qw(o,e,n+1):o}function lp(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const zw=new Set(["width","height","top","left","right","bottom",...Qr]),WC={test:t=>t==="auto",parse:t=>t},Fw=t=>e=>e.test(t),$w=[Wr,pe,Fn,zi,HA,GA,WC],i0=t=>$w.find(Fw(t));function QC(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||fw(t):!0}const ZC=new Set(["brightness","contrast","saturate","opacity"]);function eN(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(ep)||[];if(!s)return t;const o=n.replace(s,"");let l=ZC.has(e)?1:0;return s!==n&&(l*=100),e+"("+l+o+")"}const tN=/\b([a-z-]*)\(.*?\)/gu,rh={...Yi,getAnimatableNone:t=>{const e=t.match(tN);return e?e.map(eN).join(" "):t}},s0={...Wr,transform:Math.round},nN={rotate:zi,rotateX:zi,rotateY:zi,rotateZ:zi,scale:Xl,scaleX:Xl,scaleY:Xl,scaleZ:Xl,skew:zi,skewX:zi,skewY:zi,distance:pe,translateX:pe,translateY:pe,translateZ:pe,x:pe,y:pe,z:pe,perspective:pe,transformPerspective:pe,opacity:ga,originX:Fv,originY:Fv,originZ:pe},up={borderWidth:pe,borderTopWidth:pe,borderRightWidth:pe,borderBottomWidth:pe,borderLeftWidth:pe,borderRadius:pe,radius:pe,borderTopLeftRadius:pe,borderTopRightRadius:pe,borderBottomRightRadius:pe,borderBottomLeftRadius:pe,width:pe,maxWidth:pe,height:pe,maxHeight:pe,top:pe,right:pe,bottom:pe,left:pe,padding:pe,paddingTop:pe,paddingRight:pe,paddingBottom:pe,paddingLeft:pe,margin:pe,marginTop:pe,marginRight:pe,marginBottom:pe,marginLeft:pe,backgroundPositionX:pe,backgroundPositionY:pe,...nN,zIndex:s0,fillOpacity:ga,strokeOpacity:ga,numOctaves:s0},iN={...up,color:vt,backgroundColor:vt,outlineColor:vt,fill:vt,stroke:vt,borderColor:vt,borderTopColor:vt,borderRightColor:vt,borderBottomColor:vt,borderLeftColor:vt,filter:rh,WebkitFilter:rh},Jw=t=>iN[t];function Kw(t,e){let n=Jw(t);return n!==rh&&(n=Yi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const sN=new Set(["auto","none","0"]);function rN(t,e,n){let s=0,o;for(;s<t.length&&!o;){const l=t[s];typeof l=="string"&&!sN.has(l)&&ya(l).values.length&&(o=t[s]),s++}if(o&&n)for(const l of e)t[l]=Kw(n,o)}class oN extends ap{constructor(e,n,s,o,l){super(e,n,s,o,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let p=e[f];if(typeof p=="string"&&(p=p.trim(),Zh(p))){const y=qw(p,n.current);y!==void 0&&(e[f]=y),f===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!zw.has(s)||e.length!==2)return;const[o,l]=e,u=i0(o),d=i0(l);if(u!==d)if(Zv(u)&&Zv(d))for(let f=0;f<e.length;f++){const p=e[f];typeof p=="string"&&(e[f]=parseFloat(p))}else Ms[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let o=0;o<e.length;o++)(e[o]===null||QC(e[o]))&&s.push(o);s.length&&rN(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ms[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&e.getValue(s,o).jump(o,!1)}measureEndState(){var d;const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const o=e.getValue(n);o&&o.jump(this.measuredOrigin,!1);const l=s.length-1,u=s[l];s[l]=Ms[n](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(d=this.removedTransforms)!=null&&d.length&&this.removedTransforms.forEach(([f,p])=>{e.getValue(f).set(p)}),this.resolveNoneKeyframes()}}function aN(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const o=(n==null?void 0:n[t])??s.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}const Yw=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Xw(t){return dw(t)&&"offsetHeight"in t}const r0=30,lN=t=>!isNaN(parseFloat(t));class uN{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{var l;const o=Wt.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Wt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=lN(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Xh);const s=this.events[e].add(n);return e==="change"?()=>{s(),et.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Wt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>r0)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,r0);return hw(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Yr(t,e){return new uN(t,e)}const{schedule:cp}=Sw(queueMicrotask,!1),kn={x:!1,y:!1};function Ww(){return kn.x||kn.y}function cN(t){return t==="x"||t==="y"?kn[t]?null:(kn[t]=!0,()=>{kn[t]=!1}):kn.x||kn.y?null:(kn.x=kn.y=!0,()=>{kn.x=kn.y=!1})}function Qw(t,e){const n=aN(t),s=new AbortController,o={passive:!0,...e,signal:s.signal};return[n,o,()=>s.abort()]}function o0(t){return!(t.pointerType==="touch"||Ww())}function dN(t,e,n={}){const[s,o,l]=Qw(t,n),u=d=>{if(!o0(d))return;const{target:f}=d,p=e(f,d);if(typeof p!="function"||!f)return;const y=b=>{o0(b)&&(p(b),f.removeEventListener("pointerleave",y))};f.addEventListener("pointerleave",y,o)};return s.forEach(d=>{d.addEventListener("pointerenter",u,o)}),l}const Zw=(t,e)=>e?t===e?!0:Zw(t,e.parentElement):!1,dp=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,fN=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function hN(t){return fN.has(t.tagName)||t.tabIndex!==-1}const du=new WeakSet;function a0(t){return e=>{e.key==="Enter"&&t(e)}}function xf(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const pN=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=a0(()=>{if(du.has(n))return;xf(n,"down");const o=a0(()=>{xf(n,"up")}),l=()=>xf(n,"cancel");n.addEventListener("keyup",o,e),n.addEventListener("blur",l,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function l0(t){return dp(t)&&!Ww()}function mN(t,e,n={}){const[s,o,l]=Qw(t,n),u=d=>{const f=d.currentTarget;if(!l0(d))return;du.add(f);const p=e(f,d),y=(T,E)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",w),du.has(f)&&du.delete(f),l0(T)&&typeof p=="function"&&p(T,{success:E})},b=T=>{y(T,f===window||f===document||n.useGlobalTarget||Zw(f,T.target))},w=T=>{y(T,!1)};window.addEventListener("pointerup",b,o),window.addEventListener("pointercancel",w,o)};return s.forEach(d=>{(n.useGlobalTarget?window:d).addEventListener("pointerdown",u,o),Xw(d)&&(d.addEventListener("focus",p=>pN(p,o)),!hN(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),l}function e_(t){return dw(t)&&"ownerSVGElement"in t}function gN(t){return e_(t)&&t.tagName==="svg"}const Ot=t=>!!(t&&t.getVelocity),yN=[...$w,vt,Yi],vN=t=>yN.find(Fw(t)),fp=B.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function u0(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function xN(...t){return e=>{let n=!1;const s=t.map(o=>{const l=u0(o,e);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let o=0;o<s.length;o++){const l=s[o];typeof l=="function"?l():u0(t[o],null)}}}}function bN(...t){return B.useCallback(xN(...t),t)}class wN extends B.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,o=Xw(s)&&s.offsetWidth||0,l=this.props.sizeRef.current;l.height=n.offsetHeight||0,l.width=n.offsetWidth||0,l.top=n.offsetTop,l.left=n.offsetLeft,l.right=o-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function _N({children:t,isPresent:e,anchorX:n,root:s}){const o=B.useId(),l=B.useRef(null),u=B.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=B.useContext(fp),f=bN(l,t==null?void 0:t.ref);return B.useInsertionEffect(()=>{const{width:p,height:y,top:b,left:w,right:T}=u.current;if(e||!l.current||!p||!y)return;const E=n==="left"?`left: ${w}`:`right: ${T}`;l.current.dataset.motionPopId=o;const A=document.createElement("style");d&&(A.nonce=d);const C=s??document.head;return C.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${y}px !important;
            ${E}px !important;
            top: ${b}px !important;
          }
        `),()=>{C.contains(A)&&C.removeChild(A)}},[e]),g.jsx(wN,{isPresent:e,childRef:l,sizeRef:u,children:B.cloneElement(t,{ref:f})})}const TN=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:o,presenceAffectsLayout:l,mode:u,anchorX:d,root:f})=>{const p=zh(SN),y=B.useId();let b=!0,w=B.useMemo(()=>(b=!1,{id:y,initial:e,isPresent:n,custom:o,onExitComplete:T=>{p.set(T,!0);for(const E of p.values())if(!E)return;s&&s()},register:T=>(p.set(T,!1),()=>p.delete(T))}),[n,p,s]);return l&&b&&(w={...w}),B.useMemo(()=>{p.forEach((T,E)=>p.set(E,!1))},[n]),B.useEffect(()=>{!n&&!p.size&&s&&s()},[n]),u==="popLayout"&&(t=g.jsx(_N,{isPresent:n,anchorX:d,root:f,children:t})),g.jsx(ku.Provider,{value:w,children:t})};function SN(){return new Map}function t_(t=!0){const e=B.useContext(ku);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:o}=e,l=B.useId();B.useEffect(()=>{if(t)return o(l)},[t]);const u=B.useCallback(()=>t&&s&&s(l),[l,s,t]);return!n&&s?[!1,u]:[!0]}const Wl=t=>t.key||"";function c0(t){const e=[];return B.Children.forEach(t,n=>{B.isValidElement(n)&&e.push(n)}),e}const Ji=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:o=!0,mode:l="sync",propagate:u=!1,anchorX:d="left",root:f})=>{const[p,y]=t_(u),b=B.useMemo(()=>c0(t),[t]),w=u&&!p?[]:b.map(Wl),T=B.useRef(!0),E=B.useRef(b),A=zh(()=>new Map),[C,R]=B.useState(b),[k,N]=B.useState(b);uw(()=>{T.current=!1,E.current=b;for(let H=0;H<k.length;H++){const O=Wl(k[H]);w.includes(O)?A.delete(O):A.get(O)!==!0&&A.set(O,!1)}},[k,w.length,w.join("-")]);const I=[];if(b!==C){let H=[...b];for(let O=0;O<k.length;O++){const W=k[O],J=Wl(W);w.includes(J)||(H.splice(O,0,W),I.push(W))}return l==="wait"&&I.length&&(H=I),N(c0(H)),R(b),null}const{forceRender:L}=B.useContext(qh);return g.jsx(g.Fragment,{children:k.map(H=>{const O=Wl(H),W=u&&!p?!1:b===k||w.includes(O),J=()=>{if(A.has(O))A.set(O,!0);else return;let ie=!0;A.forEach(Z=>{Z||(ie=!1)}),ie&&(L==null||L(),N(E.current),u&&(y==null||y()),s&&s())};return g.jsx(TN,{isPresent:W,initial:!T.current||n?void 0:!1,custom:e,presenceAffectsLayout:o,mode:l,root:f,onExitComplete:W?void 0:J,anchorX:d,children:H},O)})})},n_=B.createContext({strict:!1}),d0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xr={};for(const t in d0)Xr[t]={isEnabled:e=>d0[t].some(n=>!!e[n])};function EN(t){for(const e in t)Xr[e]={...Xr[e],...t[e]}}const AN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bu(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||AN.has(t)}let i_=t=>!bu(t);function CN(t){typeof t=="function"&&(i_=e=>e.startsWith("on")?!bu(e):t(e))}try{CN(require("@emotion/is-prop-valid").default)}catch{}function NN(t,e,n){const s={};for(const o in t)o==="values"&&typeof t.values=="object"||(i_(o)||n===!0&&bu(o)||!e&&!bu(o)||t.draggable&&o.startsWith("onDrag"))&&(s[o]=t[o]);return s}const Du=B.createContext({});function Pu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function va(t){return typeof t=="string"||Array.isArray(t)}const hp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pp=["initial",...hp];function Uu(t){return Pu(t.animate)||pp.some(e=>va(t[e]))}function s_(t){return!!(Uu(t)||t.variants)}function RN(t,e){if(Uu(t)){const{initial:n,animate:s}=t;return{initial:n===!1||va(n)?n:void 0,animate:va(s)?s:void 0}}return t.inherit!==!1?e:{}}function MN(t){const{initial:e,animate:n}=RN(t,B.useContext(Du));return B.useMemo(()=>({initial:e,animate:n}),[f0(e),f0(n)])}function f0(t){return Array.isArray(t)?t.join(" "):t}function h0(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ea={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(pe.test(t))t=parseFloat(t);else return t;const n=h0(t,e.target.x),s=h0(t,e.target.y);return`${n}% ${s}%`}},IN={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,o=Yi.parse(t);if(o.length>5)return s;const l=Yi.createTransformer(t),u=typeof o[0]!="number"?1:0,d=n.x.scale*e.x,f=n.y.scale*e.y;o[0+u]/=d,o[1+u]/=f;const p=it(d,f,.5);return typeof o[2+u]=="number"&&(o[2+u]/=p),typeof o[3+u]=="number"&&(o[3+u]/=p),l(o)}},oh={borderRadius:{...ea,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ea,borderTopRightRadius:ea,borderBottomLeftRadius:ea,borderBottomRightRadius:ea,boxShadow:IN};function r_(t,{layout:e,layoutId:n}){return Zr.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!oh[t]||t==="opacity")}const kN={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},DN=Qr.length;function PN(t,e,n){let s="",o=!0;for(let l=0;l<DN;l++){const u=Qr[l],d=t[u];if(d===void 0)continue;let f=!0;if(typeof d=="number"?f=d===(u.startsWith("scale")?1:0):f=parseFloat(d)===0,!f||n){const p=Yw(d,up[u]);if(!f){o=!1;const y=kN[u]||u;s+=`${y}(${p}) `}n&&(e[u]=p)}}return s=s.trim(),n?s=n(e,o?"":s):o&&(s="none"),s}function mp(t,e,n){const{style:s,vars:o,transformOrigin:l}=t;let u=!1,d=!1;for(const f in e){const p=e[f];if(Zr.has(f)){u=!0;continue}else if(Aw(f)){o[f]=p;continue}else{const y=Yw(p,up[f]);f.startsWith("origin")?(d=!0,l[f]=y):s[f]=y}}if(e.transform||(u||n?s.transform=PN(e,t.transform,n):s.transform&&(s.transform="none")),d){const{originX:f="50%",originY:p="50%",originZ:y=0}=l;s.transformOrigin=`${f} ${p} ${y}`}}const gp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function o_(t,e,n){for(const s in e)!Ot(e[s])&&!r_(s,n)&&(t[s]=e[s])}function UN({transformTemplate:t},e){return B.useMemo(()=>{const n=gp();return mp(n,e,t),Object.assign({},n.vars,n.style)},[e])}function LN(t,e){const n=t.style||{},s={};return o_(s,n,t),Object.assign(s,UN(t,e)),s}function ON(t,e){const n={},s=LN(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const VN={offset:"stroke-dashoffset",array:"stroke-dasharray"},jN={offset:"strokeDashoffset",array:"strokeDasharray"};function BN(t,e,n=1,s=0,o=!0){t.pathLength=1;const l=o?VN:jN;t[l.offset]=pe.transform(-s);const u=pe.transform(e),d=pe.transform(n);t[l.array]=`${u} ${d}`}function a_(t,{attrX:e,attrY:n,attrScale:s,pathLength:o,pathSpacing:l=1,pathOffset:u=0,...d},f,p,y){if(mp(t,d,p),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:b,style:w}=t;b.transform&&(w.transform=b.transform,delete b.transform),(w.transform||b.transformOrigin)&&(w.transformOrigin=b.transformOrigin??"50% 50%",delete b.transformOrigin),w.transform&&(w.transformBox=(y==null?void 0:y.transformBox)??"fill-box",delete b.transformBox),e!==void 0&&(b.x=e),n!==void 0&&(b.y=n),s!==void 0&&(b.scale=s),o!==void 0&&BN(b,o,l,u,!1)}const l_=()=>({...gp(),attrs:{}}),u_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function GN(t,e,n,s){const o=B.useMemo(()=>{const l=l_();return a_(l,e,u_(s),t.transformTemplate,t.style),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};o_(l,t.style,t),o.style={...l,...o.style}}return o}const HN=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function yp(t){return typeof t!="string"||t.includes("-")?!1:!!(HN.indexOf(t)>-1||/[A-Z]/u.test(t))}function qN(t,e,n,{latestValues:s},o,l=!1){const d=(yp(t)?GN:ON)(e,s,o,t),f=NN(e,typeof t=="string",l),p=t!==B.Fragment?{...f,...d,ref:n}:{},{children:y}=e,b=B.useMemo(()=>Ot(y)?y.get():y,[y]);return B.createElement(t,{...p,children:b})}function p0(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function vp(t,e,n,s){if(typeof e=="function"){const[o,l]=p0(s);e=e(n!==void 0?n:t.custom,o,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[o,l]=p0(s);e=e(n!==void 0?n:t.custom,o,l)}return e}function fu(t){return Ot(t)?t.get():t}function zN({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,o){return{latestValues:FN(n,s,o,t),renderState:e()}}function FN(t,e,n,s){const o={},l=s(t,{});for(const w in l)o[w]=fu(l[w]);let{initial:u,animate:d}=t;const f=Uu(t),p=s_(t);e&&p&&!f&&t.inherit!==!1&&(u===void 0&&(u=e.initial),d===void 0&&(d=e.animate));let y=n?n.initial===!1:!1;y=y||u===!1;const b=y?d:u;if(b&&typeof b!="boolean"&&!Pu(b)){const w=Array.isArray(b)?b:[b];for(let T=0;T<w.length;T++){const E=vp(t,w[T]);if(E){const{transitionEnd:A,transition:C,...R}=E;for(const k in R){let N=R[k];if(Array.isArray(N)){const I=y?N.length-1:0;N=N[I]}N!==null&&(o[k]=N)}for(const k in A)o[k]=A[k]}}}return o}const c_=t=>(e,n)=>{const s=B.useContext(Du),o=B.useContext(ku),l=()=>zN(t,e,s,o);return n?l():zh(l)};function xp(t,e,n){var l;const{style:s}=t,o={};for(const u in s)(Ot(s[u])||e.style&&Ot(e.style[u])||r_(u,t)||((l=n==null?void 0:n.getValue(u))==null?void 0:l.liveStyle)!==void 0)&&(o[u]=s[u]);return o}const $N=c_({scrapeMotionValuesFromProps:xp,createRenderState:gp});function d_(t,e,n){const s=xp(t,e,n);for(const o in t)if(Ot(t[o])||Ot(e[o])){const l=Qr.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;s[l]=t[o]}return s}const JN=c_({scrapeMotionValuesFromProps:d_,createRenderState:l_}),KN=Symbol.for("motionComponentSymbol");function Lr(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function YN(t,e,n){return B.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):Lr(n)&&(n.current=s))},[e])}const bp=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),XN="framerAppearId",f_="data-"+bp(XN),h_=B.createContext({});function WN(t,e,n,s,o){var A,C;const{visualElement:l}=B.useContext(Du),u=B.useContext(n_),d=B.useContext(ku),f=B.useContext(fp).reducedMotion,p=B.useRef(null);s=s||u.renderer,!p.current&&s&&(p.current=s(t,{visualState:e,parent:l,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:f}));const y=p.current,b=B.useContext(h_);y&&!y.projection&&o&&(y.type==="html"||y.type==="svg")&&QN(p.current,n,o,b);const w=B.useRef(!1);B.useInsertionEffect(()=>{y&&w.current&&y.update(n,d)});const T=n[f_],E=B.useRef(!!T&&!((A=window.MotionHandoffIsComplete)!=null&&A.call(window,T))&&((C=window.MotionHasOptimisedAnimation)==null?void 0:C.call(window,T)));return uw(()=>{y&&(w.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),E.current&&y.animationState&&y.animationState.animateChanges())}),B.useEffect(()=>{y&&(!E.current&&y.animationState&&y.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var R;(R=window.MotionHandoffMarkAsComplete)==null||R.call(window,T)}),E.current=!1),y.enteringChildren=void 0)}),y}function QN(t,e,n,s){const{layoutId:o,layout:l,drag:u,dragConstraints:d,layoutScroll:f,layoutRoot:p,layoutCrossfade:y}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:p_(t.parent)),t.projection.setOptions({layoutId:o,layout:l,alwaysMeasureLayout:!!u||d&&Lr(d),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:s,crossfade:y,layoutScroll:f,layoutRoot:p})}function p_(t){if(t)return t.options.allowProjection!==!1?t.projection:p_(t.parent)}function bf(t,{forwardMotionProps:e=!1}={},n,s){n&&EN(n);const o=yp(t)?JN:$N;function l(d,f){let p;const y={...B.useContext(fp),...d,layoutId:ZN(d)},{isStatic:b}=y,w=MN(d),T=o(d,b);if(!b&&Fh){e1();const E=t1(y);p=E.MeasureLayout,w.visualElement=WN(t,T,y,s,E.ProjectionNode)}return g.jsxs(Du.Provider,{value:w,children:[p&&w.visualElement?g.jsx(p,{visualElement:w.visualElement,...y}):null,qN(t,d,YN(T,w.visualElement,f),T,b,e)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=B.forwardRef(l);return u[KN]=t,u}function ZN({layoutId:t}){const e=B.useContext(qh).id;return e&&t!==void 0?e+"-"+t:t}function e1(t,e){B.useContext(n_).strict}function t1(t){const{drag:e,layout:n}=Xr;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function n1(t,e){if(typeof Proxy>"u")return bf;const n=new Map,s=(l,u)=>bf(l,u,t,e),o=(l,u)=>s(l,u);return new Proxy(o,{get:(l,u)=>u==="create"?s:(n.has(u)||n.set(u,bf(u,void 0,t,e)),n.get(u))})}function m_({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function i1({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function s1(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function wf(t){return t===void 0||t===1}function ah({scale:t,scaleX:e,scaleY:n}){return!wf(t)||!wf(e)||!wf(n)}function ws(t){return ah(t)||g_(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function g_(t){return m0(t.x)||m0(t.y)}function m0(t){return t&&t!=="0%"}function wu(t,e,n){const s=t-n,o=e*s;return n+o}function g0(t,e,n,s,o){return o!==void 0&&(t=wu(t,o,s)),wu(t,n,s)+e}function lh(t,e=0,n=1,s,o){t.min=g0(t.min,e,n,s,o),t.max=g0(t.max,e,n,s,o)}function y_(t,{x:e,y:n}){lh(t.x,e.translate,e.scale,e.originPoint),lh(t.y,n.translate,n.scale,n.originPoint)}const y0=.999999999999,v0=1.0000000000001;function r1(t,e,n,s=!1){const o=n.length;if(!o)return;e.x=e.y=1;let l,u;for(let d=0;d<o;d++){l=n[d],u=l.projectionDelta;const{visualElement:f}=l.options;f&&f.props.style&&f.props.style.display==="contents"||(s&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Vr(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,y_(t,u)),s&&ws(l.latestValues)&&Vr(t,l.latestValues))}e.x<v0&&e.x>y0&&(e.x=1),e.y<v0&&e.y>y0&&(e.y=1)}function Or(t,e){t.min=t.min+e,t.max=t.max+e}function x0(t,e,n,s,o=.5){const l=it(t.min,t.max,o);lh(t,e,n,l,s)}function Vr(t,e){x0(t.x,e.x,e.scaleX,e.scale,e.originX),x0(t.y,e.y,e.scaleY,e.scale,e.originY)}function v_(t,e){return m_(s1(t.getBoundingClientRect(),e))}function o1(t,e,n){const s=v_(t,n),{scroll:o}=e;return o&&(Or(s.x,o.offset.x),Or(s.y,o.offset.y)),s}const b0=()=>({translate:0,scale:1,origin:0,originPoint:0}),jr=()=>({x:b0(),y:b0()}),w0=()=>({min:0,max:0}),wt=()=>({x:w0(),y:w0()}),uh={current:null},x_={current:!1};function a1(){if(x_.current=!0,!!Fh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>uh.current=t.matches;t.addEventListener("change",e),e()}else uh.current=!1}const l1=new WeakMap;function u1(t,e,n){for(const s in e){const o=e[s],l=n[s];if(Ot(o))t.addValue(s,o);else if(Ot(l))t.addValue(s,Yr(o,{owner:t}));else if(l!==o)if(t.hasValue(s)){const u=t.getValue(s);u.liveStyle===!0?u.jump(o):u.hasAnimated||u.set(o)}else{const u=t.getStaticValue(s);t.addValue(s,Yr(u!==void 0?u:o,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const _0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class c1{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:o,blockInitialAnimation:l,visualState:u},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ap,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=Wt.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,et.render(this.render,!1,!0))};const{latestValues:f,renderState:p}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=d,this.blockInitialAnimation=!!l,this.isControllingVariants=Uu(n),this.isVariantNode=s_(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,...b}=this.scrapeMotionValuesFromProps(n,{},this);for(const w in b){const T=b[w];f[w]!==void 0&&Ot(T)&&T.set(f[w])}}mount(e){var n;this.current=e,l1.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,o)=>this.bindToMotionValue(o,s)),x_.current||a1(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:uh.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Ki(this.notifyUpdate),Ki(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const s=this.features[n];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Zr.has(e);s&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&et.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Xr){const n=Xr[e];if(!n)continue;const{isEnabled:s,Feature:o}=n;if(!this.features[e]&&o&&s(this.props)&&(this.features[e]=new o(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<_0.length;s++){const o=_0[s];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const l="on"+o,u=e[l];u&&(this.propEventSubscriptions[o]=this.on(o,u))}this.prevMotionValues=u1(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=Yr(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(cw(s)||fw(s))?s=parseFloat(s):!vN(s)&&Yi.test(n)&&(s=Kw(e,n)),this.setBaseTarget(e,Ot(s)?s.get():s)),Ot(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var l;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const u=vp(this.props,n,(l=this.presenceContext)==null?void 0:l.custom);u&&(s=u[e])}if(n&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Ot(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Xh),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){cp.render(this.render)}}class b_ extends c1{constructor(){super(...arguments),this.KeyframeResolver=oN}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ot(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function w_(t,{style:e,vars:n},s,o){const l=t.style;let u;for(u in e)l[u]=e[u];o==null||o.applyProjectionStyles(l,s);for(u in n)l.setProperty(u,n[u])}function d1(t){return window.getComputedStyle(t)}class f1 extends b_{constructor(){super(...arguments),this.type="html",this.renderInstance=w_}readValueFromInstance(e,n){var s;if(Zr.has(n))return(s=this.projection)!=null&&s.isProjecting?Zf(n):EC(e,n);{const o=d1(e),l=(Aw(n)?o.getPropertyValue(n):o[n])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(e,{transformPagePoint:n}){return v_(e,n)}build(e,n,s){mp(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return xp(e,n,s)}}const __=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function h1(t,e,n,s){w_(t,e,void 0,s);for(const o in e.attrs)t.setAttribute(__.has(o)?o:bp(o),e.attrs[o])}class p1 extends b_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Zr.has(n)){const s=Jw(n);return s&&s.default||0}return n=__.has(n)?n:bp(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return d_(e,n,s)}build(e,n,s){a_(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,o){h1(e,n,s,o)}mount(e){this.isSVGTag=u_(e.tagName),super.mount(e)}}const m1=(t,e)=>yp(t)?new p1(e):new f1(e,{allowProjection:t!==B.Fragment});function Fr(t,e,n){const s=t.getProps();return vp(s,e,n!==void 0?n:s.custom,t)}const ch=t=>Array.isArray(t);function g1(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Yr(n))}function y1(t){return ch(t)?t[t.length-1]||0:t}function v1(t,e){const n=Fr(t,e);let{transitionEnd:s={},transition:o={},...l}=n||{};l={...l,...s};for(const u in l){const d=y1(l[u]);g1(t,u,d)}}function x1(t){return!!(Ot(t)&&t.add)}function dh(t,e){const n=t.getValue("willChange");if(x1(n))return n.add(e);if(!n&&pi.WillChange){const s=new pi.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function T_(t){return t.props[f_]}const b1=t=>t!==null;function w1(t,{repeat:e,repeatType:n="loop"},s){const o=t.filter(b1),l=e&&n!=="loop"&&e%2===1?0:o.length-1;return o[l]}const _1={type:"spring",stiffness:500,damping:25,restSpeed:10},T1=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),S1={type:"keyframes",duration:.8},E1={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},A1=(t,{keyframes:e})=>e.length>2?S1:Zr.has(t)?t.startsWith("scale")?T1(e[1]):_1:E1;function C1({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:o,repeat:l,repeatType:u,repeatDelay:d,from:f,elapsed:p,...y}){return!!Object.keys(y).length}const wp=(t,e,n,s={},o,l)=>u=>{const d=lp(s,t)||{},f=d.delay||s.delay||0;let{elapsed:p=0}=s;p=p-zn(f);const y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-p,onUpdate:w=>{e.set(w),d.onUpdate&&d.onUpdate(w)},onComplete:()=>{u(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:l?void 0:o};C1(d)||Object.assign(y,A1(t,y)),y.duration&&(y.duration=zn(y.duration)),y.repeatDelay&&(y.repeatDelay=zn(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let b=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(sh(y),y.delay===0&&(b=!0)),(pi.instantAnimations||pi.skipAnimations)&&(b=!0,sh(y),y.delay=0),y.allowFlatten=!d.type&&!d.ease,b&&!l&&e.get()!==void 0){const w=w1(y.keyframes,d);if(w!==void 0){et.update(()=>{y.onUpdate(w),y.onComplete()});return}}return d.isSync?new op(y):new KC(y)};function N1({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function S_(t,e,{delay:n=0,transitionOverride:s,type:o}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:u,...d}=e;s&&(l=s);const f=[],p=o&&t.animationState&&t.animationState.getState()[o];for(const y in d){const b=t.getValue(y,t.latestValues[y]??null),w=d[y];if(w===void 0||p&&N1(p,y))continue;const T={delay:n,...lp(l||{},y)},E=b.get();if(E!==void 0&&!b.isAnimating&&!Array.isArray(w)&&w===E&&!T.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const R=T_(t);if(R){const k=window.MotionHandoffAnimation(R,y,et);k!==null&&(T.startTime=k,A=!0)}}dh(t,y),b.start(wp(y,b,w,t.shouldReduceMotion&&zw.has(y)?{type:!1}:T,t,A));const C=b.animation;C&&f.push(C)}return u&&Promise.all(f).then(()=>{et.update(()=>{u&&v1(t,u)})}),f}function E_(t,e,n,s=0,o=1){const l=Array.from(t).sort((p,y)=>p.sortNodePosition(y)).indexOf(e),u=t.size,d=(u-1)*s;return typeof n=="function"?n(l,u):o===1?l*s:d-l*s}function fh(t,e,n={}){var f;const s=Fr(t,e,n.type==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(o=n.transitionOverride);const l=s?()=>Promise.all(S_(t,s,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(p=0)=>{const{delayChildren:y=0,staggerChildren:b,staggerDirection:w}=o;return R1(t,e,p,y,b,w,n)}:()=>Promise.resolve(),{when:d}=o;if(d){const[p,y]=d==="beforeChildren"?[l,u]:[u,l];return p().then(()=>y())}else return Promise.all([l(),u(n.delay)])}function R1(t,e,n=0,s=0,o=0,l=1,u){const d=[];for(const f of t.variantChildren)f.notify("AnimationStart",e),d.push(fh(f,e,{...u,delay:n+(typeof s=="function"?0:s)+E_(t.variantChildren,f,s,o,l)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(d)}function M1(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const o=e.map(l=>fh(t,l,n));s=Promise.all(o)}else if(typeof e=="string")s=fh(t,e,n);else{const o=typeof e=="function"?Fr(t,e,n.custom):e;s=Promise.all(S_(t,o,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function A_(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const I1=pp.length;function C_(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?C_(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<I1;n++){const s=pp[n],o=t.props[s];(va(o)||o===!1)&&(e[s]=o)}return e}const k1=[...hp].reverse(),D1=hp.length;function P1(t){return e=>Promise.all(e.map(({animation:n,options:s})=>M1(t,n,s)))}function U1(t){let e=P1(t),n=T0(),s=!0;const o=f=>(p,y)=>{var w;const b=Fr(t,y,f==="exit"?(w=t.presenceContext)==null?void 0:w.custom:void 0);if(b){const{transition:T,transitionEnd:E,...A}=b;p={...p,...A,...E}}return p};function l(f){e=f(t)}function u(f){const{props:p}=t,y=C_(t.parent)||{},b=[],w=new Set;let T={},E=1/0;for(let C=0;C<D1;C++){const R=k1[C],k=n[R],N=p[R]!==void 0?p[R]:y[R],I=va(N),L=R===f?k.isActive:null;L===!1&&(E=C);let H=N===y[R]&&N!==p[R]&&I;if(H&&s&&t.manuallyAnimateOnMount&&(H=!1),k.protectedKeys={...T},!k.isActive&&L===null||!N&&!k.prevProp||Pu(N)||typeof N=="boolean")continue;const O=L1(k.prevProp,N);let W=O||R===f&&k.isActive&&!H&&I||C>E&&I,J=!1;const ie=Array.isArray(N)?N:[N];let Z=ie.reduce(o(R),{});L===!1&&(Z={});const{prevResolvedValues:ye={}}=k,ke={...ye,...Z},Je=Q=>{W=!0,w.has(Q)&&(J=!0,w.delete(Q)),k.needsAnimating[Q]=!0;const ae=t.getValue(Q);ae&&(ae.liveStyle=!1)};for(const Q in ke){const ae=Z[Q],_e=ye[Q];if(T.hasOwnProperty(Q))continue;let Se=!1;ch(ae)&&ch(_e)?Se=!A_(ae,_e):Se=ae!==_e,Se?ae!=null?Je(Q):w.add(Q):ae!==void 0&&w.has(Q)?Je(Q):k.protectedKeys[Q]=!0}k.prevProp=N,k.prevResolvedValues=Z,k.isActive&&(T={...T,...Z}),s&&t.blockInitialAnimation&&(W=!1);const st=H&&O;W&&(!st||J)&&b.push(...ie.map(Q=>{const ae={type:R};if(typeof Q=="string"&&s&&!st&&t.manuallyAnimateOnMount&&t.parent){const{parent:_e}=t,Se=Fr(_e,Q);if(_e.enteringChildren&&Se){const{delayChildren:P}=Se.transition||{};ae.delay=E_(_e.enteringChildren,t,P)}}return{animation:Q,options:ae}}))}if(w.size){const C={};if(typeof p.initial!="boolean"){const R=Fr(t,Array.isArray(p.initial)?p.initial[0]:p.initial);R&&R.transition&&(C.transition=R.transition)}w.forEach(R=>{const k=t.getBaseTarget(R),N=t.getValue(R);N&&(N.liveStyle=!0),C[R]=k??null}),b.push({animation:C})}let A=!!b.length;return s&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(A=!1),s=!1,A?e(b):Promise.resolve()}function d(f,p){var b;if(n[f].isActive===p)return Promise.resolve();(b=t.variantChildren)==null||b.forEach(w=>{var T;return(T=w.animationState)==null?void 0:T.setActive(f,p)}),n[f].isActive=p;const y=u(f);for(const w in n)n[w].protectedKeys={};return y}return{animateChanges:u,setActive:d,setAnimateFunction:l,getState:()=>n,reset:()=>{n=T0()}}}function L1(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!A_(e,t):!1}function ys(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function T0(){return{animate:ys(!0),whileInView:ys(),whileHover:ys(),whileTap:ys(),whileDrag:ys(),whileFocus:ys(),exit:ys()}}class Xi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class O1 extends Xi{constructor(e){super(e),e.animationState||(e.animationState=U1(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Pu(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let V1=0;class j1 extends Xi{constructor(){super(...arguments),this.id=V1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const o=this.node.animationState.setActive("exit",!e);n&&!e&&o.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const B1={animation:{Feature:O1},exit:{Feature:j1}};function xa(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function Ra(t){return{point:{x:t.pageX,y:t.pageY}}}const G1=t=>e=>dp(e)&&t(e,Ra(e));function da(t,e,n,s){return xa(t,e,G1(n),s)}const N_=1e-4,H1=1-N_,q1=1+N_,R_=.01,z1=0-R_,F1=0+R_;function Ht(t){return t.max-t.min}function $1(t,e,n){return Math.abs(t-e)<=n}function S0(t,e,n,s=.5){t.origin=s,t.originPoint=it(e.min,e.max,t.origin),t.scale=Ht(n)/Ht(e),t.translate=it(n.min,n.max,t.origin)-t.originPoint,(t.scale>=H1&&t.scale<=q1||isNaN(t.scale))&&(t.scale=1),(t.translate>=z1&&t.translate<=F1||isNaN(t.translate))&&(t.translate=0)}function fa(t,e,n,s){S0(t.x,e.x,n.x,s?s.originX:void 0),S0(t.y,e.y,n.y,s?s.originY:void 0)}function E0(t,e,n){t.min=n.min+e.min,t.max=t.min+Ht(e)}function J1(t,e,n){E0(t.x,e.x,n.x),E0(t.y,e.y,n.y)}function A0(t,e,n){t.min=e.min-n.min,t.max=t.min+Ht(e)}function _u(t,e,n){A0(t.x,e.x,n.x),A0(t.y,e.y,n.y)}function xn(t){return[t("x"),t("y")]}const M_=({current:t})=>t?t.ownerDocument.defaultView:null,C0=(t,e)=>Math.abs(t-e);function K1(t,e){const n=C0(t.x,e.x),s=C0(t.y,e.y);return Math.sqrt(n**2+s**2)}class I_{constructor(e,n,{transformPagePoint:s,contextWindow:o=window,dragSnapToOrigin:l=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Tf(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,E=K1(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!T&&!E)return;const{point:A}=w,{timestamp:C}=Pt;this.history.push({...A,timestamp:C});const{onStart:R,onMove:k}=this.handlers;T||(R&&R(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,w)},this.handlePointerMove=(w,T)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=_f(T,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(w,T)=>{this.end();const{onEnd:E,onSessionEnd:A,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=Tf(w.type==="pointercancel"?this.lastMoveEventInfo:_f(T,this.transformPagePoint),this.history);this.startEvent&&E&&E(w,R),A&&A(w,R)},!dp(e))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=u,this.contextWindow=o||window;const d=Ra(e),f=_f(d,this.transformPagePoint),{point:p}=f,{timestamp:y}=Pt;this.history=[{...p,timestamp:y}];const{onSessionStart:b}=n;b&&b(e,Tf(f,this.history)),this.removeListeners=Aa(da(this.contextWindow,"pointermove",this.handlePointerMove),da(this.contextWindow,"pointerup",this.handlePointerUp),da(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ki(this.updatePoint)}}function _f(t,e){return e?{point:e(t.point)}:t}function N0(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Tf({point:t},e){return{point:t,delta:N0(t,k_(e)),offset:N0(t,Y1(e)),velocity:X1(e,.1)}}function Y1(t){return t[0]}function k_(t){return t[t.length-1]}function X1(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const o=k_(t);for(;n>=0&&(s=t[n],!(o.timestamp-s.timestamp>zn(e)));)n--;if(!s)return{x:0,y:0};const l=bn(o.timestamp-s.timestamp);if(l===0)return{x:0,y:0};const u={x:(o.x-s.x)/l,y:(o.y-s.y)/l};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function W1(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?it(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?it(n,t,s.max):Math.min(t,n)),t}function R0(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Q1(t,{top:e,left:n,bottom:s,right:o}){return{x:R0(t.x,n,o),y:R0(t.y,e,s)}}function M0(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function Z1(t,e){return{x:M0(t.x,e.x),y:M0(t.y,e.y)}}function eR(t,e){let n=.5;const s=Ht(t),o=Ht(e);return o>s?n=ma(e.min,e.max-s,t.min):s>o&&(n=ma(t.min,t.max-o,e.min)),hi(0,1,n)}function tR(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const hh=.35;function nR(t=hh){return t===!1?t=0:t===!0&&(t=hh),{x:I0(t,"left","right"),y:I0(t,"top","bottom")}}function I0(t,e,n){return{min:k0(t,e),max:k0(t,n)}}function k0(t,e){return typeof t=="number"?t:t[e]||0}const iR=new WeakMap;class sR{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const l=b=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ra(b).point)},u=(b,w)=>{const{drag:T,dragPropagation:E,onDragStart:A}=this.getProps();if(T&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=cN(T),!this.openDragLock))return;this.latestPointerEvent=b,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xn(R=>{let k=this.getAxisMotionValue(R).get()||0;if(Fn.test(k)){const{projection:N}=this.visualElement;if(N&&N.layout){const I=N.layout.layoutBox[R];I&&(k=Ht(I)*(parseFloat(k)/100))}}this.originPoint[R]=k}),A&&et.postRender(()=>A(b,w)),dh(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},d=(b,w)=>{this.latestPointerEvent=b,this.latestPanInfo=w;const{dragPropagation:T,dragDirectionLock:E,onDirectionLock:A,onDrag:C}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:R}=w;if(E&&this.currentDirection===null){this.currentDirection=rR(R),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",w.point,R),this.updateAxis("y",w.point,R),this.visualElement.render(),C&&C(b,w)},f=(b,w)=>{this.latestPointerEvent=b,this.latestPanInfo=w,this.stop(b,w),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>xn(b=>{var w;return this.getAnimationState(b)==="paused"&&((w=this.getAxisMotionValue(b).animation)==null?void 0:w.play())}),{dragSnapToOrigin:y}=this.getProps();this.panSession=new I_(e,{onSessionStart:l,onStart:u,onMove:d,onSessionEnd:f,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,distanceThreshold:s,contextWindow:M_(this.visualElement)})}stop(e,n){const s=e||this.latestPointerEvent,o=n||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!o||!s)return;const{velocity:u}=o;this.startAnimation(u);const{onDragEnd:d}=this.getProps();d&&et.postRender(()=>d(s,o))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:o}=this.getProps();if(!s||!Ql(e,o,this.currentDirection))return;const l=this.getAxisMotionValue(e);let u=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(u=W1(u,this.constraints[e],this.elastic[e])),l.set(u)}resolveConstraints(){var l;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,o=this.constraints;e&&Lr(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=Q1(s.layoutBox,e):this.constraints=!1,this.elastic=nR(n),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&xn(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=tR(s.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Lr(e))return!1;const s=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const l=o1(s,o.root,this.visualElement.getTransformPagePoint());let u=Z1(o.layout.layoutBox,l);if(n){const d=n(i1(u));this.hasMutatedConstraints=!!d,d&&(u=m_(d))}return u}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:o,dragTransition:l,dragSnapToOrigin:u,onDragTransitionEnd:d}=this.getProps(),f=this.constraints||{},p=xn(y=>{if(!Ql(y,n,this.currentDirection))return;let b=f&&f[y]||{};u&&(b={min:0,max:0});const w=o?200:1e6,T=o?40:1e7,E={type:"inertia",velocity:s?e[y]:0,bounceStiffness:w,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...l,...b};return this.startAxisValueAnimation(y,E)});return Promise.all(p).then(d)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return dh(this.visualElement,e),s.start(wp(e,s,0,n,this.visualElement,!1))}stopAnimation(){xn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){xn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),o=s[n];return o||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){xn(n=>{const{drag:s}=this.getProps();if(!Ql(n,s,this.currentDirection))return;const{projection:o}=this.visualElement,l=this.getAxisMotionValue(n);if(o&&o.layout){const{min:u,max:d}=o.layout.layoutBox[n];l.set(e[n]-it(u,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Lr(n)||!s||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};xn(u=>{const d=this.getAxisMotionValue(u);if(d&&this.constraints!==!1){const f=d.get();o[u]=eR({min:f,max:f},this.constraints[u])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),xn(u=>{if(!Ql(u,e,null))return;const d=this.getAxisMotionValue(u),{min:f,max:p}=this.constraints[u];d.set(it(f,p,o[u]))})}addListeners(){if(!this.visualElement.current)return;iR.set(this.visualElement,this);const e=this.visualElement.current,n=da(e,"pointerdown",f=>{const{drag:p,dragListener:y=!0}=this.getProps();p&&y&&this.start(f)}),s=()=>{const{dragConstraints:f}=this.getProps();Lr(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,l=o.addEventListener("measure",s);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),et.read(s);const u=xa(window,"resize",()=>this.scalePositionWithinConstraints()),d=o.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(xn(y=>{const b=this.getAxisMotionValue(y);b&&(this.originPoint[y]+=f[y].translate,b.set(b.get()+f[y].translate))}),this.visualElement.render())}));return()=>{u(),n(),l(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:o=!1,dragConstraints:l=!1,dragElastic:u=hh,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:o,dragConstraints:l,dragElastic:u,dragMomentum:d}}}function Ql(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function rR(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class oR extends Xi{constructor(e){super(e),this.removeGroupControls=wn,this.removeListeners=wn,this.controls=new sR(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||wn}unmount(){this.removeGroupControls(),this.removeListeners()}}const D0=t=>(e,n)=>{t&&et.postRender(()=>t(e,n))};class aR extends Xi{constructor(){super(...arguments),this.removePointerDownListener=wn}onPointerDown(e){this.session=new I_(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:M_(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:o}=this.node.getProps();return{onSessionStart:D0(e),onStart:D0(n),onMove:s,onEnd:(l,u)=>{delete this.session,o&&et.postRender(()=>o(l,u))}}}mount(){this.removePointerDownListener=da(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Sf=!1;class lR extends B.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:o}=this.props,{projection:l}=e;l&&(n.group&&n.group.add(l),s&&s.register&&o&&s.register(l),Sf&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),hu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:o,isPresent:l}=this.props,{projection:u}=s;return u&&(u.isPresent=l,Sf=!0,o||e.layoutDependency!==n||n===void 0||e.isPresent!==l?u.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?u.promote():u.relegate()||et.postRender(()=>{const d=u.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),cp.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:o}=e;Sf=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),s&&s.deregister&&s.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function D_(t){const[e,n]=t_(),s=B.useContext(qh);return g.jsx(lR,{...t,layoutGroup:s,switchLayoutGroup:B.useContext(h_),isPresent:e,safeToRemove:n})}function uR(t,e,n){const s=Ot(t)?t:Yr(t);return s.start(wp("",s,e,n)),s.animation}const cR=(t,e)=>t.depth-e.depth;class dR{constructor(){this.children=[],this.isDirty=!1}add(e){$h(this.children,e),this.isDirty=!0}remove(e){Jh(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(cR),this.isDirty=!1,this.children.forEach(e)}}function fR(t,e){const n=Wt.now(),s=({timestamp:o})=>{const l=o-n;l>=e&&(Ki(s),t(l-e))};return et.setup(s,!0),()=>Ki(s)}const P_=["TopLeft","TopRight","BottomLeft","BottomRight"],hR=P_.length,P0=t=>typeof t=="string"?parseFloat(t):t,U0=t=>typeof t=="number"||pe.test(t);function pR(t,e,n,s,o,l){o?(t.opacity=it(0,n.opacity??1,mR(s)),t.opacityExit=it(e.opacity??1,0,gR(s))):l&&(t.opacity=it(e.opacity??1,n.opacity??1,s));for(let u=0;u<hR;u++){const d=`border${P_[u]}Radius`;let f=L0(e,d),p=L0(n,d);if(f===void 0&&p===void 0)continue;f||(f=0),p||(p=0),f===0||p===0||U0(f)===U0(p)?(t[d]=Math.max(it(P0(f),P0(p),s),0),(Fn.test(p)||Fn.test(f))&&(t[d]+="%")):t[d]=p}(e.rotate||n.rotate)&&(t.rotate=it(e.rotate||0,n.rotate||0,s))}function L0(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const mR=U_(0,.5,bw),gR=U_(.5,.95,wn);function U_(t,e,n){return s=>s<t?0:s>e?1:n(ma(t,e,s))}function O0(t,e){t.min=e.min,t.max=e.max}function Mn(t,e){O0(t.x,e.x),O0(t.y,e.y)}function V0(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function j0(t,e,n,s,o){return t-=e,t=wu(t,1/n,s),o!==void 0&&(t=wu(t,1/o,s)),t}function yR(t,e=0,n=1,s=.5,o,l=t,u=t){if(Fn.test(e)&&(e=parseFloat(e),e=it(u.min,u.max,e/100)-u.min),typeof e!="number")return;let d=it(l.min,l.max,s);t===l&&(d-=e),t.min=j0(t.min,e,n,d,o),t.max=j0(t.max,e,n,d,o)}function B0(t,e,[n,s,o],l,u){yR(t,e[n],e[s],e[o],e.scale,l,u)}const vR=["x","scaleX","originX"],xR=["y","scaleY","originY"];function G0(t,e,n,s){B0(t.x,e,vR,n?n.x:void 0,s?s.x:void 0),B0(t.y,e,xR,n?n.y:void 0,s?s.y:void 0)}function H0(t){return t.translate===0&&t.scale===1}function L_(t){return H0(t.x)&&H0(t.y)}function q0(t,e){return t.min===e.min&&t.max===e.max}function bR(t,e){return q0(t.x,e.x)&&q0(t.y,e.y)}function z0(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function O_(t,e){return z0(t.x,e.x)&&z0(t.y,e.y)}function F0(t){return Ht(t.x)/Ht(t.y)}function $0(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class wR{constructor(){this.members=[]}add(e){$h(this.members,e),e.scheduleRender()}remove(e){if(Jh(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let s;for(let o=n;o>=0;o--){const l=this.members[o];if(l.isPresent!==!1){s=l;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _R(t,e,n){let s="";const o=t.x.translate/e.x,l=t.y.translate/e.y,u=(n==null?void 0:n.z)||0;if((o||l||u)&&(s=`translate3d(${o}px, ${l}px, ${u}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:y,rotateX:b,rotateY:w,skewX:T,skewY:E}=n;p&&(s=`perspective(${p}px) ${s}`),y&&(s+=`rotate(${y}deg) `),b&&(s+=`rotateX(${b}deg) `),w&&(s+=`rotateY(${w}deg) `),T&&(s+=`skewX(${T}deg) `),E&&(s+=`skewY(${E}deg) `)}const d=t.x.scale*e.x,f=t.y.scale*e.y;return(d!==1||f!==1)&&(s+=`scale(${d}, ${f})`),s||"none"}const Ef=["","X","Y","Z"],TR=1e3;let SR=0;function Af(t,e,n,s){const{latestValues:o}=e;o[t]&&(n[t]=o[t],e.setStaticValue(t,0),s&&(s[t]=0))}function V_(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=T_(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",et,!(o||l))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&V_(s)}function j_({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:o}){return class{constructor(u={},d=e==null?void 0:e()){this.id=SR++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(CR),this.nodes.forEach(IR),this.nodes.forEach(kR),this.nodes.forEach(NR)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new dR)}addEventListener(u,d){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Xh),this.eventHandlers.get(u).add(d)}notifyListeners(u,...d){const f=this.eventHandlers.get(u);f&&f.notify(...d)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=e_(u)&&!gN(u),this.instance=u;const{layoutId:d,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||d)&&(this.isLayoutDirty=!0),t){let y,b=0;const w=()=>this.root.updateBlockedByResize=!1;et.read(()=>{b=window.innerWidth}),t(u,()=>{const T=window.innerWidth;T!==b&&(b=T,this.root.updateBlockedByResize=!0,y&&y(),y=fR(w,250),hu.hasAnimatedSinceResize&&(hu.hasAnimatedSinceResize=!1,this.nodes.forEach(Y0)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&p&&(d||f)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:b,hasRelativeLayoutChanged:w,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||p.getDefaultTransition()||OR,{onLayoutAnimationStart:A,onLayoutAnimationComplete:C}=p.getProps(),R=!this.targetLayout||!O_(this.targetLayout,T),k=!b&&w;if(this.options.layoutRoot||this.resumeFrom||k||b&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...lp(E,"layout"),onPlay:A,onComplete:C};(p.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(y,k)}else b||Y0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ki(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(DR),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&V_(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const b=this.path[y];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:d,layout:f}=this.options;if(d===void 0&&!f)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(J0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(K0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(MR),this.nodes.forEach(ER),this.nodes.forEach(AR)):this.nodes.forEach(K0),this.clearAllSnapshots();const d=Wt.now();Pt.delta=hi(0,1e3/60,d-Pt.timestamp),Pt.timestamp=d,Pt.isProcessing=!0,pf.update.process(Pt),pf.preRender.process(Pt),pf.render.process(Pt),Pt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,cp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(RR),this.sharedNodes.forEach(PR)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ht(this.snapshot.measuredBox.x)&&!Ht(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=wt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(d=!1),d&&this.instance){const f=s(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!o)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!L_(this.projectionDelta),f=this.getTransformTemplate(),p=f?f(this.latestValues,""):void 0,y=p!==this.prevTransformTemplateValue;u&&this.instance&&(d||ws(this.latestValues)||y)&&(o(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const d=this.measurePageBox();let f=this.removeElementScroll(d);return u&&(f=this.removeTransform(f)),VR(f),{animationId:this.root.animationId,measuredBox:d,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var p;const{visualElement:u}=this.options;if(!u)return wt();const d=u.measureViewportBox();if(!(((p=this.scroll)==null?void 0:p.wasRoot)||this.path.some(jR))){const{scroll:y}=this.root;y&&(Or(d.x,y.offset.x),Or(d.y,y.offset.y))}return d}removeElementScroll(u){var f;const d=wt();if(Mn(d,u),(f=this.scroll)!=null&&f.wasRoot)return d;for(let p=0;p<this.path.length;p++){const y=this.path[p],{scroll:b,options:w}=y;y!==this.root&&b&&w.layoutScroll&&(b.wasRoot&&Mn(d,u),Or(d.x,b.offset.x),Or(d.y,b.offset.y))}return d}applyTransform(u,d=!1){const f=wt();Mn(f,u);for(let p=0;p<this.path.length;p++){const y=this.path[p];!d&&y.options.layoutScroll&&y.scroll&&y!==y.root&&Vr(f,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),ws(y.latestValues)&&Vr(f,y.latestValues)}return ws(this.latestValues)&&Vr(f,this.latestValues),f}removeTransform(u){const d=wt();Mn(d,u);for(let f=0;f<this.path.length;f++){const p=this.path[f];if(!p.instance||!ws(p.latestValues))continue;ah(p.latestValues)&&p.updateSnapshot();const y=wt(),b=p.measurePageBox();Mn(y,b),G0(d,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,y)}return ws(this.latestValues)&&G0(d,this.latestValues),d}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Pt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var T;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(u||f&&this.isSharedProjectionDirty||this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:b}=this.options;if(!this.layout||!(y||b))return;this.resolvedRelativeTargetAt=Pt.timestamp;const w=this.getClosestProjectingParent();w&&this.linkedParentVersion!==w.layoutVersion&&!w.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(w&&w.layout?this.createRelativeTarget(w,this.layout.layoutBox,w.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=wt(),this.targetWithTransforms=wt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),J1(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Mn(this.target,this.layout.layoutBox),y_(this.target,this.targetDelta)):Mn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?this.createRelativeTarget(w,this.target,w.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||ah(this.parent.latestValues)||g_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(u,d,f){this.relativeParent=u,this.linkedParentVersion=u.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wt(),this.relativeTargetOrigin=wt(),_u(this.relativeTargetOrigin,d,f),Mn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var E;const u=this.getLead(),d=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Pt.timestamp&&(f=!1),f)return;const{layout:p,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||y))return;Mn(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,w=this.treeScale.y;r1(this.layoutCorrected,this.treeScale,this.path,d),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=wt());const{target:T}=u;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(V0(this.prevProjectionDelta.x,this.projectionDelta.x),V0(this.prevProjectionDelta.y,this.projectionDelta.y)),fa(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==w||!$0(this.projectionDelta.x,this.prevProjectionDelta.x)||!$0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var d;if((d=this.options.visualElement)==null||d.scheduleRender(),u){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=jr(),this.projectionDelta=jr(),this.projectionDeltaWithTransform=jr()}setAnimationOrigin(u,d=!1){const f=this.snapshot,p=f?f.latestValues:{},y={...this.latestValues},b=jr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const w=wt(),T=f?f.source:void 0,E=this.layout?this.layout.source:void 0,A=T!==E,C=this.getStack(),R=!C||C.members.length<=1,k=!!(A&&!R&&this.options.crossfade===!0&&!this.path.some(LR));this.animationProgress=0;let N;this.mixTargetDelta=I=>{const L=I/1e3;X0(b.x,u.x,L),X0(b.y,u.y,L),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_u(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),UR(this.relativeTarget,this.relativeTargetOrigin,w,L),N&&bR(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=wt()),Mn(N,this.relativeTarget)),A&&(this.animationValues=y,pR(y,p,this.latestValues,L,k,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){var d,f,p;this.notifyListeners("animationStart"),(d=this.currentAnimation)==null||d.stop(),(p=(f=this.resumingFrom)==null?void 0:f.currentAnimation)==null||p.stop(),this.pendingAnimation&&(Ki(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{hu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Yr(0)),this.currentAnimation=uR(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:y=>{this.mixTargetDelta(y),u.onUpdate&&u.onUpdate(y)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(TR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:d,target:f,layout:p,latestValues:y}=u;if(!(!d||!f||!p)){if(this!==u&&this.layout&&p&&B_(this.options.animationType,this.layout.layoutBox,p.layoutBox)){f=this.target||wt();const b=Ht(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+b;const w=Ht(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+w}Mn(d,f),Vr(d,y),fa(this.projectionDeltaWithTransform,this.layoutCorrected,d,y)}}registerSharedNode(u,d){this.sharedNodes.has(u)||this.sharedNodes.set(u,new wR),this.sharedNodes.get(u).add(d);const p=d.options.initialPromotionConfig;d.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(d):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var d;const{layoutId:u}=this.options;return u?((d=this.getStack())==null?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:u}=this.options;return u?(d=this.getStack())==null?void 0:d.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:d,preserveFollowOpacity:f}={}){const p=this.getStack();p&&p.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let d=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(d=!0),!d)return;const p={};f.z&&Af("z",u,p,this.animationValues);for(let y=0;y<Ef.length;y++)Af(`rotate${Ef[y]}`,u,p,this.animationValues),Af(`skew${Ef[y]}`,u,p,this.animationValues);u.render();for(const y in p)u.setStaticValue(y,p[y]),this.animationValues&&(this.animationValues[y]=p[y]);u.scheduleRender()}applyProjectionStyles(u,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=fu(d==null?void 0:d.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=fu(d==null?void 0:d.pointerEvents)||""),this.hasProjected&&!ws(this.latestValues)&&(u.transform=f?f({},""):"none",this.hasProjected=!1);return}u.visibility="";const y=p.animationValues||p.latestValues;this.applyTransformsToTarget();let b=_R(this.projectionDeltaWithTransform,this.treeScale,y);f&&(b=f(y,b)),u.transform=b;const{x:w,y:T}=this.projectionDelta;u.transformOrigin=`${w.origin*100}% ${T.origin*100}% 0`,p.animationValues?u.opacity=p===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:u.opacity=p===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const E in oh){if(y[E]===void 0)continue;const{correct:A,applyTo:C,isCSSVariable:R}=oh[E],k=b==="none"?y[E]:A(y[E],p);if(C){const N=C.length;for(let I=0;I<N;I++)u[C[I]]=k}else R?this.options.visualElement.renderState.vars[E]=k:u[E]=k}this.options.layoutId&&(u.pointerEvents=p===this?fu(d==null?void 0:d.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var d;return(d=u.currentAnimation)==null?void 0:d.stop()}),this.root.nodes.forEach(J0),this.root.sharedNodes.clear()}}}function ER(t){t.updateLayout()}function AR(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:o}=t.layout,{animationType:l}=t.options,u=e.source!==t.layout.source;l==="size"?xn(b=>{const w=u?e.measuredBox[b]:e.layoutBox[b],T=Ht(w);w.min=s[b].min,w.max=w.min+T}):B_(l,e.layoutBox,s)&&xn(b=>{const w=u?e.measuredBox[b]:e.layoutBox[b],T=Ht(s[b]);w.max=w.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[b].max=t.relativeTarget[b].min+T)});const d=jr();fa(d,s,e.layoutBox);const f=jr();u?fa(f,t.applyTransform(o,!0),e.measuredBox):fa(f,s,e.layoutBox);const p=!L_(d);let y=!1;if(!t.resumeFrom){const b=t.getClosestProjectingParent();if(b&&!b.resumeFrom){const{snapshot:w,layout:T}=b;if(w&&T){const E=wt();_u(E,e.layoutBox,w.layoutBox);const A=wt();_u(A,s,T.layoutBox),O_(E,A)||(y=!0),b.options.layoutRoot&&(t.relativeTarget=A,t.relativeTargetOrigin=E,t.relativeParent=b)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:f,layoutDelta:d,hasLayoutChanged:p,hasRelativeLayoutChanged:y})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function CR(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function NR(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function RR(t){t.clearSnapshot()}function J0(t){t.clearMeasurements()}function K0(t){t.isLayoutDirty=!1}function MR(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Y0(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function IR(t){t.resolveTargetDelta()}function kR(t){t.calcProjection()}function DR(t){t.resetSkewAndRotation()}function PR(t){t.removeLeadSnapshot()}function X0(t,e,n){t.translate=it(e.translate,0,n),t.scale=it(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function W0(t,e,n,s){t.min=it(e.min,n.min,s),t.max=it(e.max,n.max,s)}function UR(t,e,n,s){W0(t.x,e.x,n.x,s),W0(t.y,e.y,n.y,s)}function LR(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const OR={duration:.45,ease:[.4,0,.1,1]},Q0=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Z0=Q0("applewebkit/")&&!Q0("chrome/")?Math.round:wn;function ex(t){t.min=Z0(t.min),t.max=Z0(t.max)}function VR(t){ex(t.x),ex(t.y)}function B_(t,e,n){return t==="position"||t==="preserve-aspect"&&!$1(F0(e),F0(n),.2)}function jR(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const BR=j_({attachResizeListener:(t,e)=>xa(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Cf={current:void 0},G_=j_({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Cf.current){const t=new BR({});t.mount(window),t.setOptions({layoutScroll:!0}),Cf.current=t}return Cf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),GR={pan:{Feature:aR},drag:{Feature:oR,ProjectionNode:G_,MeasureLayout:D_}};function tx(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,l=s[o];l&&et.postRender(()=>l(e,Ra(e)))}class HR extends Xi{mount(){const{current:e}=this.node;e&&(this.unmount=dN(e,(n,s)=>(tx(this.node,s,"Start"),o=>tx(this.node,o,"End"))))}unmount(){}}class qR extends Xi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Aa(xa(this.node.current,"focus",()=>this.onFocus()),xa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function nx(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),l=s[o];l&&et.postRender(()=>l(e,Ra(e)))}class zR extends Xi{mount(){const{current:e}=this.node;e&&(this.unmount=mN(e,(n,s)=>(nx(this.node,s,"Start"),(o,{success:l})=>nx(this.node,o,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ph=new WeakMap,Nf=new WeakMap,FR=t=>{const e=ph.get(t.target);e&&e(t)},$R=t=>{t.forEach(FR)};function JR({root:t,...e}){const n=t||document;Nf.has(n)||Nf.set(n,{});const s=Nf.get(n),o=JSON.stringify(e);return s[o]||(s[o]=new IntersectionObserver($R,{root:t,...e})),s[o]}function KR(t,e,n){const s=JR(e);return ph.set(t,n),s.observe(t),()=>{ph.delete(t),s.unobserve(t)}}const YR={some:0,all:1};class XR extends Xi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:o="some",once:l}=e,u={root:n?n.current:void 0,rootMargin:s,threshold:typeof o=="number"?o:YR[o]},d=f=>{const{isIntersecting:p}=f;if(this.isInView===p||(this.isInView=p,l&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:y,onViewportLeave:b}=this.node.getProps(),w=p?y:b;w&&w(f)};return KR(this.node.current,u,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(WR(e,n))&&this.startObserver()}unmount(){}}function WR({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const QR={inView:{Feature:XR},tap:{Feature:zR},focus:{Feature:qR},hover:{Feature:HR}},ZR={layout:{ProjectionNode:G_,MeasureLayout:D_}},eM={...B1,...QR,...GR,...ZR},ee=n1(eM,m1),H_=B.createContext({theme:"dark",setTheme:()=>{},toggleTheme:()=>{}}),q_=()=>B.useContext(H_),tM=({children:t})=>{const[e,n]=B.useState("dark"),s=d=>{const f=document.documentElement;f.classList.remove("dark","light"),f.classList.add(d);try{localStorage.setItem("theme",d)}catch{}};B.useEffect(()=>{var d;try{const f=localStorage.getItem("theme");if(f==="dark"||f==="light"){n(f),s(f);return}const y=((d=window.matchMedia)==null?void 0:d.call(window,"(prefers-color-scheme: dark)").matches)?"dark":"light";n(y),s(y)}catch{n("dark"),s("dark")}},[]),B.useEffect(()=>{var p;const d=(p=window.matchMedia)==null?void 0:p.call(window,"(prefers-color-scheme: dark)"),f=y=>{try{if(!localStorage.getItem("theme")){const w=y.matches?"dark":"light";n(w),s(w)}}catch{}};return d!=null&&d.addEventListener&&d.addEventListener("change",f),()=>{d!=null&&d.removeEventListener&&d.removeEventListener("change",f)}},[]);const o=d=>{n(d),s(d)},l=()=>o(e==="dark"?"light":"dark"),u=B.useMemo(()=>({theme:e,setTheme:o,toggleTheme:l}),[e]);return g.jsx(H_.Provider,{value:u,children:t})},mh="ViralThumb AI",_s="/ViralThumb-AI/pages",nM=[{id:"1",title:"How I Made $10k in 1 Week",category:"Finance",imageUrl:"https://picsum.photos/seed/money/800/450",isPremium:!0,badge:"High Click"},{id:"2",title:"INSANE 1v5 Clutch Moment",category:"Gaming",imageUrl:"https://picsum.photos/seed/gaming/800/450",isPremium:!1,badge:"Trending"},{id:"3",title:"Do NOT Go Here at 3AM",category:"Dark Suspense",imageUrl:"https://picsum.photos/seed/horror/800/450",isPremium:!0,badge:"CTR Boost"},{id:"4",title:"Solo Travel to Japan Guide",category:"Vlogs",imageUrl:"https://picsum.photos/seed/travel/800/450",isPremium:!0,badge:"Aesthetic"},{id:"5",title:"I GAVE AWAY 1,000,000 COOKIES!",category:"MrBeast Shock",imageUrl:"https://picsum.photos/seed/shock/800/450",isPremium:!0,badge:"Viral"},{id:"6",title:"The Future of AI is HERE",category:"Clean Tech",imageUrl:"https://picsum.photos/seed/tech/800/450",isPremium:!1,badge:"Modern"},{id:"7",title:"iPhone 15 vs Android Ultra",category:'"Versus" Battle',imageUrl:"https://picsum.photos/seed/vs/800/450",isPremium:!0,badge:"Comparison"},{id:"8",title:"Master React in 10 Minutes",category:"Tutorials",imageUrl:"https://picsum.photos/seed/tutorial/800/450",isPremium:!1,badge:"Educational"},{id:"9",title:"My Realistic 5AM Morning Routine",category:"Lifestyle",imageUrl:"https://picsum.photos/seed/lifestyle/800/450",isPremium:!1,badge:"Relaxing"},{id:"10",title:"Cyberpunk 2077 Night City Tour",category:"Gaming/Neon",imageUrl:"https://picsum.photos/seed/neon/800/450",isPremium:!0,badge:"Cinematic"},{id:"11",title:"Stop Losing Money on Crypto",category:"Finance",imageUrl:"https://picsum.photos/seed/crypto/800/450",isPremium:!0,badge:"Urgent"},{id:"12",title:"Surviving 24 Hours in the Woods",category:"Vlogs",imageUrl:"https://picsum.photos/seed/survival/800/450",isPremium:!1,badge:"High Energy"}],ks=({onNavigate:t,onLogout:e,variant:n="landing",user:s,activePage:o})=>{const l=la.useRef(!1),{theme:u,toggleTheme:d}=q_();return g.jsxs("nav",{className:"sticky top-0 z-50 w-full glass border-b border-white/5 px-6 py-4 flex items-center justify-between",children:[g.jsxs(ee.div,{className:"flex items-center gap-2 cursor-pointer group",onClick:()=>t(s?"dashboard":"landing"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[g.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary flex items-center justify-center shadow-neon group-hover:shadow-neon-strong transition-all duration-300",children:g.jsx("span",{className:"material-symbols-outlined text-white",children:"auto_awesome"})}),g.jsx("span",{className:"text-xl font-bold tracking-tight text-white",children:mh})]}),g.jsx("div",{className:"hidden md:flex items-center gap-8",children:s?g.jsxs(g.Fragment,{children:[g.jsx(Zl,{onClick:()=>t("dashboard"),label:"Dashboard",isActive:o==="dashboard"}),g.jsx(Zl,{onClick:()=>t("generator"),label:"Generator",isActive:o==="generator"}),g.jsx(Zl,{onClick:()=>t("templates"),label:"Templates",isActive:o==="templates"}),g.jsx(Zl,{onClick:()=>t("history"),label:"History",isActive:o==="history"})]}):g.jsxs(g.Fragment,{children:[g.jsx("a",{href:"#features",className:"text-sm font-medium text-text-secondary hover:text-white transition-colors hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]",children:"Features"}),g.jsx("a",{href:"#showcase",className:"text-sm font-medium text-text-secondary hover:text-white transition-colors hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]",children:"Showcase"}),g.jsx("button",{onClick:()=>t("pricing"),className:"text-sm font-medium text-text-secondary hover:text-white transition-colors hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]",children:"Pricing"})]})}),g.jsx("div",{className:"flex items-center gap-4",children:s?g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("div",{className:"text-right hidden sm:block",children:[g.jsx("p",{className:"text-xs font-bold text-white/90",children:s.name}),g.jsxs("div",{className:"flex items-center justify-end gap-1",children:[g.jsx(ee.span,{className:"w-1.5 h-1.5 rounded-full bg-primary",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0}}),g.jsxs(ee.p,{initial:{scale:1.2,color:"#fff"},animate:{scale:1,color:"var(--color-primary)"},className:"text-[10px] text-primary font-black uppercase tracking-widest",children:[s.credits," Credits"]},s.credits)]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(ee.div,{className:"w-10 h-10 rounded-full bg-cover bg-center border border-white/10 shadow-lg cursor-pointer",style:{backgroundImage:`url(${s.avatar})`},onClick:()=>t("settings"),whileHover:{scale:1.1,borderColor:"rgba(140, 37, 244, 0.5)"},whileTap:{scale:.95}}),g.jsx(ee.button,{onClick:f=>{f.preventDefault(),!l.current&&(l.current=!0,t("settings"),setTimeout(()=>{l.current=!1},500))},className:"w-10 h-10 rounded-full bg-surface-light border border-white/5 flex items-center justify-center hover:bg-white/5 hover:text-white transition-colors group",title:"Settings","aria-label":"Settings",whileHover:{rotate:360},whileTap:{scale:1.1},transition:{duration:.3},children:g.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-text-secondary group-hover:text-white transition-colors",children:[g.jsx("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",fill:"currentColor"}),g.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5399 15.6599L19.4699 17.5199C19.1699 18.0499 18.5299 18.2599 17.9799 18.0099L15.9199 17.0699C15.4299 17.4399 14.8899 17.7499 14.3099 17.9799L13.9299 20.2199C13.8299 20.8199 13.3099 21.2499 12.6999 21.2499H10.5599C9.94993 21.2499 9.42993 20.8199 9.32993 20.2199L8.94993 17.9799C8.36993 17.7499 7.82993 17.4399 7.33993 17.0699L5.27993 18.0099C4.72993 18.2599 4.08993 18.0499 3.78993 17.5199L2.71993 15.6599C2.41993 15.1299 2.53993 14.4699 3.00993 14.0799L4.85993 12.5599C4.81993 12.3799 4.79993 12.1899 4.79993 11.9999C4.79993 11.8099 4.81993 11.6199 4.85993 11.4399L3.00993 9.91993C2.53993 9.52993 2.41993 8.86993 2.71993 8.33993L3.78993 6.47993C4.08993 5.94993 4.72993 5.73993 5.27993 5.98993L7.33993 6.92993C7.82993 6.55993 8.36993 6.24993 8.94993 6.01993L9.32993 3.77993C9.42993 3.17993 9.94993 2.74993 10.5599 2.74993H12.6999C13.3099 2.74993 13.8299 3.17993 13.9299 3.77993L14.3099 6.01993C14.8899 6.24993 15.4299 6.55993 15.9199 6.92993L17.9799 5.98993C18.5299 5.73993 19.1699 5.94993 19.4699 6.47993L20.5399 8.33993C20.8399 8.86993 20.7199 9.52993 20.2499 9.91993L18.3999 11.4399C18.4399 11.6199 18.4599 11.8099 18.4599 11.9999C18.4599 12.1899 18.4399 12.3799 18.3999 12.5599L20.2499 14.0799C20.7199 14.4699 20.8399 15.1299 20.5399 15.6599Z",fill:"currentColor"})]})}),g.jsx(ee.button,{onClick:e,className:"w-10 h-10 rounded-full bg-surface-light border border-white/5 flex items-center justify-center hover:bg-red-500/10 hover:text-red-400 transition-colors group",title:"Logout",whileHover:{scale:1.1},whileTap:{scale:.95},children:g.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"logout"})}),g.jsx(ee.button,{onClick:d,className:"w-10 h-10 rounded-full bg-surface-light border border-white/5 flex items-center justify-center hover:bg-white/5 transition-colors outline-none focus:ring-2 focus:ring-primary/50",title:"Toggle Theme","aria-label":"Toggle Theme","aria-pressed":u==="dark",whileHover:{scale:1.1},whileTap:{scale:.95},children:g.jsx("span",{className:"material-symbols-outlined text-[20px]",children:u==="dark"?"light_mode":"dark_mode"})})]})]}):g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>t("login"),className:"hidden md:block text-sm font-bold text-text-secondary hover:text-white transition-colors",children:"Login"}),g.jsx(ee.button,{onClick:()=>t("login"),className:"px-5 py-2 rounded-lg bg-primary hover:bg-primary-hover text-white text-sm font-bold shadow-neon",whileHover:{scale:1.05,boxShadow:"0 0 30px rgba(140, 37, 244, 0.6)"},whileTap:{scale:.95},children:"Get Started"}),g.jsx(ee.button,{onClick:d,className:"w-10 h-10 rounded-full bg-surface-light border border-white/5 flex items-center justify-center hover:bg-white/5 transition-colors",title:"Toggle Theme","aria-label":"Toggle Theme",whileHover:{scale:1.1},whileTap:{scale:.95},children:g.jsx("span",{className:"material-symbols-outlined text-[20px]",children:u==="dark"?"light_mode":"dark_mode"})})]})})]})},Zl=({onClick:t,label:e,isActive:n})=>g.jsxs(ee.button,{onClick:t,className:`relative text-sm font-medium transition-colors ${n?"text-white":"text-text-secondary hover:text-white"}`,whileHover:"hover",children:[e,n&&g.jsx(ee.div,{className:"absolute -bottom-1 left-0 w-full h-0.5 bg-primary rounded-full shadow-[0_0_8px_rgba(139,92,246,0.8)]",layoutId:"activeTab",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),!n&&g.jsx(ee.div,{className:"absolute -bottom-1 left-0 w-full h-0.5 bg-primary rounded-full",initial:{scaleX:0},variants:{hover:{scaleX:1}},transition:{type:"spring",stiffness:300,damping:20}})]}),Ma=({onAdminClick:t})=>g.jsx("footer",{className:"bg-surface py-12 border-t border-white/5",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-8",children:[g.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:t,children:[g.jsx("div",{className:"w-6 h-6 rounded bg-primary flex items-center justify-center",children:g.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"auto_awesome"})}),g.jsx("span",{className:"font-bold",children:mh})]}),g.jsxs("div",{className:"flex gap-8 text-sm text-text-secondary",children:[g.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Privacy"}),g.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Terms"}),g.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Support"})]}),g.jsxs("p",{className:"text-sm text-text-secondary",children:[" 2024 ",mh,". All rights reserved."]})]})}),ix=({onNavigate:t})=>g.jsxs("div",{className:"flex flex-col min-h-screen",children:[g.jsx(ks,{onNavigate:t}),g.jsxs("section",{className:"relative pt-20 pb-32 px-6 overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[500px] bg-primary/10 blur-[120px] rounded-full -z-10"}),g.jsxs("div",{className:"max-w-5xl mx-auto text-center",children:[g.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs font-bold uppercase tracking-widest mb-8 animate-pulse",children:[g.jsx("span",{className:"w-2 h-2 rounded-full bg-primary"}),"V3.0 AI Engine Live"]}),g.jsxs("h1",{className:"text-5xl md:text-7xl font-black leading-tight mb-8",children:["Create ",g.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-400",children:"Viral"})," YouTube",g.jsx("br",{})," Thumbnails in Seconds"]}),g.jsx("p",{className:"text-lg md:text-xl text-text-secondary max-w-2xl mx-auto mb-12",children:"Generate high-CTR thumbnails using proven viral templates and cutting-edge generative AI. Stop wasting hours in Photoshop."}),g.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-6 mb-16",children:[g.jsxs("button",{onClick:()=>t("login"),className:"w-full sm:w-auto px-10 py-5 bg-primary hover:bg-primary-hover text-white font-black rounded-2xl shadow-neon transition-all hover:scale-105 flex items-center justify-center gap-2",children:[g.jsx("span",{className:"material-symbols-outlined",children:"bolt"}),"Generate Now  Free"]}),g.jsxs("button",{onClick:()=>t("templates"),className:"w-full sm:w-auto px-10 py-5 glass hover:bg-white/5 text-white font-black rounded-2xl transition-all flex items-center justify-center gap-2",children:[g.jsx("span",{className:"material-symbols-outlined",children:"grid_view"}),"Browse Templates"]})]}),g.jsxs("div",{className:"flex flex-col items-center gap-4",children:[g.jsx("p",{className:"text-xs font-bold text-text-secondary uppercase tracking-widest",children:"Trusted by 50,000+ creators"}),g.jsxs("div",{className:"flex -space-x-3",children:[[1,2,3,4,5].map(e=>g.jsx("img",{src:`https://picsum.photos/seed/${e}/100/100`,className:"w-10 h-10 rounded-full border-2 border-background",alt:"Creator"},e)),g.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-background bg-surface flex items-center justify-center text-[10px] font-bold",children:"+2k"})]})]})]})]}),g.jsx("section",{id:"features",className:"py-24 px-6 bg-surface/30",children:g.jsxs("div",{className:"max-w-7xl mx-auto",children:[g.jsxs("div",{className:"text-center mb-16",children:[g.jsx("h2",{className:"text-3xl md:text-5xl font-black mb-6",children:"Built for the Algorithm"}),g.jsx("p",{className:"text-text-secondary",children:"Everything you need to boost your CTR and go viral."})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[g.jsx(Rf,{icon:"face_retouching_natural",title:"AI Face Swap",desc:"Instantly swap faces with perfect lighting matching. Keep your brand consistent."}),g.jsx(Rf,{icon:"type_specimen",title:"Smart Text Overlay",desc:"Auto-generate readable, high-contrast text that grabs viewers' attention immediately."}),g.jsx(Rf,{icon:"monitoring",title:"Viral Scorer",desc:"Our model predicts CTR potential based on millions of top-performing videos."})]})]})}),g.jsx("section",{id:"showcase",className:"py-24 px-6",children:g.jsxs("div",{className:"max-w-7xl mx-auto",children:[g.jsxs("h2",{className:"text-3xl font-bold mb-12",children:["Made with ",iM]}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>g.jsxs("div",{className:"group cursor-pointer",children:[g.jsxs("div",{className:"relative aspect-video rounded-2xl overflow-hidden mb-4 shadow-lg group-hover:shadow-neon transition-all duration-300",children:[g.jsx("img",{src:`https://picsum.photos/seed/viral${e}/800/450`,alt:"Viral Thumbnail",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}),g.jsx("div",{className:"absolute top-2 right-2 bg-green-500 text-white text-[10px] font-black px-2 py-1 rounded",children:"CTR 12.4%"})]}),g.jsxs("h3",{className:"font-bold text-sm",children:["Example Video Title #",e]})]},e))})]})}),g.jsx(Ma,{onAdminClick:()=>t("admin")})]}),Rf=({icon:t,title:e,desc:n})=>g.jsxs("div",{className:"p-8 rounded-3xl bg-surface border border-white/5 hover:border-primary/50 transition-all group",children:[g.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center text-primary mb-6 group-hover:scale-110 transition-transform",children:g.jsx("span",{className:"material-symbols-outlined",children:t})}),g.jsx("h3",{className:"text-xl font-bold mb-3",children:e}),g.jsx("p",{className:"text-text-secondary text-sm leading-relaxed",children:n})]}),iM="ViralThumb AI";function Lu(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]]);return n}function sM(t,e,n,s){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(y){try{p(s.next(y))}catch(b){u(b)}}function f(y){try{p(s.throw(y))}catch(b){u(b)}}function p(y){y.done?l(y.value):o(y.value).then(d,f)}p((s=s.apply(t,e||[])).next())})}const rM=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class _p extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class oM extends _p{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class sx extends _p{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class rx extends _p{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var gh;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(gh||(gh={}));class aM{constructor(e,{headers:n={},customFetch:s,region:o=gh.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=rM(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return sM(this,arguments,void 0,function*(n,s={}){var o;let l,u;try{const{headers:d,method:f,body:p,signal:y,timeout:b}=s;let w={},{region:T}=s;T||(T=this.region);const E=new URL(`${this.url}/${n}`);T&&T!=="any"&&(w["x-region"]=T,E.searchParams.set("forceFunctionRegion",T));let A;p&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",A=p):typeof p=="string"?(w["Content-Type"]="text/plain",A=p):typeof FormData<"u"&&p instanceof FormData?A=p:(w["Content-Type"]="application/json",A=JSON.stringify(p)):A=p;let C=y;b&&(u=new AbortController,l=setTimeout(()=>u.abort(),b),y?(C=u.signal,y.addEventListener("abort",()=>u.abort())):C=u.signal);const R=yield this.fetch(E.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),d),body:A,signal:C}).catch(L=>{throw new oM(L)}),k=R.headers.get("x-relay-error");if(k&&k==="true")throw new sx(R);if(!R.ok)throw new rx(R);let N=((o=R.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),I;return N==="application/json"?I=yield R.json():N==="application/octet-stream"||N==="application/pdf"?I=yield R.blob():N==="text/event-stream"?I=R:N==="multipart/form-data"?I=yield R.formData():I=yield R.text(),{data:I,error:null,response:R}}catch(d){return{data:null,error:d,response:d instanceof rx||d instanceof sx?d.context:void 0}}finally{l&&clearTimeout(l)}})}}var lM=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},uM=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let o=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let u=null,d=null,f=null,p=l.status,y=l.statusText;if(l.ok){var b,w;if(n.method!=="HEAD"){var T;const R=await l.text();R===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((T=n.headers.get("Accept"))===null||T===void 0)&&T.includes("application/vnd.pgrst.plan+text"))?d=R:d=JSON.parse(R))}const A=(b=n.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),C=(w=l.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");A&&C&&C.length>1&&(f=parseInt(C[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,p=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var E;const A=await l.text();try{u=JSON.parse(A),Array.isArray(u)&&l.status===404&&(d=[],u=null,p=200,y="OK")}catch{l.status===404&&A===""?(p=204,y="No Content"):u={message:A}}if(u&&n.isMaybeSingle&&(!(u==null||(E=u.details)===null||E===void 0)&&E.includes("0 rows"))&&(u=null,p=200,y="OK"),u&&n.shouldThrowOnError)throw new lM(u)}return{error:u,data:d,count:f,status:p,statusText:y}});return this.shouldThrowOnError||(o=o.catch(l=>{var u;let d="";const f=l==null?void 0:l.cause;if(f){var p,y,b,w;const E=(p=f==null?void 0:f.message)!==null&&p!==void 0?p:"",A=(y=f==null?void 0:f.code)!==null&&y!==void 0?y:"";d=`${(b=l==null?void 0:l.name)!==null&&b!==void 0?b:"FetchError"}: ${l==null?void 0:l.message}`,d+=`

Caused by: ${(w=f==null?void 0:f.name)!==null&&w!==void 0?w:"Error"}: ${E}`,A&&(d+=` (${A})`),f!=null&&f.stack&&(d+=`
${f.stack}`)}else{var T;d=(T=l==null?void 0:l.stack)!==null&&T!==void 0?T:""}return{error:{message:`${(u=l==null?void 0:l.name)!==null&&u!==void 0?u:"FetchError"}: ${l==null?void 0:l.message}`,details:d,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(t,e)}returns(){return this}overrideTypes(){return this}},cM=class extends uM{select(t){let e=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:s,referencedTable:o=s}={}){const l=o?`${o}.order`:"order",u=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${u?`${u},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:s=n}={}){const o=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(l,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:s=!1,wal:o=!1,format:l="text"}={}){var u;const d=[t?"analyze":null,e?"verbose":null,n?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${f}"; options=${d};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const ox=new RegExp("[,()]");var Ir=class extends cM{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(s=>typeof s=="string"&&ox.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(s=>typeof s=="string"&&ox.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${o}fts${l}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},dM=class{constructor(t,{headers:e={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=s}select(t,e){const{head:n=!1,count:s}=e??{},o=n?"HEAD":"GET";let l=!1;const u=(t??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",u),s&&this.headers.append("Prefer",`count=${s}`),new Ir({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var s;const o="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ir({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:s,defaultToNull:o=!0}={}){var l;const u="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const d=t.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(d.length>0){const f=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new Ir({method:u,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(t,{count:e}={}){var n;const s="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Ir({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Ir({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},fM=class z_{constructor(e,{headers:n={},schema:s,fetch:o}={}){this.url=e,this.headers=new Headers(n),this.schemaName=s,this.fetch=o}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new dM(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new z_(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:s=!1,get:o=!1,count:l}={}){var u;let d;const f=new URL(`${this.url}/rpc/${e}`);let p;s||o?(d=s?"HEAD":"GET",Object.entries(n).filter(([b,w])=>w!==void 0).map(([b,w])=>[b,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([b,w])=>{f.searchParams.append(b,w)})):(d="POST",p=n);const y=new Headers(this.headers);return l&&y.set("Prefer",`count=${l}`),new Ir({method:d,url:f,headers:y,schema:this.schemaName,body:p,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};class hM{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const s=n.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const s=this.getWebSocketConstructor();return new s(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const pM="2.89.0",mM=`realtime-js/${pM}`,F_="1.0.0",gM="2.0.0",ax=F_,yh=1e4,yM=1e3,vM=100;var Fi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Fi||(Fi={}));var bt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(bt||(bt={}));var Pn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Pn||(Pn={}));var vh;(function(t){t.websocket="websocket"})(vh||(vh={}));var Es;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Es||(Es={}));class xM{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,s;const o=(s=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(e){var n,s;const o=(s=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,n,s){var o,l;const u=e.topic,d=(o=e.ref)!==null&&o!==void 0?o:"",f=(l=e.join_ref)!==null&&l!==void 0?l:"",p=e.payload.event,y=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},b=Object.keys(y).length===0?"":JSON.stringify(y);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`metadata length ${b.length} exceeds maximum of 255`);const w=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+d.length+u.length+p.length+b.length,T=new ArrayBuffer(this.HEADER_LENGTH+w);let E=new DataView(T),A=0;E.setUint8(A++,this.KINDS.userBroadcastPush),E.setUint8(A++,f.length),E.setUint8(A++,d.length),E.setUint8(A++,u.length),E.setUint8(A++,p.length),E.setUint8(A++,b.length),E.setUint8(A++,n),Array.from(f,R=>E.setUint8(A++,R.charCodeAt(0))),Array.from(d,R=>E.setUint8(A++,R.charCodeAt(0))),Array.from(u,R=>E.setUint8(A++,R.charCodeAt(0))),Array.from(p,R=>E.setUint8(A++,R.charCodeAt(0))),Array.from(b,R=>E.setUint8(A++,R.charCodeAt(0)));var C=new Uint8Array(T.byteLength+s.byteLength);return C.set(new Uint8Array(T),0),C.set(new Uint8Array(s),T.byteLength),C.buffer}decode(e,n){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return n(s)}if(typeof e=="string"){const s=JSON.parse(e),[o,l,u,d,f]=s;return n({join_ref:o,ref:l,topic:u,event:d,payload:f})}return n({})}_binaryDecode(e){const n=new DataView(e),s=n.getUint8(0),o=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,o)}}_decodeUserBroadcast(e,n,s){const o=n.getUint8(1),l=n.getUint8(2),u=n.getUint8(3),d=n.getUint8(4);let f=this.HEADER_LENGTH+4;const p=s.decode(e.slice(f,f+o));f=f+o;const y=s.decode(e.slice(f,f+l));f=f+l;const b=s.decode(e.slice(f,f+u));f=f+u;const w=e.slice(f,e.byteLength),T=d===this.JSON_ENCODING?JSON.parse(s.decode(w)):w,E={type:this.BROADCAST_EVENT,event:y,payload:T};return u>0&&(E.meta=JSON.parse(b)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>n.includes(s)))}}class $_{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ke;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ke||(Ke={}));const lx=(t,e,n={})=>{var s;const o=(s=n.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,u)=>(l[u]=bM(u,t,e,o),l),{}):{}},bM=(t,e,n,s)=>{const o=e.find(d=>d.name===t),l=o==null?void 0:o.type,u=n[t];return l&&!s.includes(l)?J_(l,u):xh(u)},J_=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return SM(e,n)}switch(t){case Ke.bool:return wM(e);case Ke.float4:case Ke.float8:case Ke.int2:case Ke.int4:case Ke.int8:case Ke.numeric:case Ke.oid:return _M(e);case Ke.json:case Ke.jsonb:return TM(e);case Ke.timestamp:return EM(e);case Ke.abstime:case Ke.date:case Ke.daterange:case Ke.int4range:case Ke.int8range:case Ke.money:case Ke.reltime:case Ke.text:case Ke.time:case Ke.timestamptz:case Ke.timetz:case Ke.tsrange:case Ke.tstzrange:return xh(e);default:return xh(e)}},xh=t=>t,wM=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},_M=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},TM=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},SM=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let l;const u=t.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(d=>J_(e,d))}return t},EM=t=>typeof t=="string"?t.replace(" ","T"):t,K_=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Mf{constructor(e,n,s={},o=yh){this.channel=e,this.event=n,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ux;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ux||(ux={}));class ha{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ha.syncState(this.state,o,l,u),this.pendingDiffs.forEach(f=>{this.state=ha.syncDiff(this.state,f,l,u)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},o=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=ha.syncDiff(this.state,o,l,u),d())}),this.onJoin((o,l,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:u})}),this.onLeave((o,l,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,o){const l=this.cloneDeep(e),u=this.transformState(n),d={},f={};return this.map(l,(p,y)=>{u[p]||(f[p]=y)}),this.map(u,(p,y)=>{const b=l[p];if(b){const w=y.map(C=>C.presence_ref),T=b.map(C=>C.presence_ref),E=y.filter(C=>T.indexOf(C.presence_ref)<0),A=b.filter(C=>w.indexOf(C.presence_ref)<0);E.length>0&&(d[p]=E),A.length>0&&(f[p]=A)}else d[p]=y}),this.syncDiff(l,{joins:d,leaves:f},s,o)}static syncDiff(e,n,s,o){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(l,(d,f)=>{var p;const y=(p=e[d])!==null&&p!==void 0?p:[];if(e[d]=this.cloneDeep(f),y.length>0){const b=e[d].map(T=>T.presence_ref),w=y.filter(T=>b.indexOf(T.presence_ref)<0);e[d].unshift(...w)}s(d,y,f)}),this.map(u,(d,f)=>{let p=e[d];if(!p)return;const y=f.map(b=>b.presence_ref);p=p.filter(b=>y.indexOf(b.presence_ref)<0),e[d]=p,o(d,p,f),p.length===0&&delete e[d]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const o=e[s];return"metas"in o?n[s]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[s]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cx;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(cx||(cx={}));var pa;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(pa||(pa={}));var fi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(fi||(fi={}));class Br{constructor(e,n={config:{}},s){var o,l;if(this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Mf(this,Pn.join,this.params,this.timeout),this.rejoinTimer=new $_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bt.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pn.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new ha(this),this.broadcastEndpointURL=K_(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var s,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==bt.closed){const{config:{broadcast:u,presence:d,private:f}}=this.params,p=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(T=>T.filter))!==null&&o!==void 0?o:[],y=!!this.bindings[pa.PRESENCE]&&this.bindings[pa.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,b={},w={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:y}),postgres_changes:p,private:f};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(T=>e==null?void 0:e(fi.CHANNEL_ERROR,T)),this._onClose(()=>e==null?void 0:e(fi.CLOSED)),this.updateJoinPayload(Object.assign({config:w},b)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:T})=>{var E;if(this.socket._isManualToken()||this.socket.setAuth(),T===void 0){e==null||e(fi.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,C=(E=A==null?void 0:A.length)!==null&&E!==void 0?E:0,R=[];for(let k=0;k<C;k++){const N=A[k],{filter:{event:I,schema:L,table:H,filter:O}}=N,W=T&&T[k];if(W&&W.event===I&&Br.isFilterValueEqual(W.schema,L)&&Br.isFilterValueEqual(W.table,H)&&Br.isFilterValueEqual(W.filter,O))R.push(Object.assign(Object.assign({},N),{id:W.id}));else{this.unsubscribe(),this.state=bt.errored,e==null||e(fi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,e&&e(fi.SUBSCRIBED);return}}).receive("error",T=>{this.state=bt.errored,e==null||e(fi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(fi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this.state===bt.joined&&e===pa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,s)}async httpSend(e,n,s={}){var o;if(n==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);if(d.status===202)return{success:!0};let f=d.statusText;try{const p=await d.json();f=p.error||p.message||f}catch{}return Promise.reject(new Error(f))}async send(e,n={}){var s,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=e,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,d,f;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=bt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new Mf(this,Pn.leave,{},e),s.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=bt.closed,this.bindings={}}async _fetchWithTimeout(e,n,s){const o=new AbortController,l=setTimeout(()=>o.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(l),u}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Mf(this,e,n,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>vM){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var o,l;const u=e.toLocaleLowerCase(),{close:d,error:f,leave:p,join:y}=Pn;if(s&&[d,f,p,y].indexOf(u)>=0&&s!==this._joinRef())return;let w=this._onMessage(u,n,s);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(T=>{var E,A,C;return((E=T.filter)===null||E===void 0?void 0:E.event)==="*"||((C=(A=T.filter)===null||A===void 0?void 0:A.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===u}).map(T=>T.callback(w,s)):(l=this.bindings[u])===null||l===void 0||l.filter(T=>{var E,A,C,R,k,N;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in T){const I=T.id,L=(E=T.filter)===null||E===void 0?void 0:E.event;return I&&((A=n.ids)===null||A===void 0?void 0:A.includes(I))&&(L==="*"||(L==null?void 0:L.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const I=(k=(R=T==null?void 0:T.filter)===null||R===void 0?void 0:R.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return I==="*"||I===((N=n==null?void 0:n.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===u}).map(T=>{if(typeof w=="object"&&"ids"in w){const E=w.data,{schema:A,table:C,commit_timestamp:R,type:k,errors:N}=E;w=Object.assign(Object.assign({},{schema:A,table:C,commit_timestamp:R,eventType:k,new:{},old:{},errors:N}),this._getPayloadRecords(E))}T.callback(w,s)})}_isClosed(){return this.state===bt.closed}_isJoined(){return this.state===bt.joined}_isJoining(){return this.state===bt.joining}_isLeaving(){return this.state===bt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const o=e.toLocaleLowerCase(),l={type:o,filter:n,callback:s};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&Br.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Pn.close,{},e)}_onError(e){this._on(Pn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=lx(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=lx(e.columns,e.old_record)),n}}const If=()=>{},eu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},AM=[1e3,2e3,5e3,1e4],CM=1e4,NM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RM{constructor(e,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=yh,this.transport=null,this.heartbeatIntervalMs=eu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=If,this.ref=0,this.reconnectTimer=null,this.vsn=ax,this.logger=If,this.conn=null,this.sendBuffer=[],this.serializer=new xM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((s=n==null?void 0:n.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${vh.websocket}`,this.httpEndpoint=K_(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=hM.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Fi.connecting:return Es.Connecting;case Fi.open:return Es.Open;case Fi.closing:return Es.Closing;default:return Es.Closed}}isConnected(){return this.connectionState()===Es.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const s=`realtime:${e}`,o=this.getChannels().find(l=>l.topic===s);if(o)return o;{const l=new Br(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:s,payload:o,ref:l}=e,u=()=>{this.encode(e,d=>{var f;(f=this.conn)===null||f===void 0||f.send(d)})};this.log("push",`${n} ${s} (${l})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(yM,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},eu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:l,ref:u}=n,d=u?`(${u})`:"",f=l.status||"";this.log("receive",`${f} ${s} ${o} ${d}`.trim(),l),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(o,l,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Fi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Fi.open||this.conn.readyState===Fi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Pn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${s}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([NM],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,s=!1;if(e)n=e,s=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),n=this.accessTokenValue}else n=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{const l={access_token:n,version:mM};n&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(Pn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new $_(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},eu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,s,o,l,u,d,f,p,y,b,w,T;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:yh,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:eu.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=e==null?void 0:e.heartbeatCallback)!==null&&d!==void 0?d:If,this.vsn=(f=e==null?void 0:e.vsn)!==null&&f!==void 0?f:ax,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(E=>AM[E-1]||CM),this.vsn){case F_:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:((E,A)=>A(JSON.stringify(E))),this.decode=(b=e==null?void 0:e.decode)!==null&&b!==void 0?b:((E,A)=>A(JSON.parse(E)));break;case gM:this.encode=(w=e==null?void 0:e.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(T=e==null?void 0:e.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var ba=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function MM(t,e,n){const s=new URL(e,t);if(n)for(const[o,l]of Object.entries(n))l!==void 0&&s.searchParams.set(o,l);return s.toString()}async function IM(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function kM(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:s,query:o,body:l,headers:u}){const d=MM(t.baseUrl,s,o),f=await IM(t.auth),p=await e(d,{method:n,headers:{...l?{"Content-Type":"application/json"}:{},...f,...u},body:l?JSON.stringify(l):void 0}),y=await p.text(),b=(p.headers.get("content-type")||"").includes("application/json"),w=b&&y?JSON.parse(y):y;if(!p.ok){const T=b?w:void 0,E=T==null?void 0:T.error;throw new ba((E==null?void 0:E.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:E==null?void 0:E.type,icebergCode:E==null?void 0:E.code,details:T})}return{status:p.status,headers:p.headers,data:w}}}}function tu(t){return t.join("")}var DM=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:tu(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${tu(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${tu(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${tu(t.namespace)}`}),!0}catch(e){if(e instanceof ba&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof ba&&n.status===409)return;throw n}}};function Sr(t){return t.join("")}var PM=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Sr(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Sr(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Sr(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Sr(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Sr(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Sr(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof ba&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof ba&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},UM=class{constructor(t){var s;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=kM({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(s=t.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new DM(this.client,e),this.tableOps=new PM(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Ou=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function nt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var LM=class extends Ou{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},bh=class extends Ou{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const Tp=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),OM=()=>Response,wh=t=>{if(Array.isArray(t))return t.map(n=>wh(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const o=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=wh(s)}),e},VM=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},jM=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function wa(t){"@babel/helpers - typeof";return wa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wa(t)}function BM(t,e){if(wa(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(wa(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GM(t){var e=BM(t,"string");return wa(e)=="symbol"?e:e+""}function HM(t,e,n){return(e=GM(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,s)}return n}function he(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dx(Object(n),!0).forEach(function(s){HM(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dx(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}const kf=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},qM=async(t,e,n)=>{t instanceof await OM()&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const o=t.status||500,l=(s==null?void 0:s.statusCode)||o+"";e(new LM(kf(s),o,l))}).catch(s=>{e(new bh(kf(s),s))}):e(new bh(kf(t),t))},zM=(t,e,n,s)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?o:(VM(s)?(o.headers=he({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(s)):o.body=s,e!=null&&e.duplex&&(o.duplex=e.duplex),he(he({},o),n))};async function Ia(t,e,n,s,o,l){return new Promise((u,d)=>{t(n,zM(e,s,o,l)).then(f=>{if(!f.ok)throw f;return s!=null&&s.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>qM(f,d,s))})}async function _a(t,e,n,s){return Ia(t,"GET",e,n,s)}async function Dn(t,e,n,s,o){return Ia(t,"POST",e,s,o,n)}async function _h(t,e,n,s,o){return Ia(t,"PUT",e,s,o,n)}async function FM(t,e,n,s){return Ia(t,"HEAD",e,he(he({},n),{},{noResolveJson:!0}),s)}async function Sp(t,e,n,s,o){return Ia(t,"DELETE",e,s,o,n)}var $M=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(nt(e))return{data:null,error:e};throw e}}};let Y_;Y_=Symbol.toStringTag;var JM=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Y_]="BlobDownloadBuilder",this.promise=null}asStream(){return new $M(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(nt(e))return{data:null,error:e};throw e}}};const KM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var YM=class{constructor(t,e={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=Tp(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,s){var o=this;try{let l;const u=he(he({},fx),s);let d=he(he({},o.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),f&&l.append("metadata",o.encodeMetadata(f)),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),f&&!l.has("metadata")&&l.append("metadata",o.encodeMetadata(f))):(l=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,f&&(d["x-metadata"]=o.toBase64(o.encodeMetadata(f))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),s!=null&&s.headers&&(d=he(he({},d),s.headers));const p=o._removeEmptyFolders(e),y=o._getFinalPath(p),b=await(t=="PUT"?_h:Dn)(o.fetch,`${o.url}/object/${y}`,l,he({headers:d},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:b.Id,fullPath:b.Key},error:null}}catch(l){if(o.shouldThrowOnError)throw l;if(nt(l))return{data:null,error:l};throw l}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,s){var o=this;const l=o._removeEmptyFolders(t),u=o._getFinalPath(l),d=new URL(o.url+`/object/upload/sign/${u}`);d.searchParams.set("token",e);try{let f;const p=he({upsert:fx.upsert},s),y=he(he({},o.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&n instanceof Blob?(f=new FormData,f.append("cacheControl",p.cacheControl),f.append("",n)):typeof FormData<"u"&&n instanceof FormData?(f=n,f.append("cacheControl",p.cacheControl)):(f=n,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType),{data:{path:l,fullPath:(await _h(o.fetch,d.toString(),f,{headers:y})).Key},error:null}}catch(f){if(o.shouldThrowOnError)throw f;if(nt(f))return{data:null,error:f};throw f}}async createSignedUploadUrl(t,e){var n=this;try{let s=n._getFinalPath(t);const o=he({},n.headers);e!=null&&e.upsert&&(o["x-upsert"]="true");const l=await Dn(n.fetch,`${n.url}/object/upload/sign/${s}`,{},{headers:o}),u=new URL(n.url+l.url),d=u.searchParams.get("token");if(!d)throw new Ou("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:d},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(nt(s))return{data:null,error:s};throw s}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var s=this;try{return{data:await Dn(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers}),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(nt(o))return{data:null,error:o};throw o}}async copy(t,e,n){var s=this;try{return{data:{path:(await Dn(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers})).Key},error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(nt(o))return{data:null,error:o};throw o}}async createSignedUrl(t,e,n){var s=this;try{let o=s._getFinalPath(t),l=await Dn(s.fetch,`${s.url}/object/sign/${o}`,he({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:s.headers});const u=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return l={signedUrl:encodeURI(`${s.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(nt(o))return{data:null,error:o};throw o}}async createSignedUrls(t,e,n){var s=this;try{const o=await Dn(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:e,paths:t},{headers:s.headers}),l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:o.map(u=>he(he({},u),{},{signedUrl:u.signedURL?encodeURI(`${s.url}${u.signedURL}${l}`):null})),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(nt(o))return{data:null,error:o};throw o}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),o=s?`?${s}`:"",l=this._getFinalPath(t),u=()=>_a(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new JM(u,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:wh(await _a(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(nt(s))return{data:null,error:s};throw s}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await FM(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(nt(s)&&s instanceof bh){const o=s.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:s}}throw s}}getPublicUrl(t,e){const n=this._getFinalPath(t),s=[],o=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&s.push(o);const l=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});u!==""&&s.push(u);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}async remove(t){var e=this;try{return{data:await Sp(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}}async list(t,e,n){var s=this;try{const o=he(he(he({},KM),e),{},{prefix:t||""});return{data:await Dn(s.fetch,`${s.url}/object/list/${s.bucketId}`,o,{headers:s.headers},n),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(nt(o))return{data:null,error:o};throw o}}async listV2(t,e){var n=this;try{const s=he({},t);return{data:await Dn(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,s,{headers:n.headers},e),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(nt(s))return{data:null,error:s};throw s}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const X_="2.89.0",W_={"X-Client-Info":`storage-js/${X_}`};var XM=class{constructor(t,e={},n,s){this.shouldThrowOnError=!1;const o=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=he(he({},W_),e),this.fetch=Tp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await _a(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await _a(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await Dn(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(nt(s))return{data:null,error:s};throw s}}async updateBucket(t,e){var n=this;try{return{data:await _h(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(nt(s))return{data:null,error:s};throw s}}async emptyBucket(t){var e=this;try{return{data:await Dn(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Sp(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},WM=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=he(he({},W_),e),this.fetch=Tp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Dn(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const s=n.toString(),o=s?`${e.url}/bucket?${s}`:`${e.url}/bucket`;return{data:await _a(e.fetch,o,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Sp(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!jM(t))throw new Ou("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new UM({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(n,{get(o,l){const u=o[l];return typeof u!="function"?u:async(...d)=>{try{return{data:await u.apply(o,d),error:null}}catch(f){if(s)throw f;return{data:null,error:f}}}}})}};const Ep={"X-Client-Info":`storage-js/${X_}`,"Content-Type":"application/json"};var Q_=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function an(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Df=class extends Q_{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},QM=class extends Q_{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const Ap=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),ZM=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},hx=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),eI=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const s=t.status||500,o=t;if(typeof o.json=="function")o.json().then(l=>{const u=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||s+"";e(new Df(hx(l),s,u))}).catch(()=>{const l=s+"";e(new Df(o.statusText||`HTTP ${s} error`,s,l))});else{const l=s+"";e(new Df(o.statusText||`HTTP ${s} error`,s,l))}}else e(new QM(hx(t),t))},tI=(t,e,n,s)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return s?(ZM(s)?(o.headers=he({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(s)):o.body=s,he(he({},o),n)):o};async function nI(t,e,n,s,o,l){return new Promise((u,d)=>{t(n,tI(e,s,o,l)).then(f=>{if(!f.ok)throw f;if(s!=null&&s.noResolveJson)return f;const p=f.headers.get("content-type");return!p||!p.includes("application/json")?{}:f.json()}).then(f=>u(f)).catch(f=>eI(f,d,s))})}async function ln(t,e,n,s,o){return nI(t,"POST",e,s,o,n)}var iI=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=he(he({},Ep),e),this.fetch=Ap(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await ln(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(an(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await ln(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(an(s))return{data:null,error:s};throw s}}async listIndexes(t){var e=this;try{return{data:await ln(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(an(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await ln(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(an(s))return{data:null,error:s};throw s}}},sI=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=he(he({},Ep),e),this.fetch=Ap(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await ln(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(an(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await ln(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(an(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await ln(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(an(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await ln(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(an(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await ln(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(an(n))return{data:null,error:n};throw n}}},rI=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=he(he({},Ep),e),this.fetch=Ap(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await ln(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(an(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await ln(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(an(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await ln(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(an(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await ln(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(an(n))return{data:null,error:n};throw n}}},oI=class extends rI{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new aI(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},aI=class extends iI{constructor(t,e,n,s){super(t,e,s),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,he(he({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,he(he({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new lI(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},lI=class extends sI{constructor(t,e,n,s,o){super(t,e,o),this.vectorBucketName=n,this.indexName=s}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,he(he({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,he(he({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,he(he({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,he(he({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,he(he({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},uI=class extends XM{constructor(t,e={},n,s){super(t,e,n,s)}from(t){return new YM(this.url,this.headers,t,this.fetch)}get vectors(){return new oI(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new WM(this.url+"/iceberg",this.headers,this.fetch)}};const Z_="2.89.0",kr=30*1e3,Th=3,Pf=Th*kr,cI="http://localhost:9999",dI="supabase.auth.token",fI={"X-Client-Info":`gotrue-js/${Z_}`},Sh="X-Supabase-Api-Version",eT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},hI=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,pI=600*1e3;class Ta extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function ue(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class mI extends Ta{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function gI(t){return ue(t)&&t.name==="AuthApiError"}class As extends Ta{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class gi extends Ta{constructor(e,n,s,o){super(e,s,o),this.name=n,this.status=s}}class on extends gi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function yI(t){return ue(t)&&t.name==="AuthSessionMissingError"}class Er extends gi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class nu extends gi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class iu extends gi{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function vI(t){return ue(t)&&t.name==="AuthImplicitGrantRedirectError"}class px extends gi{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xI extends gi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Eh extends gi{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Uf(t){return ue(t)&&t.name==="AuthRetryableFetchError"}class mx extends gi{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class Ah extends gi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Tu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gx=` 	
\r=`.split(""),bI=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<gx.length;e+=1)t[gx[e].charCodeAt(0)]=-2;for(let e=0;e<Tu.length;e+=1)t[Tu[e].charCodeAt(0)]=e;return t})();function yx(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Tu[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Tu[s]),e.queuedBits-=6}}function tT(t,e,n){const s=bI[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function vx(t){const e=[],n=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=u=>{TI(u,s,n)};for(let u=0;u<t.length;u+=1)tT(t.charCodeAt(u),o,l);return e.join("")}function wI(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function _I(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}wI(s,e)}}function TI(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function $r(t){const e=[],n={queue:0,queuedBits:0},s=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)tT(t.charCodeAt(o),n,s);return new Uint8Array(e)}function SI(t){const e=[];return _I(t,n=>e.push(n)),new Uint8Array(e)}function Rs(t){const e=[],n={queue:0,queuedBits:0},s=o=>{e.push(o)};return t.forEach(o=>yx(o,n,s)),yx(null,n,s),e.join("")}function EI(t){return Math.round(Date.now()/1e3)+t}function AI(){return Symbol("auth-callback")}const Dt=()=>typeof window<"u"&&typeof document<"u",vs={tested:!1,writable:!1},nT=()=>{if(!Dt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vs.tested)return vs.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),vs.tested=!0,vs.writable=!0}catch{vs.tested=!0,vs.writable=!1}return vs.writable};function CI(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return n.searchParams.forEach((s,o)=>{e[o]=s}),e}const iT=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),NI=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Dr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},xs=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},kt=async(t,e)=>{await t.removeItem(e)};class Vu{constructor(){this.promise=new Vu.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Vu.promiseConstructor=Promise;function Lf(t){const e=t.split(".");if(e.length!==3)throw new Ah("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!hI.test(e[s]))throw new Ah("JWT not in base64url format");return{header:JSON.parse(vx(e[0])),payload:JSON.parse(vx(e[1])),signature:$r(e[2]),raw:{header:e[0],payload:e[1]}}}async function RI(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function MI(t,e){return new Promise((s,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await t(l);if(!e(l,null,u)){s(u);return}}catch(u){if(!e(l,u)){o(u);return}}})()})}function II(t){return("0"+t.toString(16)).substr(-2)}function kI(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let o="";for(let l=0;l<56;l++)o+=n.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(e),Array.from(e,II).join("")}async function DI(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(s);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function PI(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await DI(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ar(t,e,n=!1){const s=kI();let o=s;n&&(o+="/PASSWORD_RECOVERY"),await Dr(t,`${e}-code-verifier`,o);const l=await PI(s);return[l,s===l?"plain":"s256"]}const UI=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function LI(t){const e=t.headers.get(Sh);if(!e||!e.match(UI))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function OI(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function VI(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const jI=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Cr(t){if(!jI.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Of(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function BI(t,e){return new Proxy(t,{get:(n,s,o)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,o)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,s,o)}})}function xx(t){return JSON.parse(JSON.stringify(t))}const Ts=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),GI=[502,503,504];async function bx(t){var e;if(!NI(t))throw new Eh(Ts(t),0);if(GI.includes(t.status))throw new Eh(Ts(t),t.status);let n;try{n=await t.json()}catch(l){throw new As(Ts(l),l)}let s;const o=LI(t);if(o&&o.getTime()>=eT["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new mx(Ts(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new on}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new mx(Ts(n),t.status,n.weak_password.reasons);throw new mI(Ts(n),t.status||500,s)}const HI=(t,e,n,s)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),n))};async function fe(t,e,n,s){var o;const l=Object.assign({},s==null?void 0:s.headers);l[Sh]||(l[Sh]=eT["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const u=(o=s==null?void 0:s.query)!==null&&o!==void 0?o:{};s!=null&&s.redirectTo&&(u.redirect_to=s.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await qI(t,e,n+d,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(f):{data:Object.assign({},f),error:null}}async function qI(t,e,n,s,o,l){const u=HI(e,s,o,l);let d;try{d=await t(n,Object.assign({},u))}catch(f){throw console.error(f),new Eh(Ts(f),0)}if(d.ok||await bx(d),s!=null&&s.noResolveJson)return d;try{return await d.json()}catch(f){await bx(f)}}function In(t){var e;let n=null;$I(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=EI(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function wx(t){const e=In(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function $i(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function zI(t){return{data:t,error:null}}function FI(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:o,verification_type:l}=t,u=Lu(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:n,hashed_token:s,redirect_to:o,verification_type:l},f=Object.assign({},u);return{data:{properties:d,user:f},error:null}}function _x(t){return t}function $I(t){return t.access_token&&t.refresh_token&&t.expires_in}const Vf=["global","local","others"];class JI{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=iT(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Vf[0]){if(Vf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Vf.join(", ")}`);try{return await fe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:$i})}catch(s){if(ue(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=Lu(e,["options"]),o=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(o.new_email=s==null?void 0:s.newEmail,delete o.newEmail),await fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:FI,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ue(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await fe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:$i})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,o,l,u,d,f;try{const p={nextPage:null,lastPage:0,total:0},y=await fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:_x});if(y.error)throw y.error;const b=await y.json(),w=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,T=(f=(d=y.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return T.length>0&&(T.forEach(E=>{const A=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(E.split(";")[1].split("=")[1]);p[`${C}Page`]=A}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},b),p),error:null}}catch(p){if(ue(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Cr(e);try{return await fe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:$i})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Cr(e);try{return await fe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:$i})}catch(s){if(ue(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){Cr(e);try{return await fe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:$i})}catch(s){if(ue(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Cr(e.userId);try{const{data:n,error:s}=await fe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:s}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Cr(e.userId),Cr(e.id);try{return{data:await fe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,s,o,l,u,d,f;try{const p={nextPage:null,lastPage:0,total:0},y=await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:_x});if(y.error)throw y.error;const b=await y.json(),w=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,T=(f=(d=y.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return T.length>0&&(T.forEach(E=>{const A=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(E.split(";")[1].split("=")[1]);p[`${C}Page`]=A}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},b),p),error:null}}catch(p){if(ue(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await fe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ue(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await fe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}}function Tx(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Nr={debug:!!(globalThis&&nT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sT extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class KI extends sT{}async function YI(t,e,n){Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new KI(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Nr.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function XI(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function rT(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function WI(t){return parseInt(t,16)}function QI(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function ZI(t){var e;const{chainId:n,domain:s,expirationTime:o,issuedAt:l=new Date,nonce:u,notBefore:d,requestId:f,resources:p,scheme:y,uri:b,version:w}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const T=rT(t.address),E=y?`${y}://${s}`:s,A=t.statement?`${t.statement}
`:"",C=`${E} wants you to sign in with your Ethereum account:
${T}

${A}`;let R=`URI: ${b}
Version: ${w}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(o&&(R+=`
Expiration Time: ${o.toISOString()}`),d&&(R+=`
Not Before: ${d.toISOString()}`),f&&(R+=`
Request ID: ${f}`),p){let k=`
Resources:`;for(const N of p){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);k+=`
- ${N}`}R+=k}return`${C}
${R}`}class yt extends Error{constructor({message:e,code:n,cause:s,name:o}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=o??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class Su extends yt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function ek({error:t,options:e}){var n,s,o;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new yt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new yt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new yt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new yt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new yt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new yt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new yt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new yt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const u=window.location.hostname;if(oT(u)){if(l.rp.id!==u)return new yt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new yt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new yt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function tk({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new yt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new yt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(oT(s)){if(n.rpId!==s)return new yt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new yt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class nk{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const ik=new nk;function sk(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:s}=t,o=Lu(t,["challenge","user","excludeCredentials"]),l=$r(e).buffer,u=Object.assign(Object.assign({},n),{id:$r(n.id).buffer}),d=Object.assign(Object.assign({},o),{challenge:l,user:u});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let f=0;f<s.length;f++){const p=s[f];d.excludeCredentials[f]=Object.assign(Object.assign({},p),{id:$r(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return d}function rk(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,s=Lu(t,["challenge","allowCredentials"]),o=$r(e).buffer,l=Object.assign(Object.assign({},s),{challenge:o});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const d=n[u];l.allowCredentials[u]=Object.assign(Object.assign({},d),{id:$r(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function ok(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Rs(new Uint8Array(t.response.attestationObject)),clientDataJSON:Rs(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ak(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,s=t.getClientExtensionResults(),o=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Rs(new Uint8Array(o.authenticatorData)),clientDataJSON:Rs(new Uint8Array(o.clientDataJSON)),signature:Rs(new Uint8Array(o.signature)),userHandle:o.userHandle?Rs(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function oT(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Sx(){var t,e;return!!(Dt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function lk(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Su("Browser returned unexpected credential type",e)}:{data:null,error:new Su("Empty credential response",e)}}catch(e){return{data:null,error:ek({error:e,options:t})}}}async function uk(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Su("Browser returned unexpected credential type",e)}:{data:null,error:new Su("Empty credential response",e)}}catch(e){return{data:null,error:tk({error:e,options:t})}}}const ck={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},dk={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Eu(...t){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),s={};for(const o of t)if(o)for(const l in o){const u=o[l];if(u!==void 0)if(Array.isArray(u))s[l]=u;else if(n(u))s[l]=u;else if(e(u)){const d=s[l];e(d)?s[l]=Eu(d,u):s[l]=Eu(u)}else s[l]=u}return s}function fk(t,e){return Eu(ck,t,e||{})}function hk(t,e){return Eu(dk,t,e||{})}class pk{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:s,signal:o},l){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!u)return{data:null,error:d};const f=o??ik.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=fk(u.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:y,error:b}=await lk({publicKey:p,signal:f});return y?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:b}}case"request":{const p=hk(u.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:y,error:b}=await uk(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:f}));return y?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:b}}}}catch(u){return ue(u)?{data:null,error:u}:{data:null,error:new As("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!n)return{data:null,error:new Ta("rpId is required for WebAuthn authentication")};try{if(!Sx())return{data:null,error:new As("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:s},signal:o},{request:l});if(!u)return{data:null,error:d};const{webauthn:f}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:f.type,rpId:n,rpOrigins:s,credential_response:f.credential_response}})}catch(u){return ue(u)?{data:null,error:u}:{data:null,error:new As("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!n)return{data:null,error:new Ta("rpId is required for WebAuthn registration")};try{if(!Sx())return{data:null,error:new As("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(y=>{var b;return(b=y.data)===null||b===void 0?void 0:b.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===e&&w.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:d};const{data:f,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:o},{create:l});return f?this._verify({factorId:u.id,challengeId:f.challengeId,webauthn:{rpId:n,rpOrigins:s,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:p}}catch(u){return ue(u)?{data:null,error:u}:{data:null,error:new As("Unexpected error in register",u)}}}}XI();const mk={url:cI,storageKey:dI,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:fI,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Ex(t,e,n){return await n()}const Rr={};class Sa{get jwks(){var e,n;return(n=(e=Rr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Rr[this.storageKey]=Object.assign(Object.assign({},Rr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Rr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Rr[this.storageKey]=Object.assign(Object.assign({},Rr[this.storageKey]),{cachedAt:e})}constructor(e){var n,s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},mk),e);if(this.storageKey=l.storageKey,this.instanceID=(n=Sa.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Sa.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Dt()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new JI({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=iT(l.fetch),this.lock=l.lock||Ex,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:this.persistSession&&Dt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=YI:this.lock=Ex,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new pk(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:nT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tx(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Tx(this.memoryStorage)),Dt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Z_}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},s="none";if(Dt()&&(n=CI(window.location.href),this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce")),Dt()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:l}=await this._getSessionFromURL(n,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),vI(l)){const f=(e=l.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ue(n)?this._returnResult({error:n}):this._returnResult({error:new As("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,o;try{const l=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:In}),{data:u,error:d}=l;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const f=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:p,session:f},error:null})}catch(l){if(ue(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var n,s,o;try{let l;if("email"in e){const{email:y,password:b,options:w}=e;let T=null,E=null;this.flowType==="pkce"&&([T,E]=await Ar(this.storage,this.storageKey)),l=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:y,password:b,data:(n=w==null?void 0:w.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:T,code_challenge_method:E},xform:In})}else if("phone"in e){const{phone:y,password:b,options:w}=e;l=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:b,data:(s=w==null?void 0:w.data)!==null&&s!==void 0?s:{},channel:(o=w==null?void 0:w.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:In})}else throw new nu("You must provide either an email or phone number and a password");const{data:u,error:d}=l;if(d||!u)return await kt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const f=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:p,session:f},error:null})}catch(l){if(await kt(this.storage,`${this.storageKey}-code-verifier`),ue(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:u,options:d}=e;n=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:wx})}else if("phone"in e){const{phone:l,password:u,options:d}=e;n=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:wx})}else throw new nu("You must provide either an email or phone number and a password");const{data:s,error:o}=n;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!s||!s.session||!s.user){const l=new Er;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(n){if(ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,s,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,s,o,l,u,d,f,p,y,b,w;let T,E;if("message"in e)T=e.message,E=e.signature;else{const{chain:A,wallet:C,statement:R,options:k}=e;let N;if(Dt())if(typeof C=="object")N=C;else{const J=window;if("ethereum"in J&&typeof J.ethereum=="object"&&"request"in J.ethereum&&typeof J.ethereum.request=="function")N=J.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=C}const I=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href),L=await N.request({method:"eth_requestAccounts"}).then(J=>J).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!L||L.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const H=rT(L[0]);let O=(s=k==null?void 0:k.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!O){const J=await N.request({method:"eth_chainId"});O=WI(J)}const W={domain:I.host,address:H,statement:R,uri:I.href,version:"1",chainId:O,nonce:(o=k==null?void 0:k.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(l=k==null?void 0:k.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=k==null?void 0:k.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(f=k==null?void 0:k.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(p=k==null?void 0:k.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(y=k==null?void 0:k.signInWithEthereum)===null||y===void 0?void 0:y.resources};T=ZI(W),E=await N.request({method:"personal_sign",params:[QI(T),H]})}try{const{data:A,error:C}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:E},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:In});if(C)throw C;if(!A||!A.session||!A.user){const R=new Er;return this._returnResult({data:{user:null,session:null},error:R})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:C})}catch(A){if(ue(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(e){var n,s,o,l,u,d,f,p,y,b,w,T;let E,A;if("message"in e)E=e.message,A=e.signature;else{const{chain:C,wallet:R,statement:k,options:N}=e;let I;if(Dt())if(typeof R=="object")I=R;else{const H=window;if("solana"in H&&typeof H.solana=="object"&&("signIn"in H.solana&&typeof H.solana.signIn=="function"||"signMessage"in H.solana&&typeof H.solana.signMessage=="function"))I=H.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=R}const L=new URL((n=N==null?void 0:N.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in I&&I.signIn){const H=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:L.host,uri:L.href}),k?{statement:k}:null));let O;if(Array.isArray(H)&&H[0]&&typeof H[0]=="object")O=H[0];else if(H&&typeof H=="object"&&"signedMessage"in H&&"signature"in H)O=H;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)E=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),A=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${L.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${L.href}`,`Issued At: ${(o=(s=N==null?void 0:N.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((u=N==null?void 0:N.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((d=N==null?void 0:N.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((f=N==null?void 0:N.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((p=N==null?void 0:N.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((b=(y=N==null?void 0:N.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||b===void 0)&&b.length?["Resources",...N.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const H=await I.signMessage(new TextEncoder().encode(E),"utf8");if(!H||!(H instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=H}}try{const{data:C,error:R}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:Rs(A)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:In});if(R)throw R;if(!C||!C.session||!C.user){const k=new Er;return this._returnResult({data:{user:null,session:null},error:k})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:R})}catch(C){if(ue(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(e){const n=await xs(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(n??"").split("/");try{if(!s&&this.flowType==="pkce")throw new xI;const{data:l,error:u}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:In});if(await kt(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const d=new Er;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:u})}catch(l){if(await kt(this.storage,`${this.storageKey}-code-verifier`),ue(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:n,provider:s,token:o,access_token:l,nonce:u}=e,d=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:In}),{data:f,error:p}=d;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!f||!f.session||!f.user){const y=new Er;return this._returnResult({data:{user:null,session:null},error:y})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:p})}catch(n){if(ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,s,o,l,u;try{if("email"in e){const{email:d,options:f}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Ar(this.storage,this.storageKey));const{error:b}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},create_user:(s=f==null?void 0:f.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:f==null?void 0:f.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in e){const{phone:d,options:f}=e,{data:p,error:y}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=f==null?void 0:f.data)!==null&&o!==void 0?o:{},create_user:(l=f==null?void 0:f.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(u=f==null?void 0:f.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:y})}throw new nu("You must provide either an email or phone number.")}catch(d){if(await kt(this.storage,`${this.storageKey}-code-verifier`),ue(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var n,s;try{let o,l;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:d}=await fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:In});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,p=u.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:p,session:f},error:null})}catch(o){if(ue(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var n,s,o,l,u;try{let d=null,f=null;this.flowType==="pkce"&&([d,f]=await Ar(this.storage,this.storageKey));const p=await fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:zI});return!((l=p.data)===null||l===void 0)&&l.url&&Dt()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(d){if(await kt(this.storage,`${this.storageKey}-code-verifier`),ue(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new on;const{error:o}=await fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(ue(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:o,options:l}=e,{error:u}=await fe(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:s,type:o,options:l}=e,{data:u,error:d}=await fe(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new nu("You must provide either an email or phone number and a type")}catch(n){if(ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await xs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Pf:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await xs(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=Of()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=BI(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:$i}):await this._useSession(async n=>{var s,o,l;const{data:u,error:d}=n;if(d)throw d;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new on}:await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:$i})})}catch(n){if(ue(n))return yI(n)&&(await this._removeSession(),await kt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:o,error:l}=s;if(l)throw l;if(!o.session)throw new on;const u=o.session;let d=null,f=null;this.flowType==="pkce"&&e.email!=null&&([d,f]=await Ar(this.storage,this.storageKey));const{data:p,error:y}=await fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:f}),jwt:u.access_token,xform:$i});if(y)throw y;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(s){if(await kt(this.storage,`${this.storageKey}-code-verifier`),ue(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new on;const n=Date.now()/1e3;let s=n,o=!0,l=null;const{payload:u}=Lf(e.access_token);if(u.exp&&(s=u.exp,o=s<=n),o){const{data:d,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:f}=await this._getUser(e.access_token);if(f)throw f;l={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(ue(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:u,error:d}=n;if(d)throw d;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new on;const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Dt())throw new iu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new iu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new px("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new iu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new px("No code detected.");const{data:k,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:l,refresh_token:u,expires_in:d,expires_at:f,token_type:p}=e;if(!l||!d||!u||!p)throw new iu("No session defined in URL");const y=Math.round(Date.now()/1e3),b=parseInt(d);let w=y+b;f&&(w=parseInt(f));const T=w-y;T*1e3<=kr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${b}s`);const E=w-b;y-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,w,y):y-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,w,y);const{data:A,error:C}=await this._getUser(l);if(C)throw C;const R={provider_token:s,provider_refresh_token:o,access_token:l,expires_in:b,expires_at:w,refresh_token:u,token_type:p,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:R,redirectType:e.type},error:null})}catch(s){if(ue(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await xs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:o,error:l}=n;if(l)return this._returnResult({error:l});const u=(s=o.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:d}=await this.admin.signOut(u,e);if(d&&!(gI(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await kt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=AI(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,o;try{const{data:{session:l},error:u}=n;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await Ar(this.storage,this.storageKey,!0));try{return await fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(await kt(this.storage,`${this.storageKey}-code-verifier`),ue(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:s,error:o}=await this._useSession(async l=>{var u,d,f,p,y;const{data:b,error:w}=l;if(w)throw w;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await fe(this.fetch,"GET",T,{headers:this.headers,jwt:(y=(p=b.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return Dt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(ue(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var s;try{const{error:o,data:{session:l}}=n;if(o)throw o;const{options:u,provider:d,token:f,access_token:p,nonce:y}=e,b=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:f,access_token:p,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:In}),{data:w,error:T}=b;return T?this._returnResult({data:{user:null,session:null},error:T}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new Er}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:T}))}catch(o){if(await kt(this.storage,`${this.storageKey}-code-verifier`),ue(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,o;const{data:l,error:u}=n;if(u)throw u;return await fe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await MI(async o=>(o>0&&await RI(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:In})),(o,l)=>{const u=200*Math.pow(2,o);return l&&Uf(l)&&Date.now()+u-s<kr})}catch(s){if(this._debug(n,"error",s),ue(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),Dt()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await xs(this.storage,this.storageKey);if(o&&this.userStorage){let u=await xs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await Dr(this.userStorage,this.storageKey+"-user",u)),o.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:Of()}else if(o&&!o.user&&!o.user){const u=await xs(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(o.user=u.user,await kt(this.storage,this.storageKey+"-user"),await Dr(this.storage,this.storageKey,o)):o.user=Of()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const l=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Pf;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Pf}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Uf(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&(u!=null&&u.user)?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new on;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Vu;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new on;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={data:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(o,"error",l),ue(l)){const u={data:null,error:l};return Uf(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,s=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,n)}catch(f){l.push(f)}});if(await Promise.all(u),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await kt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await Dr(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const l=xx(o);await Dr(this.storage,this.storageKey,l)}else{const o=xx(n);await Dr(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await kt(this.storage,this.storageKey),await kt(this.storage,this.storageKey+"-code-verifier"),await kt(this.storage,this.storageKey+"-user"),this.userStorage&&await kt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Dt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),kr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-e)/kr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${kr}ms, refresh threshold is ${Th} ticks`),o<=Th&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sT)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Dt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const o=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,u]=await Ar(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);o.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:o,error:l}=n;return l?this._returnResult({data:null,error:l}):await fe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,o;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:p}=await fe(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&f.type==="totp"&&(!((o=f==null?void 0:f.totp)===null||o===void 0)&&o.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?ok(e.webauthn.credential_response):ak(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:f}=await fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:f}))})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=await fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:sk(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:rk(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:s},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Lf(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((n=(e=s.user.factors)===null||e===void 0?void 0:e.filter(y=>y.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const p=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;return o?this._returnResult({data:null,error:o}):s?await fe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new on})})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:o},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new on});const u=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&Dt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(s){if(ue(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:o},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new on});const u=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&Dt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(s){if(ue(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;return s?this._returnResult({data:null,error:s}):n?await fe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new on})})}catch(e){if(ue(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;return o?this._returnResult({data:null,error:o}):s?(await fe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new on})})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(d=>d.kid===e);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(d=>d.kid===e),s&&this.jwks_cached_at+pI>o)return s;const{data:l,error:u}=await fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,s=l.keys.find(d=>d.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:T,error:E}=await this.getSession();if(E||!T.session)return this._returnResult({data:null,error:E});s=T.session.access_token}const{header:o,payload:l,signature:u,raw:{header:d,payload:f}}=Lf(s);n!=null&&n.allowExpired||OI(l.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:T}=await this.getUser(s);if(T)throw T;return{data:{claims:l,header:o,signature:u},error:null}}const y=VI(o.alg),b=await crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!await crypto.subtle.verify(y,b,u,SI(`${d}.${f}`)))throw new Ah("Invalid JWT signature");return{data:{claims:l,header:o,signature:u},error:null}}catch(s){if(ue(s))return this._returnResult({data:null,error:s});throw s}}}Sa.nextInstanceID={};const gk=Sa,yk="2.89.0";let oa="";typeof Deno<"u"?oa="deno":typeof document<"u"?oa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?oa="react-native":oa="node";const vk={"X-Client-Info":`supabase-js-${oa}/${yk}`},xk={headers:vk},bk={schema:"public"},wk={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_k={};function Ea(t){"@babel/helpers - typeof";return Ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ea(t)}function Tk(t,e){if(Ea(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(Ea(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sk(t){var e=Tk(t,"string");return Ea(e)=="symbol"?e:e+""}function Ek(t,e,n){return(e=Sk(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ax(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,s)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ax(Object(n),!0).forEach(function(s){Ek(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ax(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}const Ak=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ck=()=>Headers,Nk=(t,e,n)=>{const s=Ak(n),o=Ck();return async(l,u)=>{var d;const f=(d=await e())!==null&&d!==void 0?d:t;let p=new o(u==null?void 0:u.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),s(l,lt(lt({},u),{},{headers:p}))}};function Rk(t){return t.endsWith("/")?t:t+"/"}function Mk(t,e){var n,s;const{db:o,auth:l,realtime:u,global:d}=t,{db:f,auth:p,realtime:y,global:b}=e,w={db:lt(lt({},f),o),auth:lt(lt({},p),l),realtime:lt(lt({},y),u),storage:{},global:lt(lt(lt({},b),d),{},{headers:lt(lt({},(n=b==null?void 0:b.headers)!==null&&n!==void 0?n:{}),(s=d==null?void 0:d.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?w.accessToken=t.accessToken:delete w.accessToken,w}function Ik(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Rk(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var kk=class extends gk{constructor(t){super(t)}},Dk=class{constructor(t,e,n){var s,o;this.supabaseUrl=t,this.supabaseKey=e;const l=Ik(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:bk,realtime:_k,auth:lt(lt({},wk),{},{storageKey:u}),global:xk},f=Mk(n??{},d);if(this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=f.global.headers)!==null&&o!==void 0?o:{},f.accessToken)this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(y,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=f.auth)!==null&&p!==void 0?p:{},this.headers,f.global.fetch)}this.fetch=Nk(e,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(lt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&this.accessToken().then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new fM(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new uI(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new aM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:s}=await t.auth.getSession();return(e=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:s,userStorage:o,storageKey:l,flowType:u,lock:d,debug:f,throwOnError:p},y,b){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kk({url:this.authUrl.href,headers:lt(lt({},w),y),storageKey:l,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:s,userStorage:o,flowType:u,lock:d,debug:f,throwOnError:p,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new RM(this.realtimeUrl.href,lt(lt({},t),{},{params:lt(lt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Pk=(t,e,n)=>new Dk(t,e,n);function Uk(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Uk()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ch="https://jxtiqpeecojhjlkrmari.supabase.co",aT="sb_publishable_b2CsAt1J15Vo2Biyf6vr4Q_cCNZa1XJ",Ut=Ch.length>10&&aT.length>10&&Ch.startsWith("https://");Ut||console.warn("ViralThumb AI: Supabase environment variables are missing. Running in MOCK MODE.");const $e=Ut?Pk(Ch,aT):{auth:{getSession:async()=>({data:{session:null},error:null}),getUser:async()=>({data:{user:null},error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}}),signInWithPassword:async()=>({error:{message:"Supabase not configured"}}),signUp:async()=>({error:{message:"Supabase not configured"}}),signInWithOAuth:async()=>({error:{message:"Supabase not configured"}}),signOut:async()=>({error:null})},from:()=>({select:()=>({eq:()=>({single:async()=>({data:null,error:{code:"PGRST116"}}),maybeSingle:async()=>({data:null,error:null})})}),upsert:()=>({select:()=>({single:async()=>({data:null,error:null})})}),update:()=>({eq:()=>({select:()=>({single:async()=>({data:null,error:null})})})})})};async function Lk(){if(!Ut)return[{id:"mrbeast",name:"MrBeast Style (High Saturation)",description:"High contrast, bright colors, shocked face."},{id:"minimalist",name:"Minimalist Clean",description:"Simple, clean, plenty of whitespace."},{id:"gaming",name:"Gaming High Energy",description:"Action-packed, vibrant, game elements."},{id:"documentary",name:"Documentary Serious",description:"Cinematic, moody, realistic."}];try{const{data:t,error:e}=await $e.from("templates").select("*").eq("is_active",!0).order("name");return e?(console.error("Error fetching templates:",e),[]):t||[]}catch(t){return console.error("Failed to fetch templates:",t),[]}}async function Ok(t){var n,s;if(!Ut)return!1;const e=t.trim();console.log(`[isUsernameTaken] Checking availability for: "${e}"`);try{const{data:{user:o}}=await $e.auth.getUser(),l=((n=o==null?void 0:o.user_metadata)==null?void 0:n.username)||((s=o==null?void 0:o.user_metadata)==null?void 0:s.user_name);if(o&&(l==null?void 0:l.toLowerCase())===e.toLowerCase())return console.warn(`[isUsernameTaken] Username "${e}" belongs to current session user.`),!0;const{data:u,error:d}=await $e.rpc("check_username_taken",{username_check:e});if(d?console.warn("[isUsernameTaken] RPC Error:",d):console.log(`[isUsernameTaken] RPC Result: ${u}`),!d&&u!==null)return u;console.log("[isUsernameTaken] RPC failed/skipped, using fallback query...");const{data:f}=await $e.from("profiles").select("username").eq("username",e).maybeSingle();return console.log(`[isUsernameTaken] Fallback Result: ${!!f}`),!!f}catch(o){return console.error("Username check error:",o),!1}}async function lT(t,e,n,s){if(!Ut)return null;console.log(`Syncing profile for user: ${t}`);try{const{data:o,error:l}=await $e.from("profiles").select("*").eq("id",t).maybeSingle();if(l&&console.warn("Fetch profile error during sync (might be RLS):",l.message),o){if(o.username!==n||o.full_name!==s){const{data:p,error:y}=await $e.from("profiles").update({username:n||o.username,full_name:s||o.full_name,email:e||o.email}).eq("id",t).select().maybeSingle();return y?(console.error("Profile update failed:",y.message),o):p||o}return o}const u={id:t,email:e,username:n||`user_${t.substring(0,5)}`,full_name:s||"Creator",avatar_url:`https://api.dicebear.com/7.x/avataaars/svg?seed=${n||t}`,credits:50,plan:"free",role:"user"},{data:d,error:f}=await $e.from("profiles").upsert(u,{onConflict:"id"}).select().maybeSingle();return f?(console.error(" Profile provision failed:",f.message),null):d}catch(o){return console.error("Critical error in syncProfileRecord:",o),null}}async function Vk(t){if(!Ut||!t)return{id:(t==null?void 0:t.id)||"mock-id",full_name:"Creator Guest",username:"guest_creator",email:(t==null?void 0:t.email)||"guest@example.com",avatar_url:"https://api.dicebear.com/7.x/avataaars/svg?seed=guest",credits:50,plan:"free",role:"user"};try{const{data:e,error:n}=await $e.from("profiles").select("*").eq("id",t.id).maybeSingle();if(!n&&e)return e;const s=t.user_metadata||{},o=s.user_name||`user_${t.id.substring(0,5)}`,l=s.full_name||"Creator",u=await lT(t.id,t.email,o,l);return u||{id:t.id,email:t.email,username:o,full_name:l,avatar_url:`https://api.dicebear.com/7.x/avataaars/svg?seed=${o}`,credits:50,plan:"free",role:"user"}}catch(e){return console.error("getOrCreateProfile failed - returning fallback:",e),{id:t==null?void 0:t.id,email:t==null?void 0:t.email,username:"user",full_name:"Creator",credits:50,plan:"free",role:"user"}}}async function jk(t,e,n=1){var s,o;if(!Ut)return e-n;try{const{data:l,error:u}=await $e.rpc("deduct_credits",{user_id_input:t,amount:n});if(u)throw u.message.includes("Insufficient credits")||console.warn("RPC deduct_credits failed, falling back to client-side update:",u),u;return l}catch(l){if((s=l.message)!=null&&s.includes("function")&&((o=l.message)!=null&&o.includes("does not exist"))){console.warn("RPC deduct_credits not found. Using unsafe client-side update.");const{data:u,error:d}=await $e.from("profiles").update({credits:Math.max(0,e-n)}).eq("id",t).select().single();if(d)throw d;return u.credits}throw l}}async function Bk(t,e){if(!Ut)return;const{error:n}=await $e.from("thumbnails").insert(e.map(s=>({user_id:t,...s})));if(n)throw n}async function Gk(t,e,n,s=1,o,l){if(!Ut)return console.log("Supabase not configured, skipping generation save"),null;if(!t||t==="mock-id")return console.log("Invalid user ID, skipping generation save"),null;try{console.log("Attempting to save generation:",{userId:t,prompt:e.substring(0,50),outputUrl:n==null?void 0:n.substring(0,50),title:o==null?void 0:o.substring(0,20),description:l==null?void 0:l.substring(0,20)});const{data:u,error:d}=await $e.from("generations").insert({user_id:t,prompt:e,output_url:n,credits_used:s,title:o||null,description:l||null}).select().single();return d?(console.error("Error saving generation:",{message:d.message,code:d.code,details:d.details,hint:d.hint}),(d.code==="42501"||d.message.includes("row-level security"))&&console.error("RLS policy blocking insert. Make sure you've run setup-generations-table-complete.sql"),null):(console.log(" Generation saved successfully:",u),u)}catch(u){return console.error("Failed to save generation:",u),null}}async function Cp(t,e=20,n=0){if(!Ut)return[];try{const{data:s,error:o}=await $e.from("generations").select("*").eq("user_id",t).order("created_at",{ascending:!1}).range(n,n+e-1);return o?(console.error("Error fetching generations:",o),[]):s||[]}catch(s){return console.error("Failed to fetch generations:",s),[]}}async function Hk(t,e,n){if(!Ut)return console.warn("Supabase not configured, returning mock data"),{publicUrl:typeof n=="string"?n:URL.createObjectURL(n),storagePath:`mock/${t}/${e}.png`};try{let s,o="image/png";if(typeof n=="string"){const y=n.match(/^data:(.*);base64,(.*)$/);if(y){o=y[1];const b=y[2],w=atob(b),T=new Array(w.length);for(let A=0;A<w.length;A++)T[A]=w.charCodeAt(A);const E=new Uint8Array(T);s=new Blob([E],{type:o})}else throw new Error("Invalid image data format. Expected Data URL or Blob.")}else s=n,o=s.type||"image/png";const l=`${t}/${e}.png`,u="ViralThumb-AI";console.log(`Uploading to ${u}: ${l} (${s.size} bytes, ${o})`);const{data:d,error:f}=await $e.storage.from(u).upload(l,s,{contentType:o,upsert:!0,cacheControl:"3600"});if(f)throw console.error("Supabase Storage Error:",f),new Error(`Storage upload failed: ${f.message}`);const{data:{publicUrl:p}}=$e.storage.from(u).getPublicUrl(l);if(!p)throw new Error("Failed to generate public URL for uploaded image.");return console.log(" Storage upload successful:",p),{publicUrl:p,storagePath:l}}catch(s){throw console.error(" Critical Storage Failure:",s),s}}const qk=({onLogin:t,onNavigate:e})=>{const[n,s]=B.useState(!0),[o,l]=B.useState(!1),[u,d]=B.useState(null),[f,p]=B.useState(""),[y,b]=B.useState(""),[w,T]=B.useState(""),[E,A]=B.useState(""),C=async R=>{var k,N,I;if(R.preventDefault(),d(null),!Ut){t({id:"mock-id",name:E||"Guest",username:w||"guest",email:f,credits:50,plan:"free",role:"user",avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${w||"guest"}`});return}l(!0);try{if(n){const L=w.trim(),H=E.trim(),O=f.trim();if(!L||L.length<3)throw new Error("Username must be at least 3 characters.");if(!H)throw new Error("Full Name is required.");if(await Ok(L)){const{data:{user:Z}}=await $e.auth.getUser(),ye=((k=Z==null?void 0:Z.user_metadata)==null?void 0:k.username)||((N=Z==null?void 0:Z.user_metadata)==null?void 0:N.user_name);throw Z&&ye===L?new Error("You are already logged in with this username. Please refresh the page or go to Dashboard."):new Error("That username is already taken.")}console.log("Attempting sign-up for:",O);const{data:J,error:ie}=await $e.auth.signUp({email:O,password:y,options:{data:{full_name:H,user_name:L},emailRedirectTo:`${window.location.origin}${_s}`}});if(console.log("Sign-up response:",{user:(I=J==null?void 0:J.user)==null?void 0:I.id,session:!!(J!=null&&J.session),error:ie==null?void 0:ie.message}),ie)throw console.error("Sign-up error details:",ie),ie.message.includes("Email signups are disabled")?new Error("Email signups are disabled. Please enable the Email provider in Supabase Dashboard  Authentication  Providers  Email"):ie.message.includes("rate limit")||ie.message.includes("rate_limit")?new Error("Email rate limit exceeded. Please wait a few minutes, or disable email confirmation in Supabase Dashboard  Authentication  Providers  Email. You can also manually confirm users via SQL (see manually-confirm-users.sql)"):ie;if(!J.user)throw new Error("Sign-up failed: No user data returned.");if(J.user&&J.session){console.log("User auto-confirmed, creating profile...");try{const Z=await lT(J.user.id,f,w,E);console.log("Profile created successfully:",Z),await new Promise(ye=>setTimeout(ye,500))}catch(Z){console.error("DB Sync error details:",Z),console.warn("DB Sync failed, but Auth was successful. App.tsx will retry.",Z.message),await new Promise(ye=>setTimeout(ye,500))}}else J.user&&(console.log(" User created successfully!"),console.log("User ID:",J.user.id),console.log("Email:",J.user.email),console.log("Note: The database trigger should have created the profile automatically."),d(null),s(!1),p(f),b(""),setTimeout(()=>{alert("Account created successfully! You can now log in with your email and password.")},100))}else{console.log("Attempting to sign in...");const{data:L,error:H}=await $e.auth.signInWithPassword({email:f,password:y});if(H)throw H.message.includes("Invalid login credentials")?new Error("Incorrect email or password."):H.message.includes("Email not confirmed")?new Error("Please verify your email address before logging in."):H;console.log(" Login successful! Navigating to dashboard...")}}catch(L){console.error("Auth Screen Error:",L),d(L.message||"An error occurred. Check your connection.")}finally{l(!1)}};return g.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background px-6 font-sans relative overflow-hidden",children:[g.jsx("div",{className:"absolute inset-0 bg-primary/5 blur-[120px] rounded-full -z-10 animate-pulse"}),g.jsxs("div",{className:"w-full max-w-md p-10 glass rounded-[48px] border border-white/5 text-center shadow-2xl relative animate-fade-in",children:[g.jsxs("div",{className:"flex flex-col items-center gap-4 mb-10 cursor-pointer group",onClick:()=>e("landing"),children:[g.jsx("div",{className:"w-16 h-16 rounded-[22px] bg-primary flex items-center justify-center shadow-neon-strong group-hover:scale-105 transition-transform duration-500",children:g.jsx("span",{className:"material-symbols-outlined text-white text-[42px]",children:"auto_awesome"})}),g.jsxs("div",{className:"text-center",children:[g.jsx("h1",{className:"text-3xl font-black text-white uppercase tracking-tighter leading-none",children:"ViralThumb"}),g.jsx("span",{className:"text-[11px] text-text-secondary uppercase font-black tracking-[0.4em] opacity-80",children:"Studio"})]})]}),g.jsxs("div",{className:"flex bg-surface p-2 rounded-[28px] mb-10 border border-white/5",children:[g.jsx("button",{type:"button",onClick:()=>{s(!1),d(null)},className:`flex-1 py-3.5 rounded-[22px] text-xs font-black uppercase tracking-widest transition-all duration-300 ${n?"text-text-secondary hover:text-white":"bg-primary text-white shadow-neon"}`,children:"Login"}),g.jsx("button",{type:"button",onClick:()=>{s(!0),d(null)},className:`flex-1 py-3.5 rounded-[22px] text-xs font-black uppercase tracking-widest transition-all duration-300 ${n?"bg-primary text-white shadow-neon":"text-text-secondary hover:text-white"}`,children:"Sign Up"})]}),g.jsxs("form",{onSubmit:C,className:"space-y-4",children:[n&&g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsx("input",{type:"text",placeholder:"Full Name",value:E,onChange:R=>A(R.target.value),required:!0,className:"w-full h-14 px-5 bg-surface-light border border-white/5 rounded-2xl text-white placeholder:text-text-secondary/40 outline-none focus:ring-1 focus:ring-primary/50 text-sm"}),g.jsx("input",{type:"text",placeholder:"Username",value:w,onChange:R=>T(R.target.value),required:!0,className:"w-full h-14 px-5 bg-surface-light border border-white/5 rounded-2xl text-white placeholder:text-text-secondary/40 outline-none focus:ring-1 focus:ring-primary/50 text-sm"})]}),g.jsx("input",{type:"email",placeholder:"Email",value:f,onChange:R=>p(R.target.value),required:!0,className:"w-full h-14 px-5 bg-surface-light border border-white/5 rounded-2xl text-white outline-none focus:ring-1 focus:ring-primary/50 text-sm"}),g.jsx("input",{type:"password",placeholder:"Password",value:y,onChange:R=>b(R.target.value),required:!0,className:"w-full h-14 px-5 bg-surface-light border border-white/5 rounded-2xl text-white outline-none focus:ring-1 focus:ring-primary/50 text-sm"}),u&&g.jsxs("div",{className:"py-3 px-4 rounded-xl bg-pink-500/10 border border-pink-500/20 text-pink-500 text-[11px] font-black animate-shake flex flex-col gap-2",children:[g.jsx("p",{children:u}),(u.includes("already taken")||u.includes("User already registered"))&&g.jsx("button",{type:"button",onClick:()=>{s(!1),d(null)},className:"text-white underline hover:opacity-80 transition-opacity text-[10px]",children:"Already your account? Switch to Login"})]}),g.jsx("button",{type:"submit",disabled:o,className:"w-full h-16 bg-primary hover:bg-primary-hover text-white font-black rounded-2xl shadow-neon transition-all flex items-center justify-center gap-3 disabled:opacity-50 mt-4",children:o?g.jsx("span",{className:"material-symbols-outlined animate-spin text-[24px]",children:"progress_activity"}):g.jsx("span",{className:"text-sm tracking-[0.1em] uppercase",children:n?"Create My Studio":"Enter Studio"})})]}),g.jsx("p",{className:"mt-8 text-[11px] text-text-secondary font-bold",children:n?g.jsxs(g.Fragment,{children:["Already have an account? ",g.jsx("button",{onClick:()=>s(!1),className:"text-primary hover:underline font-black",children:"LOGIN HERE"})]}):g.jsxs(g.Fragment,{children:["Don't have an account? ",g.jsx("button",{onClick:()=>s(!0),className:"text-primary hover:underline font-black",children:"SIGN UP HERE"})]})}),g.jsxs("p",{className:"mt-6 text-[10px] text-text-secondary/50 font-black tracking-widest uppercase",children:["By joining, you agree to ViralThumb AI's ",g.jsx("br",{}),g.jsx("span",{className:"text-text-secondary hover:text-white underline cursor-pointer",children:"Terms of Service"})]}),Ut&&g.jsx("div",{className:"mt-10 pt-6 border-t border-white/5",children:g.jsxs("button",{type:"button",onClick:async()=>{await $e.auth.signOut(),localStorage.clear(),window.location.reload()},className:"text-[9px] uppercase tracking-widest text-text-secondary/60 hover:text-white transition-colors flex items-center justify-center gap-2 mx-auto",children:[g.jsx("span",{className:"material-symbols-outlined text-xs",children:"restart_alt"}),"Reset Session & Force Logout"]})})]})]})},zk=({user:t,onNavigate:e,onLogout:n})=>{const[s,o]=la.useState([]),[l,u]=la.useState(!0);la.useEffect(()=>{t&&t.id!=="mock-id"?d():u(!1)},[t]);const d=async()=>{if(t)try{const f=await Cp(t.id,3);o(f)}catch(f){console.error("Failed to load dashboard generations:",f)}finally{u(!1)}};return t?g.jsxs("div",{className:"flex flex-col min-h-screen",children:[g.jsx(ks,{onNavigate:e,variant:"app",user:t,onLogout:n,activePage:"dashboard"}),g.jsxs("main",{className:"flex-1 max-w-7xl mx-auto w-full px-6 py-10",children:[g.jsxs("header",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 mb-12",children:[g.jsxs("div",{className:"animate-fade-in",children:[g.jsxs("h1",{className:"text-4xl font-black mb-2",children:["Welcome back, ",t.name.split(" ")[0]," "]}),g.jsx("p",{className:"text-text-secondary",children:"Here's how your channel is performing with AI thumbnails."})]}),g.jsxs("button",{onClick:()=>e("generator"),className:"h-14 px-8 bg-primary hover:bg-primary-hover text-white font-black rounded-2xl shadow-neon flex items-center gap-2 transition-all hover:scale-105 active:scale-95",children:[g.jsx("span",{className:"material-symbols-outlined",children:"add_circle"}),"Create New Thumbnail"]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[g.jsx(jf,{label:"Generations",value:`${t.credits}/50`,sub:"Monthly quota",icon:"bolt"}),g.jsx(jf,{label:"Total Saved",value:"145",sub:"+12 this week",icon:"bookmark"}),g.jsx(jf,{label:"Storage",value:"2.4GB",sub:"Cloud sync active",icon:"cloud"}),g.jsxs("div",{className:"p-6 rounded-3xl bg-gradient-to-br from-primary/20 to-purple-800/20 border border-primary/20 relative overflow-hidden group cursor-pointer",onClick:()=>e("pricing"),children:[g.jsx("h3",{className:"font-bold mb-2",children:"Unlock 4K Export"}),g.jsx("p",{className:"text-xs text-text-secondary mb-4",children:"Upgrade to Pro for high-res exports and priority generation."}),g.jsx("span",{className:"text-xs font-black text-primary group-hover:underline",children:"Upgrade Now "})]})]}),g.jsxs("div",{className:"flex items-center justify-between mb-8",children:[g.jsx("h2",{className:"text-2xl font-bold",children:"Recent Generations"}),g.jsx("button",{onClick:()=>e("templates"),className:"text-sm font-bold text-primary hover:underline",children:"View All"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16",children:[!l&&s.map(f=>g.jsxs("div",{className:"group relative rounded-2xl overflow-hidden border border-white/5 glass",children:[g.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[g.jsx("img",{src:f.output_url,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",alt:f.prompt}),g.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3",children:[g.jsx("a",{href:f.output_url,download:`generation-${f.id}.png`,className:"w-10 h-10 rounded-xl bg-white text-black flex items-center justify-center hover:scale-110 transition-transform",children:g.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"download"})}),g.jsx("button",{onClick:()=>e("generator"),className:"w-10 h-10 rounded-xl bg-primary text-white flex items-center justify-center hover:scale-110 transition-transform",children:g.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"edit"})})]})]}),g.jsxs("div",{className:"p-4",children:[g.jsx("p",{className:"text-xs font-bold text-primary mb-1 uppercase tracking-widest",children:"AI Generated"}),g.jsx("h3",{className:"font-bold text-sm truncate",title:f.title||f.prompt,children:f.title?`"${f.title}"`:f.prompt}),f.description&&g.jsx("p",{className:"text-xs text-text-secondary mt-1 line-clamp-2",children:f.description}),g.jsx("p",{className:"text-[10px] text-text-secondary mt-2",children:new Date(f.created_at).toLocaleDateString()})]})]},f.id)),l&&[1,2,3].map(f=>g.jsx("div",{className:"aspect-video rounded-2xl bg-surface-light animate-pulse border border-white/5"},f)),!l&&s.length===0&&g.jsxs("div",{className:"aspect-video rounded-2xl border-2 border-dashed border-white/10 flex flex-col items-center justify-center text-center p-6 bg-white/5",children:[g.jsx("span",{className:"material-symbols-outlined text-4xl text-text-secondary mb-2",children:"image_not_supported"}),g.jsx("p",{className:"text-xs text-text-secondary",children:"No generations yet"})]})]}),g.jsxs("div",{className:"w-full rounded-3xl p-10 bg-gradient-to-r from-primary/20 via-surface to-surface border border-white/5 flex flex-col md:flex-row items-center justify-between gap-8",children:[g.jsxs("div",{className:"flex items-center gap-6",children:[g.jsx("div",{className:"w-16 h-16 rounded-2xl bg-primary flex items-center justify-center shadow-neon shrink-0",children:g.jsx("span",{className:"material-symbols-outlined text-white text-[32px]",children:"rocket_launch"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Join our Creator Community"}),g.jsx("p",{className:"text-text-secondary max-w-md",children:"Share your thumbnails, get feedback, and chat with 50,000+ creators on Discord."})]})]}),g.jsx("button",{className:"px-8 py-4 bg-white text-black font-black rounded-xl hover:bg-gray-100 transition-colors",children:"Join Discord"})]})]}),g.jsx(Ma,{})]}):null},jf=({label:t,value:e,sub:n,icon:s})=>g.jsxs("div",{className:"p-6 rounded-3xl bg-surface border border-white/5 shadow-lg",children:[g.jsx("div",{className:"flex justify-between items-start mb-6",children:g.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary",children:g.jsx("span",{className:"material-symbols-outlined",children:s})})}),g.jsx("p",{className:"text-xs font-bold text-text-secondary uppercase tracking-widest mb-1",children:t}),g.jsx("h4",{className:"text-2xl font-black mb-1",children:e}),g.jsx("p",{className:"text-[10px] text-primary font-bold",children:n})]});var Fk={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let $k,Jk;function Kk(){return{geminiUrl:$k,vertexUrl:Jk}}function Yk(t,e,n,s){var o,l;if(!(t!=null&&t.baseUrl)){const u=Kk();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:n:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yi{}function ne(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function m(t,e,n){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in t))if(Array.isArray(n))t[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[d])){const f=t[d];if(Array.isArray(n))for(let p=0;p<f.length;p++){const y=f[p];m(y,e.slice(l+1),n[p])}else for(const p of f)m(p,e.slice(l+1),n)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in t||(t[d]=[{}]);const f=t[d];m(f[0],e.slice(l+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const s=e[e.length-1],o=t[s];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[s]=n}function h(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return n;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in t){const u=t[l];return Array.isArray(u)?u.map(d=>h(d,e.slice(s+1),n)):n}else return n}else t=t[o]}return t}catch(s){if(s instanceof TypeError)return n;throw s}}function Xk(t,e){for(const[n,s]of Object.entries(e)){const o=n.split("."),l=s.split("."),u=new Set;let d=-1;for(let f=0;f<o.length;f++)if(o[f]==="*"){d=f;break}if(d!==-1&&l.length>d)for(let f=d;f<l.length;f++){const p=l[f];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&u.add(p)}Nh(t,o,l,0,u)}}function Nh(t,e,n,s,o){if(s>=e.length||typeof t!="object"||t===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),d=t;if(u in d&&Array.isArray(d[u]))for(const f of d[u])Nh(f,e,n,s+1,o)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,d=Object.keys(u).filter(p=>!p.startsWith("_")&&!o.has(p)),f={};for(const p of d)f[p]=u[p];for(const[p,y]of Object.entries(f)){const b=[];for(const w of n.slice(s))w==="*"?b.push(p):b.push(w);m(u,b,y)}for(const p of d)delete u[p]}}else{const u=t;l in u&&Nh(u[l],e,n,s+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Np(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wk(t){const e={},n=h(t,["operationName"]);n!=null&&m(e,["operationName"],n);const s=h(t,["resourceName"]);return s!=null&&m(e,["_url","resourceName"],s),e}function Qk(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const s=h(t,["metadata"]);s!=null&&m(e,["metadata"],s);const o=h(t,["done"]);o!=null&&m(e,["done"],o);const l=h(t,["error"]);l!=null&&m(e,["error"],l);const u=h(t,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],eD(u)),e}function Zk(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const s=h(t,["metadata"]);s!=null&&m(e,["metadata"],s);const o=h(t,["done"]);o!=null&&m(e,["done"],o);const l=h(t,["error"]);l!=null&&m(e,["error"],l);const u=h(t,["response"]);return u!=null&&m(e,["response"],tD(u)),e}function eD(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>nD(u))),m(e,["generatedVideos"],l)}const s=h(t,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=h(t,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function tD(t){const e={},n=h(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>iD(u))),m(e,["generatedVideos"],l)}const s=h(t,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=h(t,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function nD(t){const e={},n=h(t,["video"]);return n!=null&&m(e,["video"],uD(n)),e}function iD(t){const e={},n=h(t,["_self"]);return n!=null&&m(e,["video"],cD(n)),e}function sD(t){const e={},n=h(t,["operationName"]);return n!=null&&m(e,["_url","operationName"],n),e}function rD(t){const e={},n=h(t,["operationName"]);return n!=null&&m(e,["_url","operationName"],n),e}function oD(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const s=h(t,["metadata"]);s!=null&&m(e,["metadata"],s);const o=h(t,["done"]);o!=null&&m(e,["done"],o);const l=h(t,["error"]);l!=null&&m(e,["error"],l);const u=h(t,["response"]);return u!=null&&m(e,["response"],aD(u)),e}function aD(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["parent"]);s!=null&&m(e,["parent"],s);const o=h(t,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function uT(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const s=h(t,["metadata"]);s!=null&&m(e,["metadata"],s);const o=h(t,["done"]);o!=null&&m(e,["done"],o);const l=h(t,["error"]);l!=null&&m(e,["error"],l);const u=h(t,["response"]);return u!=null&&m(e,["response"],lD(u)),e}function lD(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["parent"]);s!=null&&m(e,["parent"],s);const o=h(t,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function uD(t){const e={},n=h(t,["uri"]);n!=null&&m(e,["uri"],n);const s=h(t,["encodedVideo"]);s!=null&&m(e,["videoBytes"],Np(s));const o=h(t,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function cD(t){const e={},n=h(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const s=h(t,["bytesBase64Encoded"]);s!=null&&m(e,["videoBytes"],Np(s));const o=h(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cx;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Cx||(Cx={}));var Nx;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Nx||(Nx={}));var Rx;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Rx||(Rx={}));var Vt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Vt||(Vt={}));var Mx;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Mx||(Mx={}));var Ix;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ix||(Ix={}));var kx;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(kx||(kx={}));var Dx;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Dx||(Dx={}));var Px;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Px||(Px={}));var Ux;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Ux||(Ux={}));var Gr;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Gr||(Gr={}));var Lx;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Lx||(Lx={}));var Hr;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Hr||(Hr={}));var Ox;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Ox||(Ox={}));var Vx;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Vx||(Vx={}));var jx;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(jx||(jx={}));var Bx;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Bx||(Bx={}));var Gx;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Gx||(Gx={}));var Hx;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Hx||(Hx={}));var Au;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Au||(Au={}));var qx;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(qx||(qx={}));var zx;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(zx||(zx={}));var Fx;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Fx||(Fx={}));var Rh;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Rh||(Rh={}));var $x;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})($x||($x={}));var Jx;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Jx||(Jx={}));var Kx;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Kx||(Kx={}));var Yx;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Yx||(Yx={}));var Xx;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Xx||(Xx={}));var Wx;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Wx||(Wx={}));var Qx;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Qx||(Qx={}));var Zx;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Zx||(Zx={}));var eb;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(eb||(eb={}));var tb;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(tb||(tb={}));var nb;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(nb||(nb={}));var ib;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ib||(ib={}));var sb;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(sb||(sb={}));var rb;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(rb||(rb={}));var ob;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(ob||(ob={}));var ab;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(ab||(ab={}));var lb;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(lb||(lb={}));var ub;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ub||(ub={}));var cb;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(cb||(cb={}));var db;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(db||(db={}));var fb;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(fb||(fb={}));var hb;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(hb||(hb={}));var pb;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(pb||(pb={}));var mb;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(mb||(mb={}));var gb;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(gb||(gb={}));var yb;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(yb||(yb={}));var vb;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(vb||(vb={}));var xb;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(xb||(xb={}));var bb;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(bb||(bb={}));var wb;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(wb||(wb={}));var _b;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(_b||(_b={}));var qr;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(qr||(qr={}));class Mh{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ta{get text(){var e,n,s,o,l,u,d,f;if(((o=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",y=!1;const b=[];for(const w of(f=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[T,E]of Object.entries(w))T!=="text"&&T!=="thought"&&T!=="thoughtSignature"&&(E!==null||E!==void 0)&&b.push(T);if(typeof w.text=="string"){if(typeof w.thought=="boolean"&&w.thought)continue;y=!0,p+=w.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?p:void 0}get data(){var e,n,s,o,l,u,d,f;if(((o=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const y=[];for(const b of(f=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[w,T]of Object.entries(b))w!=="inlineData"&&(T!==null||T!==void 0)&&y.push(w);b.inlineData&&typeof b.inlineData.data=="string"&&(p+=atob(b.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,s,o,l,u,d,f;if(((o=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(f=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,s,o,l,u,d,f,p;if(((o=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(f=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((y==null?void 0:y.length)!==0)return(p=y==null?void 0:y[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,s,o,l,u,d,f,p;if(((o=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(f=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((y==null?void 0:y.length)!==0)return(p=y==null?void 0:y[0])===null||p===void 0?void 0:p.output}}class Tb{}class Sb{}class dD{}class fD{}class hD{}class pD{}class Eb{}class Ab{}class Cb{}class mD{}class Cu{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Cu;let o;const l=e;return n?o=Zk(l):o=Qk(l),Object.assign(s,o),s}}class Nb{}class Rb{}class Mb{}class Ib{}class gD{}class yD{}class vD{}class Rp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Rp,l=oD(e);return Object.assign(s,l),s}}class xD{}class bD{}class wD{}class kb{}class _D{get text(){var e,n,s;let o="",l=!1;const u=[];for(const d of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[f,p]of Object.entries(d))f!=="text"&&f!=="thought"&&p!==null&&u.push(f);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,n,s;let o="";const l=[];for(const u of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[d,f]of Object.entries(u))d!=="inlineData"&&f!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class TD{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Mp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Mp,l=uT(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Le(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function cT(t,e){const n=Le(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function dT(t){return Array.isArray(t)?t.map(e=>Nu(e)):[Nu(t)]}function Nu(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function fT(t){const e=Nu(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function hT(t){const e=Nu(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Db(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function pT(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Db(e)):[Db(t)]}function Ih(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Pb(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Ub(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function jt(t){if(t==null)throw new Error("ContentUnion is required");return Ih(t)?t:{role:"user",parts:pT(t)}}function Ip(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=jt(n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=jt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>jt(n)):[jt(e)]}function _n(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Pb(t)||Ub(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[jt(t)]}const e=[],n=[],s=Ih(t[0]);for(const o of t){const l=Ih(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(Pb(o)||Ub(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return s||e.push({role:"user",parts:pT(n)}),e}function SD(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values(Vt).includes(n[0].toUpperCase())?n[0].toUpperCase():Vt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values(Vt).includes(s.toUpperCase())?s.toUpperCase():Vt.TYPE_UNSPECIFIED})}}function Jr(t){const e={},n=["items"],s=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&SD(t.type,e);for(const[u,d]of Object.entries(t))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Vt).includes(d.toUpperCase())?d.toUpperCase():Vt.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=Jr(d);else if(s.includes(u)){const f=[];for(const p of d){if(p.type=="null"){e.nullable=!0;continue}f.push(Jr(p))}e[u]=f}else if(o.includes(u)){const f={};for(const[p,y]of Object.entries(d))f[p]=Jr(y);e[u]=f}else{if(u==="additionalProperties")continue;e[u]=d}return e}function kp(t){return Jr(t)}function Dp(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Pp(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function eo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Jr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Jr(e.response));return t}function to(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function ED(t,e,n,s=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function vi(t,e){if(typeof e!="string")throw new Error("name must be a string");return ED(t,e,"cachedContents")}function mT(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Wi(t){return Np(t)}function AD(t){return t!=null&&typeof t=="object"&&"name"in t}function CD(t){return t!=null&&typeof t=="object"&&"video"in t}function ND(t){return t!=null&&typeof t=="object"&&"uri"in t}function gT(t){var e;let n;if(AD(t)&&(n=t.name),!(ND(t)&&(n=t.uri,n===void 0))&&!(CD(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function yT(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function vT(t){for(const e of["models","tunedModels","publisherModels"])if(RD(t,e))return t[e];return[]}function RD(t,e){return t!==null&&typeof t=="object"&&e in t}function MD(t,e={}){const n=t,s={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(s.responseJsonSchema=n.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function ID(t,e={}){const n=[],s=new Set;for(const o of t){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=MD(o,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function xT(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const s=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function kD(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function bT(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let l=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const f=u.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function no(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function wT(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DD(t){const e={},n=h(t,["responsesFile"]);n!=null&&m(e,["fileName"],n);const s=h(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>hP(u))),m(e,["inlinedResponses"],l)}const o=h(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["inlinedEmbedContentResponses"],l)}return e}function PD(t){const e={},n=h(t,["predictionsFormat"]);n!=null&&m(e,["format"],n);const s=h(t,["gcsDestination","outputUriPrefix"]);s!=null&&m(e,["gcsUri"],s);const o=h(t,["bigqueryDestination","outputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function UD(t){const e={},n=h(t,["format"]);n!=null&&m(e,["predictionsFormat"],n);const s=h(t,["gcsUri"]);s!=null&&m(e,["gcsDestination","outputUriPrefix"],s);const o=h(t,["bigqueryUri"]);if(o!=null&&m(e,["bigqueryDestination","outputUri"],o),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function pu(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const s=h(t,["metadata","displayName"]);s!=null&&m(e,["displayName"],s);const o=h(t,["metadata","state"]);o!=null&&m(e,["state"],wT(o));const l=h(t,["metadata","createTime"]);l!=null&&m(e,["createTime"],l);const u=h(t,["metadata","endTime"]);u!=null&&m(e,["endTime"],u);const d=h(t,["metadata","updateTime"]);d!=null&&m(e,["updateTime"],d);const f=h(t,["metadata","model"]);f!=null&&m(e,["model"],f);const p=h(t,["metadata","output"]);return p!=null&&m(e,["dest"],DD(bT(p))),e}function kh(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const s=h(t,["displayName"]);s!=null&&m(e,["displayName"],s);const o=h(t,["state"]);o!=null&&m(e,["state"],wT(o));const l=h(t,["error"]);l!=null&&m(e,["error"],l);const u=h(t,["createTime"]);u!=null&&m(e,["createTime"],u);const d=h(t,["startTime"]);d!=null&&m(e,["startTime"],d);const f=h(t,["endTime"]);f!=null&&m(e,["endTime"],f);const p=h(t,["updateTime"]);p!=null&&m(e,["updateTime"],p);const y=h(t,["model"]);y!=null&&m(e,["model"],y);const b=h(t,["inputConfig"]);b!=null&&m(e,["src"],LD(b));const w=h(t,["outputConfig"]);w!=null&&m(e,["dest"],PD(bT(w)));const T=h(t,["completionStats"]);return T!=null&&m(e,["completionStats"],T),e}function LD(t){const e={},n=h(t,["instancesFormat"]);n!=null&&m(e,["format"],n);const s=h(t,["gcsSource","uris"]);s!=null&&m(e,["gcsUri"],s);const o=h(t,["bigquerySource","inputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function OD(t,e){const n={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=h(e,["fileName"]);s!=null&&m(n,["fileName"],s);const o=h(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>fP(t,u))),m(n,["requests","requests"],l)}return n}function VD(t){const e={},n=h(t,["format"]);n!=null&&m(e,["instancesFormat"],n);const s=h(t,["gcsUri"]);s!=null&&m(e,["gcsSource","uris"],s);const o=h(t,["bigqueryUri"]);if(o!=null&&m(e,["bigquerySource","inputUri"],o),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function jD(t){const e={},n=h(t,["data"]);if(n!=null&&m(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function BD(t,e){const n={},s=h(e,["name"]);return s!=null&&m(n,["_url","name"],no(t,s)),n}function GD(t,e){const n={},s=h(e,["name"]);return s!=null&&m(n,["_url","name"],no(t,s)),n}function HD(t){const e={},n=h(t,["content"]);n!=null&&m(e,["content"],n);const s=h(t,["citationMetadata"]);s!=null&&m(e,["citationMetadata"],qD(s));const o=h(t,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const l=h(t,["finishReason"]);l!=null&&m(e,["finishReason"],l);const u=h(t,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const d=h(t,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const f=h(t,["index"]);f!=null&&m(e,["index"],f);const p=h(t,["logprobsResult"]);p!=null&&m(e,["logprobsResult"],p);const y=h(t,["safetyRatings"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(T=>T)),m(e,["safetyRatings"],w)}const b=h(t,["urlContextMetadata"]);return b!=null&&m(e,["urlContextMetadata"],b),e}function qD(t){const e={},n=h(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["citations"],s)}return e}function _T(t){const e={},n=h(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>bP(l))),m(e,["parts"],o)}const s=h(t,["role"]);return s!=null&&m(e,["role"],s),e}function zD(t,e){const n={},s=h(t,["displayName"]);if(e!==void 0&&s!=null&&m(e,["batch","displayName"],s),h(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function FD(t,e){const n={},s=h(t,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=h(t,["dest"]);return e!==void 0&&o!=null&&m(e,["outputConfig"],UD(kD(o))),n}function Lb(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","model"],Le(t,s));const o=h(e,["src"]);o!=null&&m(n,["batch","inputConfig"],OD(t,xT(t,o)));const l=h(e,["config"]);return l!=null&&zD(l,n),n}function $D(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["model"],Le(t,s));const o=h(e,["src"]);o!=null&&m(n,["inputConfig"],VD(xT(t,o)));const l=h(e,["config"]);return l!=null&&FD(l,n),n}function JD(t,e){const n={},s=h(t,["displayName"]);return e!==void 0&&s!=null&&m(e,["batch","displayName"],s),n}function KD(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","model"],Le(t,s));const o=h(e,["src"]);o!=null&&m(n,["batch","inputConfig"],tP(t,o));const l=h(e,["config"]);return l!=null&&JD(l,n),n}function YD(t,e){const n={},s=h(e,["name"]);return s!=null&&m(n,["_url","name"],no(t,s)),n}function XD(t,e){const n={},s=h(e,["name"]);return s!=null&&m(n,["_url","name"],no(t,s)),n}function WD(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["name"]);s!=null&&m(e,["name"],s);const o=h(t,["done"]);o!=null&&m(e,["done"],o);const l=h(t,["error"]);return l!=null&&m(e,["error"],l),e}function QD(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["name"]);s!=null&&m(e,["name"],s);const o=h(t,["done"]);o!=null&&m(e,["done"],o);const l=h(t,["error"]);return l!=null&&m(e,["error"],l),e}function ZD(t,e){const n={},s=h(e,["contents"]);if(s!=null){let l=Ip(t,s);Array.isArray(l)&&(l=l.map(u=>u)),m(n,["requests[]","request","content"],l)}const o=h(e,["config"]);return o!=null&&(m(n,["_self"],eP(o,n)),Xk(n,{"requests[].*":"requests[].request.*"})),n}function eP(t,e){const n={},s=h(t,["taskType"]);e!==void 0&&s!=null&&m(e,["requests[]","taskType"],s);const o=h(t,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const l=h(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function tP(t,e){const n={},s=h(e,["fileName"]);s!=null&&m(n,["file_name"],s);const o=h(e,["inlinedRequests"]);return o!=null&&m(n,["requests"],ZD(t,o)),n}function nP(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const s=h(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function iP(t){const e={},n=h(t,["id"]);n!=null&&m(e,["id"],n);const s=h(t,["args"]);s!=null&&m(e,["args"],s);const o=h(t,["name"]);if(o!=null&&m(e,["name"],o),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sP(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const s=h(t,["allowedFunctionNames"]);if(s!=null&&m(e,["allowedFunctionNames"],s),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function rP(t,e,n){const s={},o=h(e,["systemInstruction"]);n!==void 0&&o!=null&&m(n,["systemInstruction"],_T(jt(o)));const l=h(e,["temperature"]);l!=null&&m(s,["temperature"],l);const u=h(e,["topP"]);u!=null&&m(s,["topP"],u);const d=h(e,["topK"]);d!=null&&m(s,["topK"],d);const f=h(e,["candidateCount"]);f!=null&&m(s,["candidateCount"],f);const p=h(e,["maxOutputTokens"]);p!=null&&m(s,["maxOutputTokens"],p);const y=h(e,["stopSequences"]);y!=null&&m(s,["stopSequences"],y);const b=h(e,["responseLogprobs"]);b!=null&&m(s,["responseLogprobs"],b);const w=h(e,["logprobs"]);w!=null&&m(s,["logprobs"],w);const T=h(e,["presencePenalty"]);T!=null&&m(s,["presencePenalty"],T);const E=h(e,["frequencyPenalty"]);E!=null&&m(s,["frequencyPenalty"],E);const A=h(e,["seed"]);A!=null&&m(s,["seed"],A);const C=h(e,["responseMimeType"]);C!=null&&m(s,["responseMimeType"],C);const R=h(e,["responseSchema"]);R!=null&&m(s,["responseSchema"],kp(R));const k=h(e,["responseJsonSchema"]);if(k!=null&&m(s,["responseJsonSchema"],k),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=h(e,["safetySettings"]);if(n!==void 0&&N!=null){let ke=N;Array.isArray(ke)&&(ke=ke.map(Je=>wP(Je))),m(n,["safetySettings"],ke)}const I=h(e,["tools"]);if(n!==void 0&&I!=null){let ke=to(I);Array.isArray(ke)&&(ke=ke.map(Je=>TP(eo(Je)))),m(n,["tools"],ke)}const L=h(e,["toolConfig"]);if(n!==void 0&&L!=null&&m(n,["toolConfig"],_P(L)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=h(e,["cachedContent"]);n!==void 0&&H!=null&&m(n,["cachedContent"],vi(t,H));const O=h(e,["responseModalities"]);O!=null&&m(s,["responseModalities"],O);const W=h(e,["mediaResolution"]);W!=null&&m(s,["mediaResolution"],W);const J=h(e,["speechConfig"]);if(J!=null&&m(s,["speechConfig"],Dp(J)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ie=h(e,["thinkingConfig"]);ie!=null&&m(s,["thinkingConfig"],ie);const Z=h(e,["imageConfig"]);Z!=null&&m(s,["imageConfig"],dP(Z));const ye=h(e,["enableEnhancedCivicAnswers"]);return ye!=null&&m(s,["enableEnhancedCivicAnswers"],ye),s}function oP(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["candidates"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(p=>HD(p))),m(e,["candidates"],f)}const o=h(t,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const l=h(t,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const u=h(t,["responseId"]);u!=null&&m(e,["responseId"],u);const d=h(t,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function aP(t,e){const n={},s=h(e,["name"]);return s!=null&&m(n,["_url","name"],no(t,s)),n}function lP(t,e){const n={},s=h(e,["name"]);return s!=null&&m(n,["_url","name"],no(t,s)),n}function uP(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function cP(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function dP(t){const e={},n=h(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const s=h(t,["imageSize"]);if(s!=null&&m(e,["imageSize"],s),h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function fP(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["request","model"],Le(t,s));const o=h(e,["contents"]);if(o!=null){let d=_n(o);Array.isArray(d)&&(d=d.map(f=>_T(f))),m(n,["request","contents"],d)}const l=h(e,["metadata"]);l!=null&&m(n,["metadata"],l);const u=h(e,["config"]);return u!=null&&m(n,["request","generationConfig"],rP(t,u,h(n,["request"],{}))),n}function hP(t){const e={},n=h(t,["response"]);n!=null&&m(e,["response"],oP(n));const s=h(t,["error"]);return s!=null&&m(e,["error"],s),e}function pP(t,e){const n={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=h(t,["pageToken"]);if(e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),h(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function mP(t,e){const n={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=h(t,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const l=h(t,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),n}function gP(t){const e={},n=h(t,["config"]);return n!=null&&pP(n,e),e}function yP(t){const e={},n=h(t,["config"]);return n!=null&&mP(n,e),e}function vP(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=h(t,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>pu(u))),m(e,["batchJobs"],l)}return e}function xP(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=h(t,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>kh(u))),m(e,["batchJobs"],l)}return e}function bP(t){const e={},n=h(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const s=h(t,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=h(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=h(t,["fileData"]);l!=null&&m(e,["fileData"],nP(l));const u=h(t,["functionCall"]);u!=null&&m(e,["functionCall"],iP(u));const d=h(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const f=h(t,["inlineData"]);f!=null&&m(e,["inlineData"],jD(f));const p=h(t,["text"]);p!=null&&m(e,["text"],p);const y=h(t,["thought"]);y!=null&&m(e,["thought"],y);const b=h(t,["thoughtSignature"]);b!=null&&m(e,["thoughtSignature"],b);const w=h(t,["videoMetadata"]);return w!=null&&m(e,["videoMetadata"],w),e}function wP(t){const e={},n=h(t,["category"]);if(n!=null&&m(e,["category"],n),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=h(t,["threshold"]);return s!=null&&m(e,["threshold"],s),e}function _P(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],sP(n));const s=h(t,["retrievalConfig"]);return s!=null&&m(e,["retrievalConfig"],s),e}function TP(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(b=>b)),m(e,["functionDeclarations"],y)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=h(t,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=h(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const u=h(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],uP(d));const f=h(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],cP(f));const p=h(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(mi||(mi={}));class Ds{constructor(e,n,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,o)}init(e,n,s){var o,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SP extends yi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ds(mi.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Lb(this.apiClient,e),s=n._url,o=ne("{model}:batchGenerateContent",s),d=n.batch.inputConfig.requests,f=d.requests,p=[];for(const y of f){const b=Object.assign({},y);if(b.systemInstruction){const w=b.systemInstruction;delete b.systemInstruction;const T=b.request;T.systemInstruction=w,b.request=T}p.push(b)}return d.requests=p,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const s=n?Object.assign({},n):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(u)s.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=$D(this.apiClient,e);return d=ne("batchPredictionJobs",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>kh(y))}else{const p=Lb(this.apiClient,e);return d=ne("{model}:batchGenerateContent",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>pu(y))}}async createEmbeddingsInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=KD(this.apiClient,e);return l=ne("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>pu(f))}}async get(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=lP(this.apiClient,e);return d=ne("batchPredictionJobs/{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>kh(y))}else{const p=aP(this.apiClient,e);return d=ne("batches/{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>pu(y))}}async cancel(e){var n,s,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const f=GD(this.apiClient,e);u=ne("batchPredictionJobs/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const f=BD(this.apiClient,e);u=ne("batches/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=yP(e);return d=ne("batchPredictionJobs",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=xP(y),w=new kb;return Object.assign(w,b),w})}else{const p=gP(e);return d=ne("batches",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=vP(y),w=new kb;return Object.assign(w,b),w})}}async delete(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=XD(this.apiClient,e);return d=ne("batchPredictionJobs/{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>QD(y))}else{const p=YD(this.apiClient,e);return d=ne("batches/{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>WD(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EP(t){const e={},n=h(t,["data"]);if(n!=null&&m(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function Ob(t){const e={},n=h(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>KP(l))),m(e,["parts"],o)}const s=h(t,["role"]);return s!=null&&m(e,["role"],s),e}function AP(t,e){const n={},s=h(t,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=h(t,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const l=h(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const u=h(t,["contents"]);if(e!==void 0&&u!=null){let y=_n(u);Array.isArray(y)&&(y=y.map(b=>Ob(b))),m(e,["contents"],y)}const d=h(t,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],Ob(jt(d)));const f=h(t,["tools"]);if(e!==void 0&&f!=null){let y=f;Array.isArray(y)&&(y=y.map(b=>XP(b))),m(e,["tools"],y)}const p=h(t,["toolConfig"]);if(e!==void 0&&p!=null&&m(e,["toolConfig"],YP(p)),h(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function CP(t,e){const n={},s=h(t,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=h(t,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const l=h(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const u=h(t,["contents"]);if(e!==void 0&&u!=null){let b=_n(u);Array.isArray(b)&&(b=b.map(w=>w)),m(e,["contents"],b)}const d=h(t,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],jt(d));const f=h(t,["tools"]);if(e!==void 0&&f!=null){let b=f;Array.isArray(b)&&(b=b.map(w=>WP(w))),m(e,["tools"],b)}const p=h(t,["toolConfig"]);e!==void 0&&p!=null&&m(e,["toolConfig"],p);const y=h(t,["kmsKeyName"]);return e!==void 0&&y!=null&&m(e,["encryption_spec","kmsKeyName"],y),n}function NP(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["model"],cT(t,s));const o=h(e,["config"]);return o!=null&&AP(o,n),n}function RP(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["model"],cT(t,s));const o=h(e,["config"]);return o!=null&&CP(o,n),n}function MP(t,e){const n={},s=h(e,["name"]);return s!=null&&m(n,["_url","name"],vi(t,s)),n}function IP(t,e){const n={},s=h(e,["name"]);return s!=null&&m(n,["_url","name"],vi(t,s)),n}function kP(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function DP(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function PP(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const s=h(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function UP(t){const e={},n=h(t,["id"]);n!=null&&m(e,["id"],n);const s=h(t,["args"]);s!=null&&m(e,["args"],s);const o=h(t,["name"]);if(o!=null&&m(e,["name"],o),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function LP(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const s=h(t,["allowedFunctionNames"]);if(s!=null&&m(e,["allowedFunctionNames"],s),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function OP(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&m(e,["description"],n);const s=h(t,["name"]);s!=null&&m(e,["name"],s);const o=h(t,["parameters"]);o!=null&&m(e,["parameters"],o);const l=h(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const u=h(t,["response"]);u!=null&&m(e,["response"],u);const d=h(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function VP(t,e){const n={},s=h(e,["name"]);return s!=null&&m(n,["_url","name"],vi(t,s)),n}function jP(t,e){const n={},s=h(e,["name"]);return s!=null&&m(n,["_url","name"],vi(t,s)),n}function BP(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function GP(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function HP(t,e){const n={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=h(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),n}function qP(t,e){const n={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=h(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),n}function zP(t){const e={},n=h(t,["config"]);return n!=null&&HP(n,e),e}function FP(t){const e={},n=h(t,["config"]);return n!=null&&qP(n,e),e}function $P(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=h(t,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["cachedContents"],l)}return e}function JP(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=h(t,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["cachedContents"],l)}return e}function KP(t){const e={},n=h(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const s=h(t,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=h(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=h(t,["fileData"]);l!=null&&m(e,["fileData"],PP(l));const u=h(t,["functionCall"]);u!=null&&m(e,["functionCall"],UP(u));const d=h(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const f=h(t,["inlineData"]);f!=null&&m(e,["inlineData"],EP(f));const p=h(t,["text"]);p!=null&&m(e,["text"],p);const y=h(t,["thought"]);y!=null&&m(e,["thought"],y);const b=h(t,["thoughtSignature"]);b!=null&&m(e,["thoughtSignature"],b);const w=h(t,["videoMetadata"]);return w!=null&&m(e,["videoMetadata"],w),e}function YP(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],LP(n));const s=h(t,["retrievalConfig"]);return s!=null&&m(e,["retrievalConfig"],s),e}function XP(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(b=>b)),m(e,["functionDeclarations"],y)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=h(t,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=h(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const u=h(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],BP(d));const f=h(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],GP(f));const p=h(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}function WP(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let b=n;Array.isArray(b)&&(b=b.map(w=>OP(w))),m(e,["functionDeclarations"],b)}const s=h(t,["retrieval"]);s!=null&&m(e,["retrieval"],s);const o=h(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const l=h(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=h(t,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=h(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const f=h(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],f);const p=h(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],p);const y=h(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function QP(t,e){const n={},s=h(t,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=h(t,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),n}function ZP(t,e){const n={},s=h(t,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=h(t,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),n}function e2(t,e){const n={},s=h(e,["name"]);s!=null&&m(n,["_url","name"],vi(t,s));const o=h(e,["config"]);return o!=null&&QP(o,n),n}function t2(t,e){const n={},s=h(e,["name"]);s!=null&&m(n,["_url","name"],vi(t,s));const o=h(e,["config"]);return o!=null&&ZP(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class n2 extends yi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ds(mi.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=RP(this.apiClient,e);return d=ne("cachedContents",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const p=NP(this.apiClient,e);return d=ne("cachedContents",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async get(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=jP(this.apiClient,e);return d=ne("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const p=VP(this.apiClient,e);return d=ne("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async delete(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=IP(this.apiClient,e);return d=ne("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=DP(y),w=new Mb;return Object.assign(w,b),w})}else{const p=MP(this.apiClient,e);return d=ne("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=kP(y),w=new Mb;return Object.assign(w,b),w})}}async update(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=t2(this.apiClient,e);return d=ne("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const p=e2(this.apiClient,e);return d=ne("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async listInternal(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=FP(e);return d=ne("cachedContents",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=JP(y),w=new Ib;return Object.assign(w,b),w})}else{const p=zP(e);return d=ne("cachedContents",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=$P(y),w=new Ib;return Object.assign(w,b),w})}}}function Ru(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]]);return n}function Vb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ge(t){return this instanceof ge?(this.v=t,this):new ge(t)}function Un(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(T){return function(E){return Promise.resolve(E).then(T,b)}}function d(T,E){s[T]&&(o[T]=function(A){return new Promise(function(C,R){l.push([T,A,C,R])>1||f(T,A)})},E&&(o[T]=E(o[T])))}function f(T,E){try{p(s[T](E))}catch(A){w(l[0][3],A)}}function p(T){T.value instanceof ge?Promise.resolve(T.value.v).then(y,b):w(l[0][2],T)}function y(T){f("next",T)}function b(T){f("throw",T)}function w(T,E){T(E),l.shift(),l.length&&f(l[0][0],l[0][1])}}function Ln(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Vb=="function"?Vb(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(l){n[l]=t[l]&&function(u){return new Promise(function(d,f){u=t[l](u),o(d,f,u.done,u.value)})}}function o(l,u,d,f){Promise.resolve(f).then(function(p){l({value:p,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i2(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:TT(n)}function TT(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function s2(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function jb(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const o=[];let l=!0;for(;s<n&&t[s].role==="model";)o.push(t[s]),l&&!TT(t[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class r2{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new o2(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class o2{constructor(e,n,s,o={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),s2(l)}async sendMessage(e){var n;await this.sendPromise;const s=jt(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,u,d;const f=await o,p=(u=(l=f.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,y=f.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let w=[];y!=null&&(w=(d=y.slice(b))!==null&&d!==void 0?d:[]);const T=p?[p]:[];this.recordHistory(s,T,w)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const s=jt(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const n=e?jb(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Un(this,arguments,function*(){var o,l,u,d,f,p;const y=[];try{for(var b=!0,w=Ln(e),T;T=yield ge(w.next()),o=T.done,!o;b=!0){d=T.value,b=!1;const E=d;if(i2(E)){const A=(p=(f=E.candidates)===null||f===void 0?void 0:f[0])===null||p===void 0?void 0:p.content;A!==void 0&&y.push(A)}yield yield ge(E)}}catch(E){l={error:E}}finally{try{!b&&!o&&(u=w.return)&&(yield ge(u.call(w)))}finally{if(l)throw l.error}}this.recordHistory(n,y)})}recordHistory(e,n,s){let o=[];n.length>0&&n.every(l=>l.role!==void 0)?o=n:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...jb(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ju extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ju.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a2(t){const e={},n=h(t,["file"]);return n!=null&&m(e,["file"],n),e}function l2(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function u2(t){const e={},n=h(t,["name"]);return n!=null&&m(e,["_url","file"],gT(n)),e}function c2(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function d2(t){const e={},n=h(t,["name"]);return n!=null&&m(e,["_url","file"],gT(n)),e}function f2(t,e){const n={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=h(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),n}function h2(t){const e={},n=h(t,["config"]);return n!=null&&f2(n,e),e}function p2(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=h(t,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m2 extends yi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ds(mi.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=h2(e);return l=ne("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:f.headers},y})),o.then(f=>{const p=p2(f),y=new xD;return Object.assign(y,p),y})}}async createInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=a2(e);return l=ne("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=l2(f),y=new bD;return Object.assign(y,p),y})}}async get(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=d2(e);return l=ne("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=u2(e);return l=ne("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:f.headers},y})),o.then(f=>{const p=c2(f),y=new wD;return Object.assign(y,p),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mu(t){const e={},n=h(t,["data"]);if(n!=null&&m(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function g2(t){const e={},n=h(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>k2(l))),m(e,["parts"],o)}const s=h(t,["role"]);return s!=null&&m(e,["role"],s),e}function y2(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const s=h(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function v2(t){const e={},n=h(t,["id"]);n!=null&&m(e,["id"],n);const s=h(t,["args"]);s!=null&&m(e,["args"],s);const o=h(t,["name"]);if(o!=null&&m(e,["name"],o),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function x2(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&m(e,["description"],n);const s=h(t,["name"]);s!=null&&m(e,["name"],s);const o=h(t,["parameters"]);o!=null&&m(e,["parameters"],o);const l=h(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const u=h(t,["response"]);u!=null&&m(e,["response"],u);const d=h(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function b2(t){const e={},n=h(t,["modelSelectionConfig"]);n!=null&&m(e,["modelConfig"],n);const s=h(t,["responseJsonSchema"]);s!=null&&m(e,["responseJsonSchema"],s);const o=h(t,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const l=h(t,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const u=h(t,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const d=h(t,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const f=h(t,["logprobs"]);f!=null&&m(e,["logprobs"],f);const p=h(t,["maxOutputTokens"]);p!=null&&m(e,["maxOutputTokens"],p);const y=h(t,["mediaResolution"]);y!=null&&m(e,["mediaResolution"],y);const b=h(t,["presencePenalty"]);b!=null&&m(e,["presencePenalty"],b);const w=h(t,["responseLogprobs"]);w!=null&&m(e,["responseLogprobs"],w);const T=h(t,["responseMimeType"]);T!=null&&m(e,["responseMimeType"],T);const E=h(t,["responseModalities"]);E!=null&&m(e,["responseModalities"],E);const A=h(t,["responseSchema"]);A!=null&&m(e,["responseSchema"],A);const C=h(t,["routingConfig"]);C!=null&&m(e,["routingConfig"],C);const R=h(t,["seed"]);R!=null&&m(e,["seed"],R);const k=h(t,["speechConfig"]);k!=null&&m(e,["speechConfig"],k);const N=h(t,["stopSequences"]);N!=null&&m(e,["stopSequences"],N);const I=h(t,["temperature"]);I!=null&&m(e,["temperature"],I);const L=h(t,["thinkingConfig"]);L!=null&&m(e,["thinkingConfig"],L);const H=h(t,["topK"]);H!=null&&m(e,["topK"],H);const O=h(t,["topP"]);if(O!=null&&m(e,["topP"],O),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function w2(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function _2(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function T2(t,e){const n={},s=h(t,["generationConfig"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig"],s);const o=h(t,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const l=h(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const u=h(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=h(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const f=h(t,["maxOutputTokens"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","maxOutputTokens"],f);const p=h(t,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const y=h(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const b=h(t,["speechConfig"]);e!==void 0&&b!=null&&m(e,["setup","generationConfig","speechConfig"],Pp(b));const w=h(t,["thinkingConfig"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","thinkingConfig"],w);const T=h(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],T);const E=h(t,["systemInstruction"]);e!==void 0&&E!=null&&m(e,["setup","systemInstruction"],g2(jt(E)));const A=h(t,["tools"]);if(e!==void 0&&A!=null){let H=to(A);Array.isArray(H)&&(H=H.map(O=>P2(eo(O)))),m(e,["setup","tools"],H)}const C=h(t,["sessionResumption"]);e!==void 0&&C!=null&&m(e,["setup","sessionResumption"],D2(C));const R=h(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],R);const k=h(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&m(e,["setup","outputAudioTranscription"],k);const N=h(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&m(e,["setup","realtimeInputConfig"],N);const I=h(t,["contextWindowCompression"]);e!==void 0&&I!=null&&m(e,["setup","contextWindowCompression"],I);const L=h(t,["proactivity"]);if(e!==void 0&&L!=null&&m(e,["setup","proactivity"],L),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function S2(t,e){const n={},s=h(t,["generationConfig"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig"],b2(s));const o=h(t,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const l=h(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const u=h(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=h(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const f=h(t,["maxOutputTokens"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","maxOutputTokens"],f);const p=h(t,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const y=h(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const b=h(t,["speechConfig"]);e!==void 0&&b!=null&&m(e,["setup","generationConfig","speechConfig"],Pp(b));const w=h(t,["thinkingConfig"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","thinkingConfig"],w);const T=h(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],T);const E=h(t,["systemInstruction"]);e!==void 0&&E!=null&&m(e,["setup","systemInstruction"],jt(E));const A=h(t,["tools"]);if(e!==void 0&&A!=null){let O=to(A);Array.isArray(O)&&(O=O.map(W=>U2(eo(W)))),m(e,["setup","tools"],O)}const C=h(t,["sessionResumption"]);e!==void 0&&C!=null&&m(e,["setup","sessionResumption"],C);const R=h(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],R);const k=h(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&m(e,["setup","outputAudioTranscription"],k);const N=h(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&m(e,["setup","realtimeInputConfig"],N);const I=h(t,["contextWindowCompression"]);e!==void 0&&I!=null&&m(e,["setup","contextWindowCompression"],I);const L=h(t,["proactivity"]);e!==void 0&&L!=null&&m(e,["setup","proactivity"],L);const H=h(t,["explicitVadSignal"]);return e!==void 0&&H!=null&&m(e,["setup","explicitVadSignal"],H),n}function E2(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["setup","model"],Le(t,s));const o=h(e,["config"]);return o!=null&&m(n,["config"],T2(o,n)),n}function A2(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["setup","model"],Le(t,s));const o=h(e,["config"]);return o!=null&&m(n,["config"],S2(o,n)),n}function C2(t){const e={},n=h(t,["musicGenerationConfig"]);return n!=null&&m(e,["musicGenerationConfig"],n),e}function N2(t){const e={},n=h(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["weightedPrompts"],s)}return e}function R2(t){const e={},n=h(t,["media"]);if(n!=null){let p=dT(n);Array.isArray(p)&&(p=p.map(y=>mu(y))),m(e,["mediaChunks"],p)}const s=h(t,["audio"]);s!=null&&m(e,["audio"],mu(hT(s)));const o=h(t,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const l=h(t,["video"]);l!=null&&m(e,["video"],mu(fT(l)));const u=h(t,["text"]);u!=null&&m(e,["text"],u);const d=h(t,["activityStart"]);d!=null&&m(e,["activityStart"],d);const f=h(t,["activityEnd"]);return f!=null&&m(e,["activityEnd"],f),e}function M2(t){const e={},n=h(t,["media"]);if(n!=null){let p=dT(n);Array.isArray(p)&&(p=p.map(y=>y)),m(e,["mediaChunks"],p)}const s=h(t,["audio"]);s!=null&&m(e,["audio"],hT(s));const o=h(t,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const l=h(t,["video"]);l!=null&&m(e,["video"],fT(l));const u=h(t,["text"]);u!=null&&m(e,["text"],u);const d=h(t,["activityStart"]);d!=null&&m(e,["activityStart"],d);const f=h(t,["activityEnd"]);return f!=null&&m(e,["activityEnd"],f),e}function I2(t){const e={},n=h(t,["setupComplete"]);n!=null&&m(e,["setupComplete"],n);const s=h(t,["serverContent"]);s!=null&&m(e,["serverContent"],s);const o=h(t,["toolCall"]);o!=null&&m(e,["toolCall"],o);const l=h(t,["toolCallCancellation"]);l!=null&&m(e,["toolCallCancellation"],l);const u=h(t,["usageMetadata"]);u!=null&&m(e,["usageMetadata"],L2(u));const d=h(t,["goAway"]);d!=null&&m(e,["goAway"],d);const f=h(t,["sessionResumptionUpdate"]);f!=null&&m(e,["sessionResumptionUpdate"],f);const p=h(t,["voiceActivityDetectionSignal"]);return p!=null&&m(e,["voiceActivityDetectionSignal"],p),e}function k2(t){const e={},n=h(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const s=h(t,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=h(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=h(t,["fileData"]);l!=null&&m(e,["fileData"],y2(l));const u=h(t,["functionCall"]);u!=null&&m(e,["functionCall"],v2(u));const d=h(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const f=h(t,["inlineData"]);f!=null&&m(e,["inlineData"],mu(f));const p=h(t,["text"]);p!=null&&m(e,["text"],p);const y=h(t,["thought"]);y!=null&&m(e,["thought"],y);const b=h(t,["thoughtSignature"]);b!=null&&m(e,["thoughtSignature"],b);const w=h(t,["videoMetadata"]);return w!=null&&m(e,["videoMetadata"],w),e}function D2(t){const e={},n=h(t,["handle"]);if(n!=null&&m(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function P2(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(b=>b)),m(e,["functionDeclarations"],y)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=h(t,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=h(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const u=h(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],w2(d));const f=h(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],_2(f));const p=h(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}function U2(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let b=n;Array.isArray(b)&&(b=b.map(w=>x2(w))),m(e,["functionDeclarations"],b)}const s=h(t,["retrieval"]);s!=null&&m(e,["retrieval"],s);const o=h(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const l=h(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=h(t,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=h(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const f=h(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],f);const p=h(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],p);const y=h(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function L2(t){const e={},n=h(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const s=h(t,["cachedContentTokenCount"]);s!=null&&m(e,["cachedContentTokenCount"],s);const o=h(t,["candidatesTokenCount"]);o!=null&&m(e,["responseTokenCount"],o);const l=h(t,["toolUsePromptTokenCount"]);l!=null&&m(e,["toolUsePromptTokenCount"],l);const u=h(t,["thoughtsTokenCount"]);u!=null&&m(e,["thoughtsTokenCount"],u);const d=h(t,["totalTokenCount"]);d!=null&&m(e,["totalTokenCount"],d);const f=h(t,["promptTokensDetails"]);if(f!=null){let T=f;Array.isArray(T)&&(T=T.map(E=>E)),m(e,["promptTokensDetails"],T)}const p=h(t,["cacheTokensDetails"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(E=>E)),m(e,["cacheTokensDetails"],T)}const y=h(t,["candidatesTokensDetails"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(E=>E)),m(e,["responseTokensDetails"],T)}const b=h(t,["toolUsePromptTokensDetails"]);if(b!=null){let T=b;Array.isArray(T)&&(T=T.map(E=>E)),m(e,["toolUsePromptTokensDetails"],T)}const w=h(t,["trafficType"]);return w!=null&&m(e,["trafficType"],w),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O2(t){const e={},n=h(t,["data"]);if(n!=null&&m(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function V2(t){const e={},n=h(t,["content"]);n!=null&&m(e,["content"],n);const s=h(t,["citationMetadata"]);s!=null&&m(e,["citationMetadata"],j2(s));const o=h(t,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const l=h(t,["finishReason"]);l!=null&&m(e,["finishReason"],l);const u=h(t,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const d=h(t,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const f=h(t,["index"]);f!=null&&m(e,["index"],f);const p=h(t,["logprobsResult"]);p!=null&&m(e,["logprobsResult"],p);const y=h(t,["safetyRatings"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(T=>T)),m(e,["safetyRatings"],w)}const b=h(t,["urlContextMetadata"]);return b!=null&&m(e,["urlContextMetadata"],b),e}function j2(t){const e={},n=h(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["citations"],s)}return e}function B2(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","model"],Le(t,s));const o=h(e,["contents"]);if(o!=null){let l=_n(o);Array.isArray(l)&&(l=l.map(u=>u)),m(n,["contents"],l)}return n}function G2(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["tokensInfo"],o)}return e}function H2(t){const e={},n=h(t,["values"]);n!=null&&m(e,["values"],n);const s=h(t,["statistics"]);return s!=null&&m(e,["statistics"],q2(s)),e}function q2(t){const e={},n=h(t,["truncated"]);n!=null&&m(e,["truncated"],n);const s=h(t,["token_count"]);return s!=null&&m(e,["tokenCount"],s),e}function Bu(t){const e={},n=h(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>QU(l))),m(e,["parts"],o)}const s=h(t,["role"]);return s!=null&&m(e,["role"],s),e}function z2(t){const e={},n=h(t,["controlType"]);n!=null&&m(e,["controlType"],n);const s=h(t,["enableControlImageComputation"]);return s!=null&&m(e,["computeControl"],s),e}function F2(t){const e={};if(h(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function $2(t,e){const n={},s=h(t,["systemInstruction"]);e!==void 0&&s!=null&&m(e,["systemInstruction"],jt(s));const o=h(t,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>CT(d))),m(e,["tools"],u)}const l=h(t,["generationConfig"]);return e!==void 0&&l!=null&&m(e,["generationConfig"],OU(l)),n}function J2(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","model"],Le(t,s));const o=h(e,["contents"]);if(o!=null){let u=_n(o);Array.isArray(u)&&(u=u.map(d=>Bu(d))),m(n,["contents"],u)}const l=h(e,["config"]);return l!=null&&F2(l),n}function K2(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","model"],Le(t,s));const o=h(e,["contents"]);if(o!=null){let u=_n(o);Array.isArray(u)&&(u=u.map(d=>d)),m(n,["contents"],u)}const l=h(e,["config"]);return l!=null&&$2(l,n),n}function Y2(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["totalTokens"]);s!=null&&m(e,["totalTokens"],s);const o=h(t,["cachedContentTokenCount"]);return o!=null&&m(e,["cachedContentTokenCount"],o),e}function X2(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["totalTokens"]);return s!=null&&m(e,["totalTokens"],s),e}function W2(t,e){const n={},s=h(e,["model"]);return s!=null&&m(n,["_url","name"],Le(t,s)),n}function Q2(t,e){const n={},s=h(e,["model"]);return s!=null&&m(n,["_url","name"],Le(t,s)),n}function Z2(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function eU(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function tU(t,e){const n={},s=h(t,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=h(t,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const l=h(t,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const u=h(t,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const d=h(t,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const f=h(t,["seed"]);e!==void 0&&f!=null&&m(e,["parameters","seed"],f);const p=h(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&m(e,["parameters","safetySetting"],p);const y=h(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const b=h(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&m(e,["parameters","includeSafetyAttributes"],b);const w=h(t,["includeRaiReason"]);e!==void 0&&w!=null&&m(e,["parameters","includeRaiReason"],w);const T=h(t,["language"]);e!==void 0&&T!=null&&m(e,["parameters","language"],T);const E=h(t,["outputMimeType"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","mimeType"],E);const A=h(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&m(e,["parameters","outputOptions","compressionQuality"],A);const C=h(t,["addWatermark"]);e!==void 0&&C!=null&&m(e,["parameters","addWatermark"],C);const R=h(t,["labels"]);e!==void 0&&R!=null&&m(e,["labels"],R);const k=h(t,["editMode"]);e!==void 0&&k!=null&&m(e,["parameters","editMode"],k);const N=h(t,["baseSteps"]);return e!==void 0&&N!=null&&m(e,["parameters","editConfig","baseSteps"],N),n}function nU(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","model"],Le(t,s));const o=h(e,["prompt"]);o!=null&&m(n,["instances[0]","prompt"],o);const l=h(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(f=>sL(f))),m(n,["instances[0]","referenceImages"],d)}const u=h(e,["config"]);return u!=null&&tU(u,n),n}function iU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Gu(l))),m(e,["generatedImages"],o)}return e}function sU(t,e){const n={},s=h(t,["taskType"]);e!==void 0&&s!=null&&m(e,["requests[]","taskType"],s);const o=h(t,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const l=h(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function rU(t,e){const n={},s=h(t,["taskType"]);e!==void 0&&s!=null&&m(e,["instances[]","task_type"],s);const o=h(t,["title"]);e!==void 0&&o!=null&&m(e,["instances[]","title"],o);const l=h(t,["outputDimensionality"]);e!==void 0&&l!=null&&m(e,["parameters","outputDimensionality"],l);const u=h(t,["mimeType"]);e!==void 0&&u!=null&&m(e,["instances[]","mimeType"],u);const d=h(t,["autoTruncate"]);return e!==void 0&&d!=null&&m(e,["parameters","autoTruncate"],d),n}function oU(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","model"],Le(t,s));const o=h(e,["contents"]);if(o!=null){let d=Ip(t,o);Array.isArray(d)&&(d=d.map(f=>f)),m(n,["requests[]","content"],d)}const l=h(e,["config"]);l!=null&&sU(l,n);const u=h(e,["model"]);return u!==void 0&&m(n,["requests[]","model"],Le(t,u)),n}function aU(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","model"],Le(t,s));const o=h(e,["contents"]);if(o!=null){let u=Ip(t,o);Array.isArray(u)&&(u=u.map(d=>d)),m(n,["instances[]","content"],u)}const l=h(e,["config"]);return l!=null&&rU(l,n),n}function lU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["embeddings"],l)}const o=h(t,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function uU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>H2(u))),m(e,["embeddings"],l)}const o=h(t,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function cU(t){const e={},n=h(t,["endpoint"]);n!=null&&m(e,["name"],n);const s=h(t,["deployedModelId"]);return s!=null&&m(e,["deployedModelId"],s),e}function dU(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const s=h(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function fU(t){const e={},n=h(t,["id"]);n!=null&&m(e,["id"],n);const s=h(t,["args"]);s!=null&&m(e,["args"],s);const o=h(t,["name"]);if(o!=null&&m(e,["name"],o),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hU(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const s=h(t,["allowedFunctionNames"]);if(s!=null&&m(e,["allowedFunctionNames"],s),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function pU(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&m(e,["description"],n);const s=h(t,["name"]);s!=null&&m(e,["name"],s);const o=h(t,["parameters"]);o!=null&&m(e,["parameters"],o);const l=h(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const u=h(t,["response"]);u!=null&&m(e,["response"],u);const d=h(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function mU(t,e,n){const s={},o=h(e,["systemInstruction"]);n!==void 0&&o!=null&&m(n,["systemInstruction"],Bu(jt(o)));const l=h(e,["temperature"]);l!=null&&m(s,["temperature"],l);const u=h(e,["topP"]);u!=null&&m(s,["topP"],u);const d=h(e,["topK"]);d!=null&&m(s,["topK"],d);const f=h(e,["candidateCount"]);f!=null&&m(s,["candidateCount"],f);const p=h(e,["maxOutputTokens"]);p!=null&&m(s,["maxOutputTokens"],p);const y=h(e,["stopSequences"]);y!=null&&m(s,["stopSequences"],y);const b=h(e,["responseLogprobs"]);b!=null&&m(s,["responseLogprobs"],b);const w=h(e,["logprobs"]);w!=null&&m(s,["logprobs"],w);const T=h(e,["presencePenalty"]);T!=null&&m(s,["presencePenalty"],T);const E=h(e,["frequencyPenalty"]);E!=null&&m(s,["frequencyPenalty"],E);const A=h(e,["seed"]);A!=null&&m(s,["seed"],A);const C=h(e,["responseMimeType"]);C!=null&&m(s,["responseMimeType"],C);const R=h(e,["responseSchema"]);R!=null&&m(s,["responseSchema"],kp(R));const k=h(e,["responseJsonSchema"]);if(k!=null&&m(s,["responseJsonSchema"],k),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=h(e,["safetySettings"]);if(n!==void 0&&N!=null){let ke=N;Array.isArray(ke)&&(ke=ke.map(Je=>rL(Je))),m(n,["safetySettings"],ke)}const I=h(e,["tools"]);if(n!==void 0&&I!=null){let ke=to(I);Array.isArray(ke)&&(ke=ke.map(Je=>fL(eo(Je)))),m(n,["tools"],ke)}const L=h(e,["toolConfig"]);if(n!==void 0&&L!=null&&m(n,["toolConfig"],dL(L)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=h(e,["cachedContent"]);n!==void 0&&H!=null&&m(n,["cachedContent"],vi(t,H));const O=h(e,["responseModalities"]);O!=null&&m(s,["responseModalities"],O);const W=h(e,["mediaResolution"]);W!=null&&m(s,["mediaResolution"],W);const J=h(e,["speechConfig"]);if(J!=null&&m(s,["speechConfig"],Dp(J)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ie=h(e,["thinkingConfig"]);ie!=null&&m(s,["thinkingConfig"],ie);const Z=h(e,["imageConfig"]);Z!=null&&m(s,["imageConfig"],HU(Z));const ye=h(e,["enableEnhancedCivicAnswers"]);return ye!=null&&m(s,["enableEnhancedCivicAnswers"],ye),s}function gU(t,e,n){const s={},o=h(e,["systemInstruction"]);n!==void 0&&o!=null&&m(n,["systemInstruction"],jt(o));const l=h(e,["temperature"]);l!=null&&m(s,["temperature"],l);const u=h(e,["topP"]);u!=null&&m(s,["topP"],u);const d=h(e,["topK"]);d!=null&&m(s,["topK"],d);const f=h(e,["candidateCount"]);f!=null&&m(s,["candidateCount"],f);const p=h(e,["maxOutputTokens"]);p!=null&&m(s,["maxOutputTokens"],p);const y=h(e,["stopSequences"]);y!=null&&m(s,["stopSequences"],y);const b=h(e,["responseLogprobs"]);b!=null&&m(s,["responseLogprobs"],b);const w=h(e,["logprobs"]);w!=null&&m(s,["logprobs"],w);const T=h(e,["presencePenalty"]);T!=null&&m(s,["presencePenalty"],T);const E=h(e,["frequencyPenalty"]);E!=null&&m(s,["frequencyPenalty"],E);const A=h(e,["seed"]);A!=null&&m(s,["seed"],A);const C=h(e,["responseMimeType"]);C!=null&&m(s,["responseMimeType"],C);const R=h(e,["responseSchema"]);R!=null&&m(s,["responseSchema"],kp(R));const k=h(e,["responseJsonSchema"]);k!=null&&m(s,["responseJsonSchema"],k);const N=h(e,["routingConfig"]);N!=null&&m(s,["routingConfig"],N);const I=h(e,["modelSelectionConfig"]);I!=null&&m(s,["modelConfig"],I);const L=h(e,["safetySettings"]);if(n!==void 0&&L!=null){let z=L;Array.isArray(z)&&(z=z.map(Q=>Q)),m(n,["safetySettings"],z)}const H=h(e,["tools"]);if(n!==void 0&&H!=null){let z=to(H);Array.isArray(z)&&(z=z.map(Q=>CT(eo(Q)))),m(n,["tools"],z)}const O=h(e,["toolConfig"]);n!==void 0&&O!=null&&m(n,["toolConfig"],O);const W=h(e,["labels"]);n!==void 0&&W!=null&&m(n,["labels"],W);const J=h(e,["cachedContent"]);n!==void 0&&J!=null&&m(n,["cachedContent"],vi(t,J));const ie=h(e,["responseModalities"]);ie!=null&&m(s,["responseModalities"],ie);const Z=h(e,["mediaResolution"]);Z!=null&&m(s,["mediaResolution"],Z);const ye=h(e,["speechConfig"]);ye!=null&&m(s,["speechConfig"],Dp(ye));const ke=h(e,["audioTimestamp"]);ke!=null&&m(s,["audioTimestamp"],ke);const Je=h(e,["thinkingConfig"]);Je!=null&&m(s,["thinkingConfig"],Je);const st=h(e,["imageConfig"]);if(st!=null&&m(s,["imageConfig"],qU(st)),h(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function Bb(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","model"],Le(t,s));const o=h(e,["contents"]);if(o!=null){let u=_n(o);Array.isArray(u)&&(u=u.map(d=>Bu(d))),m(n,["contents"],u)}const l=h(e,["config"]);return l!=null&&m(n,["generationConfig"],mU(t,l,n)),n}function Gb(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","model"],Le(t,s));const o=h(e,["contents"]);if(o!=null){let u=_n(o);Array.isArray(u)&&(u=u.map(d=>d)),m(n,["contents"],u)}const l=h(e,["config"]);return l!=null&&m(n,["generationConfig"],gU(t,l,n)),n}function Hb(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["candidates"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(p=>V2(p))),m(e,["candidates"],f)}const o=h(t,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const l=h(t,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const u=h(t,["responseId"]);u!=null&&m(e,["responseId"],u);const d=h(t,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function qb(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(y=>y)),m(e,["candidates"],p)}const o=h(t,["createTime"]);o!=null&&m(e,["createTime"],o);const l=h(t,["modelVersion"]);l!=null&&m(e,["modelVersion"],l);const u=h(t,["promptFeedback"]);u!=null&&m(e,["promptFeedback"],u);const d=h(t,["responseId"]);d!=null&&m(e,["responseId"],d);const f=h(t,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function yU(t,e){const n={};if(h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=h(t,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=h(t,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const l=h(t,["guidanceScale"]);if(e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=h(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d);const f=h(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&m(e,["parameters","includeSafetyAttributes"],f);const p=h(t,["includeRaiReason"]);e!==void 0&&p!=null&&m(e,["parameters","includeRaiReason"],p);const y=h(t,["language"]);e!==void 0&&y!=null&&m(e,["parameters","language"],y);const b=h(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const w=h(t,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&m(e,["parameters","outputOptions","compressionQuality"],w),h(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=h(t,["imageSize"]);if(e!==void 0&&T!=null&&m(e,["parameters","sampleImageSize"],T),h(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function vU(t,e){const n={},s=h(t,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=h(t,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const l=h(t,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const u=h(t,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const d=h(t,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const f=h(t,["seed"]);e!==void 0&&f!=null&&m(e,["parameters","seed"],f);const p=h(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&m(e,["parameters","safetySetting"],p);const y=h(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const b=h(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&m(e,["parameters","includeSafetyAttributes"],b);const w=h(t,["includeRaiReason"]);e!==void 0&&w!=null&&m(e,["parameters","includeRaiReason"],w);const T=h(t,["language"]);e!==void 0&&T!=null&&m(e,["parameters","language"],T);const E=h(t,["outputMimeType"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","mimeType"],E);const A=h(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&m(e,["parameters","outputOptions","compressionQuality"],A);const C=h(t,["addWatermark"]);e!==void 0&&C!=null&&m(e,["parameters","addWatermark"],C);const R=h(t,["labels"]);e!==void 0&&R!=null&&m(e,["labels"],R);const k=h(t,["imageSize"]);e!==void 0&&k!=null&&m(e,["parameters","sampleImageSize"],k);const N=h(t,["enhancePrompt"]);return e!==void 0&&N!=null&&m(e,["parameters","enhancePrompt"],N),n}function xU(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","model"],Le(t,s));const o=h(e,["prompt"]);o!=null&&m(n,["instances[0]","prompt"],o);const l=h(e,["config"]);return l!=null&&yU(l,n),n}function bU(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","model"],Le(t,s));const o=h(e,["prompt"]);o!=null&&m(n,["instances[0]","prompt"],o);const l=h(e,["config"]);return l!=null&&vU(l,n),n}function wU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>DU(u))),m(e,["generatedImages"],l)}const o=h(t,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],ET(o)),e}function _U(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Gu(u))),m(e,["generatedImages"],l)}const o=h(t,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],AT(o)),e}function TU(t,e){const n={},s=h(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s),h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=h(t,["durationSeconds"]);if(e!==void 0&&o!=null&&m(e,["parameters","durationSeconds"],o),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=h(t,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const u=h(t,["resolution"]);e!==void 0&&u!=null&&m(e,["parameters","resolution"],u);const d=h(t,["personGeneration"]);if(e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d),h(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=h(t,["negativePrompt"]);e!==void 0&&f!=null&&m(e,["parameters","negativePrompt"],f);const p=h(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&m(e,["parameters","enhancePrompt"],p),h(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=h(t,["lastFrame"]);e!==void 0&&y!=null&&m(e,["instances[0]","lastFrame"],Hu(y));const b=h(t,["referenceImages"]);if(e!==void 0&&b!=null){let w=b;Array.isArray(w)&&(w=w.map(T=>EL(T))),m(e,["instances[0]","referenceImages"],w)}if(h(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function SU(t,e){const n={},s=h(t,["numberOfVideos"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=h(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const l=h(t,["fps"]);e!==void 0&&l!=null&&m(e,["parameters","fps"],l);const u=h(t,["durationSeconds"]);e!==void 0&&u!=null&&m(e,["parameters","durationSeconds"],u);const d=h(t,["seed"]);e!==void 0&&d!=null&&m(e,["parameters","seed"],d);const f=h(t,["aspectRatio"]);e!==void 0&&f!=null&&m(e,["parameters","aspectRatio"],f);const p=h(t,["resolution"]);e!==void 0&&p!=null&&m(e,["parameters","resolution"],p);const y=h(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const b=h(t,["pubsubTopic"]);e!==void 0&&b!=null&&m(e,["parameters","pubsubTopic"],b);const w=h(t,["negativePrompt"]);e!==void 0&&w!=null&&m(e,["parameters","negativePrompt"],w);const T=h(t,["enhancePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","enhancePrompt"],T);const E=h(t,["generateAudio"]);e!==void 0&&E!=null&&m(e,["parameters","generateAudio"],E);const A=h(t,["lastFrame"]);e!==void 0&&A!=null&&m(e,["instances[0]","lastFrame"],On(A));const C=h(t,["referenceImages"]);if(e!==void 0&&C!=null){let N=C;Array.isArray(N)&&(N=N.map(I=>AL(I))),m(e,["instances[0]","referenceImages"],N)}const R=h(t,["mask"]);e!==void 0&&R!=null&&m(e,["instances[0]","mask"],SL(R));const k=h(t,["compressionQuality"]);return e!==void 0&&k!=null&&m(e,["parameters","compressionQuality"],k),n}function EU(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const s=h(t,["metadata"]);s!=null&&m(e,["metadata"],s);const o=h(t,["done"]);o!=null&&m(e,["done"],o);const l=h(t,["error"]);l!=null&&m(e,["error"],l);const u=h(t,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],RU(u)),e}function AU(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const s=h(t,["metadata"]);s!=null&&m(e,["metadata"],s);const o=h(t,["done"]);o!=null&&m(e,["done"],o);const l=h(t,["error"]);l!=null&&m(e,["error"],l);const u=h(t,["response"]);return u!=null&&m(e,["response"],MU(u)),e}function CU(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","model"],Le(t,s));const o=h(e,["prompt"]);o!=null&&m(n,["instances[0]","prompt"],o);const l=h(e,["image"]);l!=null&&m(n,["instances[0]","image"],Hu(l));const u=h(e,["video"]);u!=null&&m(n,["instances[0]","video"],NT(u));const d=h(e,["source"]);d!=null&&IU(d,n);const f=h(e,["config"]);return f!=null&&TU(f,n),n}function NU(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","model"],Le(t,s));const o=h(e,["prompt"]);o!=null&&m(n,["instances[0]","prompt"],o);const l=h(e,["image"]);l!=null&&m(n,["instances[0]","image"],On(l));const u=h(e,["video"]);u!=null&&m(n,["instances[0]","video"],RT(u));const d=h(e,["source"]);d!=null&&kU(d,n);const f=h(e,["config"]);return f!=null&&SU(f,n),n}function RU(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>UU(u))),m(e,["generatedVideos"],l)}const s=h(t,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=h(t,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function MU(t){const e={},n=h(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>LU(u))),m(e,["generatedVideos"],l)}const s=h(t,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=h(t,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function IU(t,e){const n={},s=h(t,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=h(t,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Hu(o));const l=h(t,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],NT(l)),n}function kU(t,e){const n={},s=h(t,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=h(t,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],On(o));const l=h(t,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],RT(l)),n}function DU(t){const e={},n=h(t,["_self"]);n!=null&&m(e,["image"],zU(n));const s=h(t,["raiFilteredReason"]);s!=null&&m(e,["raiFilteredReason"],s);const o=h(t,["_self"]);return o!=null&&m(e,["safetyAttributes"],ET(o)),e}function Gu(t){const e={},n=h(t,["_self"]);n!=null&&m(e,["image"],ST(n));const s=h(t,["raiFilteredReason"]);s!=null&&m(e,["raiFilteredReason"],s);const o=h(t,["_self"]);o!=null&&m(e,["safetyAttributes"],AT(o));const l=h(t,["prompt"]);return l!=null&&m(e,["enhancedPrompt"],l),e}function PU(t){const e={},n=h(t,["_self"]);n!=null&&m(e,["mask"],ST(n));const s=h(t,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["labels"],o)}return e}function UU(t){const e={},n=h(t,["video"]);return n!=null&&m(e,["video"],_L(n)),e}function LU(t){const e={},n=h(t,["_self"]);return n!=null&&m(e,["video"],TL(n)),e}function OU(t){const e={},n=h(t,["modelSelectionConfig"]);n!=null&&m(e,["modelConfig"],n);const s=h(t,["responseJsonSchema"]);s!=null&&m(e,["responseJsonSchema"],s);const o=h(t,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const l=h(t,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const u=h(t,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const d=h(t,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const f=h(t,["logprobs"]);f!=null&&m(e,["logprobs"],f);const p=h(t,["maxOutputTokens"]);p!=null&&m(e,["maxOutputTokens"],p);const y=h(t,["mediaResolution"]);y!=null&&m(e,["mediaResolution"],y);const b=h(t,["presencePenalty"]);b!=null&&m(e,["presencePenalty"],b);const w=h(t,["responseLogprobs"]);w!=null&&m(e,["responseLogprobs"],w);const T=h(t,["responseMimeType"]);T!=null&&m(e,["responseMimeType"],T);const E=h(t,["responseModalities"]);E!=null&&m(e,["responseModalities"],E);const A=h(t,["responseSchema"]);A!=null&&m(e,["responseSchema"],A);const C=h(t,["routingConfig"]);C!=null&&m(e,["routingConfig"],C);const R=h(t,["seed"]);R!=null&&m(e,["seed"],R);const k=h(t,["speechConfig"]);k!=null&&m(e,["speechConfig"],k);const N=h(t,["stopSequences"]);N!=null&&m(e,["stopSequences"],N);const I=h(t,["temperature"]);I!=null&&m(e,["temperature"],I);const L=h(t,["thinkingConfig"]);L!=null&&m(e,["thinkingConfig"],L);const H=h(t,["topK"]);H!=null&&m(e,["topK"],H);const O=h(t,["topP"]);if(O!=null&&m(e,["topP"],O),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function VU(t,e){const n={},s=h(e,["model"]);return s!=null&&m(n,["_url","name"],Le(t,s)),n}function jU(t,e){const n={},s=h(e,["model"]);return s!=null&&m(n,["_url","name"],Le(t,s)),n}function BU(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function GU(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function HU(t){const e={},n=h(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const s=h(t,["imageSize"]);if(s!=null&&m(e,["imageSize"],s),h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function qU(t){const e={},n=h(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const s=h(t,["imageSize"]);s!=null&&m(e,["imageSize"],s);const o=h(t,["outputMimeType"]);o!=null&&m(e,["imageOutputOptions","mimeType"],o);const l=h(t,["outputCompressionQuality"]);return l!=null&&m(e,["imageOutputOptions","compressionQuality"],l),e}function zU(t){const e={},n=h(t,["bytesBase64Encoded"]);n!=null&&m(e,["imageBytes"],Wi(n));const s=h(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function ST(t){const e={},n=h(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const s=h(t,["bytesBase64Encoded"]);s!=null&&m(e,["imageBytes"],Wi(s));const o=h(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function Hu(t){const e={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=h(t,["imageBytes"]);n!=null&&m(e,["bytesBase64Encoded"],Wi(n));const s=h(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function On(t){const e={},n=h(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const s=h(t,["imageBytes"]);s!=null&&m(e,["bytesBase64Encoded"],Wi(s));const o=h(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function FU(t,e,n){const s={},o=h(e,["pageSize"]);n!==void 0&&o!=null&&m(n,["_query","pageSize"],o);const l=h(e,["pageToken"]);n!==void 0&&l!=null&&m(n,["_query","pageToken"],l);const u=h(e,["filter"]);n!==void 0&&u!=null&&m(n,["_query","filter"],u);const d=h(e,["queryBase"]);return n!==void 0&&d!=null&&m(n,["_url","models_url"],yT(t,d)),s}function $U(t,e,n){const s={},o=h(e,["pageSize"]);n!==void 0&&o!=null&&m(n,["_query","pageSize"],o);const l=h(e,["pageToken"]);n!==void 0&&l!=null&&m(n,["_query","pageToken"],l);const u=h(e,["filter"]);n!==void 0&&u!=null&&m(n,["_query","filter"],u);const d=h(e,["queryBase"]);return n!==void 0&&d!=null&&m(n,["_url","models_url"],yT(t,d)),s}function JU(t,e){const n={},s=h(e,["config"]);return s!=null&&FU(t,s,n),n}function KU(t,e){const n={},s=h(e,["config"]);return s!=null&&$U(t,s,n),n}function YU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=h(t,["_self"]);if(o!=null){let l=vT(o);Array.isArray(l)&&(l=l.map(u=>Dh(u))),m(e,["models"],l)}return e}function XU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=h(t,["_self"]);if(o!=null){let l=vT(o);Array.isArray(l)&&(l=l.map(u=>Ph(u))),m(e,["models"],l)}return e}function WU(t){const e={},n=h(t,["maskMode"]);n!=null&&m(e,["maskMode"],n);const s=h(t,["segmentationClasses"]);s!=null&&m(e,["maskClasses"],s);const o=h(t,["maskDilation"]);return o!=null&&m(e,["dilation"],o),e}function Dh(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const s=h(t,["displayName"]);s!=null&&m(e,["displayName"],s);const o=h(t,["description"]);o!=null&&m(e,["description"],o);const l=h(t,["version"]);l!=null&&m(e,["version"],l);const u=h(t,["_self"]);u!=null&&m(e,["tunedModelInfo"],hL(u));const d=h(t,["inputTokenLimit"]);d!=null&&m(e,["inputTokenLimit"],d);const f=h(t,["outputTokenLimit"]);f!=null&&m(e,["outputTokenLimit"],f);const p=h(t,["supportedGenerationMethods"]);p!=null&&m(e,["supportedActions"],p);const y=h(t,["temperature"]);y!=null&&m(e,["temperature"],y);const b=h(t,["maxTemperature"]);b!=null&&m(e,["maxTemperature"],b);const w=h(t,["topP"]);w!=null&&m(e,["topP"],w);const T=h(t,["topK"]);T!=null&&m(e,["topK"],T);const E=h(t,["thinking"]);return E!=null&&m(e,["thinking"],E),e}function Ph(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const s=h(t,["displayName"]);s!=null&&m(e,["displayName"],s);const o=h(t,["description"]);o!=null&&m(e,["description"],o);const l=h(t,["versionId"]);l!=null&&m(e,["version"],l);const u=h(t,["deployedModels"]);if(u!=null){let b=u;Array.isArray(b)&&(b=b.map(w=>cU(w))),m(e,["endpoints"],b)}const d=h(t,["labels"]);d!=null&&m(e,["labels"],d);const f=h(t,["_self"]);f!=null&&m(e,["tunedModelInfo"],pL(f));const p=h(t,["defaultCheckpointId"]);p!=null&&m(e,["defaultCheckpointId"],p);const y=h(t,["checkpoints"]);if(y!=null){let b=y;Array.isArray(b)&&(b=b.map(w=>w)),m(e,["checkpoints"],b)}return e}function QU(t){const e={},n=h(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const s=h(t,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=h(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=h(t,["fileData"]);l!=null&&m(e,["fileData"],dU(l));const u=h(t,["functionCall"]);u!=null&&m(e,["functionCall"],fU(u));const d=h(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const f=h(t,["inlineData"]);f!=null&&m(e,["inlineData"],O2(f));const p=h(t,["text"]);p!=null&&m(e,["text"],p);const y=h(t,["thought"]);y!=null&&m(e,["thought"],y);const b=h(t,["thoughtSignature"]);b!=null&&m(e,["thoughtSignature"],b);const w=h(t,["videoMetadata"]);return w!=null&&m(e,["videoMetadata"],w),e}function ZU(t){const e={},n=h(t,["productImage"]);return n!=null&&m(e,["image"],On(n)),e}function eL(t,e){const n={},s=h(t,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=h(t,["baseSteps"]);e!==void 0&&o!=null&&m(e,["parameters","baseSteps"],o);const l=h(t,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const u=h(t,["seed"]);e!==void 0&&u!=null&&m(e,["parameters","seed"],u);const d=h(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&m(e,["parameters","safetySetting"],d);const f=h(t,["personGeneration"]);e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f);const p=h(t,["addWatermark"]);e!==void 0&&p!=null&&m(e,["parameters","addWatermark"],p);const y=h(t,["outputMimeType"]);e!==void 0&&y!=null&&m(e,["parameters","outputOptions","mimeType"],y);const b=h(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","compressionQuality"],b);const w=h(t,["enhancePrompt"]);e!==void 0&&w!=null&&m(e,["parameters","enhancePrompt"],w);const T=h(t,["labels"]);return e!==void 0&&T!=null&&m(e,["labels"],T),n}function tL(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","model"],Le(t,s));const o=h(e,["source"]);o!=null&&iL(o,n);const l=h(e,["config"]);return l!=null&&eL(l,n),n}function nL(t){const e={},n=h(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Gu(o))),m(e,["generatedImages"],s)}return e}function iL(t,e){const n={},s=h(t,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=h(t,["personImage"]);e!==void 0&&o!=null&&m(e,["instances[0]","personImage","image"],On(o));const l=h(t,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>ZU(d))),m(e,["instances[0]","productImages"],u)}return n}function sL(t){const e={},n=h(t,["referenceImage"]);n!=null&&m(e,["referenceImage"],On(n));const s=h(t,["referenceId"]);s!=null&&m(e,["referenceId"],s);const o=h(t,["referenceType"]);o!=null&&m(e,["referenceType"],o);const l=h(t,["maskImageConfig"]);l!=null&&m(e,["maskImageConfig"],WU(l));const u=h(t,["controlImageConfig"]);u!=null&&m(e,["controlImageConfig"],z2(u));const d=h(t,["styleImageConfig"]);d!=null&&m(e,["styleImageConfig"],d);const f=h(t,["subjectImageConfig"]);return f!=null&&m(e,["subjectImageConfig"],f),e}function ET(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const s=h(t,["safetyAttributes","scores"]);s!=null&&m(e,["scores"],s);const o=h(t,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function AT(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const s=h(t,["safetyAttributes","scores"]);s!=null&&m(e,["scores"],s);const o=h(t,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function rL(t){const e={},n=h(t,["category"]);if(n!=null&&m(e,["category"],n),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=h(t,["threshold"]);return s!=null&&m(e,["threshold"],s),e}function oL(t){const e={},n=h(t,["image"]);return n!=null&&m(e,["image"],On(n)),e}function aL(t,e){const n={},s=h(t,["mode"]);e!==void 0&&s!=null&&m(e,["parameters","mode"],s);const o=h(t,["maxPredictions"]);e!==void 0&&o!=null&&m(e,["parameters","maxPredictions"],o);const l=h(t,["confidenceThreshold"]);e!==void 0&&l!=null&&m(e,["parameters","confidenceThreshold"],l);const u=h(t,["maskDilation"]);e!==void 0&&u!=null&&m(e,["parameters","maskDilation"],u);const d=h(t,["binaryColorThreshold"]);e!==void 0&&d!=null&&m(e,["parameters","binaryColorThreshold"],d);const f=h(t,["labels"]);return e!==void 0&&f!=null&&m(e,["labels"],f),n}function lL(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","model"],Le(t,s));const o=h(e,["source"]);o!=null&&cL(o,n);const l=h(e,["config"]);return l!=null&&aL(l,n),n}function uL(t){const e={},n=h(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>PU(o))),m(e,["generatedMasks"],s)}return e}function cL(t,e){const n={},s=h(t,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=h(t,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],On(o));const l=h(t,["scribbleImage"]);return e!==void 0&&l!=null&&m(e,["instances[0]","scribble"],oL(l)),n}function dL(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],hU(n));const s=h(t,["retrievalConfig"]);return s!=null&&m(e,["retrievalConfig"],s),e}function fL(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(b=>b)),m(e,["functionDeclarations"],y)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=h(t,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=h(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const u=h(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],BU(d));const f=h(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],GU(f));const p=h(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}function CT(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let b=n;Array.isArray(b)&&(b=b.map(w=>pU(w))),m(e,["functionDeclarations"],b)}const s=h(t,["retrieval"]);s!=null&&m(e,["retrieval"],s);const o=h(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const l=h(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=h(t,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=h(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const f=h(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],f);const p=h(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],p);const y=h(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function hL(t){const e={},n=h(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const s=h(t,["createTime"]);s!=null&&m(e,["createTime"],s);const o=h(t,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function pL(t){const e={},n=h(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&m(e,["baseModel"],n);const s=h(t,["createTime"]);s!=null&&m(e,["createTime"],s);const o=h(t,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function mL(t,e){const n={},s=h(t,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=h(t,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const l=h(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),n}function gL(t,e){const n={},s=h(t,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=h(t,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const l=h(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),n}function yL(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","name"],Le(t,s));const o=h(e,["config"]);return o!=null&&mL(o,n),n}function vL(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","model"],Le(t,s));const o=h(e,["config"]);return o!=null&&gL(o,n),n}function xL(t,e){const n={},s=h(t,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=h(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&m(e,["parameters","safetySetting"],o);const l=h(t,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const u=h(t,["includeRaiReason"]);e!==void 0&&u!=null&&m(e,["parameters","includeRaiReason"],u);const d=h(t,["outputMimeType"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","mimeType"],d);const f=h(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&m(e,["parameters","outputOptions","compressionQuality"],f);const p=h(t,["enhanceInputImage"]);e!==void 0&&p!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],p);const y=h(t,["imagePreservationFactor"]);e!==void 0&&y!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const b=h(t,["labels"]);e!==void 0&&b!=null&&m(e,["labels"],b);const w=h(t,["numberOfImages"]);e!==void 0&&w!=null&&m(e,["parameters","sampleCount"],w);const T=h(t,["mode"]);return e!==void 0&&T!=null&&m(e,["parameters","mode"],T),n}function bL(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["_url","model"],Le(t,s));const o=h(e,["image"]);o!=null&&m(n,["instances[0]","image"],On(o));const l=h(e,["upscaleFactor"]);l!=null&&m(n,["parameters","upscaleConfig","upscaleFactor"],l);const u=h(e,["config"]);return u!=null&&xL(u,n),n}function wL(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Gu(l))),m(e,["generatedImages"],o)}return e}function _L(t){const e={},n=h(t,["uri"]);n!=null&&m(e,["uri"],n);const s=h(t,["encodedVideo"]);s!=null&&m(e,["videoBytes"],Wi(s));const o=h(t,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function TL(t){const e={},n=h(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const s=h(t,["bytesBase64Encoded"]);s!=null&&m(e,["videoBytes"],Wi(s));const o=h(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function SL(t){const e={},n=h(t,["image"]);n!=null&&m(e,["_self"],On(n));const s=h(t,["maskMode"]);return s!=null&&m(e,["maskMode"],s),e}function EL(t){const e={},n=h(t,["image"]);n!=null&&m(e,["image"],Hu(n));const s=h(t,["referenceType"]);return s!=null&&m(e,["referenceType"],s),e}function AL(t){const e={},n=h(t,["image"]);n!=null&&m(e,["image"],On(n));const s=h(t,["referenceType"]);return s!=null&&m(e,["referenceType"],s),e}function NT(t){const e={},n=h(t,["uri"]);n!=null&&m(e,["uri"],n);const s=h(t,["videoBytes"]);s!=null&&m(e,["encodedVideo"],Wi(s));const o=h(t,["mimeType"]);return o!=null&&m(e,["encoding"],o),e}function RT(t){const e={},n=h(t,["uri"]);n!=null&&m(e,["gcsUri"],n);const s=h(t,["videoBytes"]);s!=null&&m(e,["bytesBase64Encoded"],Wi(s));const o=h(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CL(t,e){const n={},s=h(t,["displayName"]);return e!==void 0&&s!=null&&m(e,["displayName"],s),n}function NL(t){const e={},n=h(t,["config"]);return n!=null&&CL(n,e),e}function RL(t,e){const n={},s=h(t,["force"]);return e!==void 0&&s!=null&&m(e,["_query","force"],s),n}function ML(t){const e={},n=h(t,["name"]);n!=null&&m(e,["_url","name"],n);const s=h(t,["config"]);return s!=null&&RL(s,e),e}function IL(t){const e={},n=h(t,["name"]);return n!=null&&m(e,["_url","name"],n),e}function kL(t,e){const n={},s=h(t,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["customMetadata"],l)}const o=h(t,["chunkingConfig"]);return e!==void 0&&o!=null&&m(e,["chunkingConfig"],o),n}function DL(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const s=h(t,["metadata"]);s!=null&&m(e,["metadata"],s);const o=h(t,["done"]);o!=null&&m(e,["done"],o);const l=h(t,["error"]);l!=null&&m(e,["error"],l);const u=h(t,["response"]);return u!=null&&m(e,["response"],UL(u)),e}function PL(t){const e={},n=h(t,["fileSearchStoreName"]);n!=null&&m(e,["_url","file_search_store_name"],n);const s=h(t,["fileName"]);s!=null&&m(e,["fileName"],s);const o=h(t,["config"]);return o!=null&&kL(o,e),e}function UL(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["parent"]);s!=null&&m(e,["parent"],s);const o=h(t,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function LL(t,e){const n={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=h(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),n}function OL(t){const e={},n=h(t,["config"]);return n!=null&&LL(n,e),e}function VL(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=h(t,["fileSearchStores"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["fileSearchStores"],l)}return e}function MT(t,e){const n={},s=h(t,["mimeType"]);e!==void 0&&s!=null&&m(e,["mimeType"],s);const o=h(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const l=h(t,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(f=>f)),m(e,["customMetadata"],d)}const u=h(t,["chunkingConfig"]);return e!==void 0&&u!=null&&m(e,["chunkingConfig"],u),n}function jL(t){const e={},n=h(t,["fileSearchStoreName"]);n!=null&&m(e,["_url","file_search_store_name"],n);const s=h(t,["config"]);return s!=null&&MT(s,e),e}function BL(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GL="Content-Type",HL="X-Server-Timeout",qL="User-Agent",Uh="x-goog-api-client",zL="1.34.0",FL=`google-genai-sdk/${zL}`,$L="v1beta1",JL="v1beta";class KL{constructor(e){var n,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:$L,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:JL,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const o=[this.getRequestUrlInternal(n)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(n))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,s,o){if(n&&n.timeout||o){const l=new AbortController,u=l.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const d=setTimeout(()=>l.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=u}return n&&n.extraBody!==null&&YL(e,n.extraBody),e.headers=await this.getHeadersInternal(n,s),e}async unaryApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async o=>(await zb(o),new Mh(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async o=>(await zb(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return Un(this,arguments,function*(){var s;const o=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";const d="data:",f=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:y}=yield ge(o.read());if(p){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const b=l.decode(y,{stream:!0});try{const E=JSON.parse(b);if("error"in E){const A=JSON.parse(JSON.stringify(E.error)),C=A.status,R=A.code,k=`got status: ${C}. ${JSON.stringify(E)}`;if(R>=400&&R<600)throw new ju({message:k,status:R})}}catch(E){if(E.name==="ApiError")throw E}u+=b;let w=-1,T=0;for(;;){w=-1,T=0;for(const C of f){const R=u.indexOf(C);R!==-1&&(w===-1||R<w)&&(w=R,T=C.length)}if(w===-1)break;const E=u.substring(0,w);u=u.substring(w+T);const A=E.trim();if(A.startsWith(d)){const C=A.substring(d.length).trim();try{const R=new Response(C,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ge(new Mh(R))}catch(R){throw new Error(`exception parsing stream chunk ${C}. ${R}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},n=FL+" "+this.clientOptions.userAgentExtra;return e[qL]=n,e[Uh]=n,e[GL]="application/json",e}async getHeadersInternal(e,n){const s=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))s.append(o,l);e.timeout&&e.timeout>0&&s.append(HL,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,n),s}getFileName(e){var n;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(n=s.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),s}async uploadFile(e,n){var s;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);o.sizeBytes=String(u.size);const d=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const f={file:o},p=this.getFileName(e),y=ne("upload/v1beta/files",f._url),b=await this.fetchUploadUrl(y,o.sizeBytes,o.mimeType,p,f,n==null?void 0:n.httpOptions);return l.upload(e,b,this)}async uploadFileToFileSearchStore(e,n,s){var o;const l=this.clientOptions.uploader,u=await l.stat(n),d=String(u.size),f=(o=s==null?void 0:s.mimeType)!==null&&o!==void 0?o:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(n),b={};s!=null&&MT(s,b);const w=await this.fetchUploadUrl(p,d,f,y,b,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(n,w,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,s,o,l,u){var d;let f={};u?f=u:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${s}`},o?{"X-Goog-Upload-File-Name":o}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:f});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(d=p==null?void 0:p.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function zb(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(s);throw n>=400&&n<600?new ju({message:o,status:n}):new Error(o)}}function YL(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const d=Object.assign({},l);for(const f in u)if(Object.prototype.hasOwnProperty.call(u,f)){const p=u[f],y=d[f];p&&typeof p=="object"&&!Array.isArray(p)&&y&&typeof y=="object"&&!Array.isArray(y)?d[f]=s(y,p):(y&&p&&typeof y!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof y}, New type: ${typeof p}. Overwriting.`),d[f]=p)}return d}const o=s(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XL="mcp_used/unknown";let WL=!1;function IT(t){for(const e of t)if(QL(e)||typeof e=="object"&&"inputSchema"in e)return!0;return WL}function kT(t){var e;const n=(e=t[Uh])!==null&&e!==void 0?e:"";t[Uh]=(n+` ${XL}`).trimStart()}function QL(t){return t!==null&&typeof t=="object"&&t instanceof Up}function ZL(t){return Un(this,arguments,function*(n,s=100){let o,l=0;for(;l<s;){const u=yield ge(n.listTools({cursor:o}));for(const d of u.tools)yield yield ge(d),l++;if(!u.nextCursor)break;o=u.nextCursor}})}class Up{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Up(e,n)}async initialize(){var e,n,s,o;if(this.mcpTools.length>0)return;const l={},u=[];for(const y of this.mcpClients)try{for(var d=!0,f=(n=void 0,Ln(ZL(y))),p;p=await f.next(),e=p.done,!e;d=!0){o=p.value,d=!1;const b=o;u.push(b);const w=b.name;if(l[w])throw new Error(`Duplicate function name ${w} found in MCP tools. Please ensure function names are unique.`);l[w]=y}}catch(b){n={error:b}}finally{try{!d&&!e&&(s=f.return)&&await s.call(f)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),ID(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await o.callTool({name:s.name,arguments:s.args},void 0,l);n.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function eO(t,e,n){const s=new TD;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(s,o),e(s)}class tO{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}async connect(e){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=sO(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),f=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let p=()=>{};const y=new Promise(N=>{p=N}),b=e.callbacks,w=function(){p({})},T=this.apiClient,E={onopen:w,onmessage:N=>{eO(T,b.onmessage,N)},onerror:(n=b==null?void 0:b.onerror)!==null&&n!==void 0?n:function(N){},onclose:(s=b==null?void 0:b.onclose)!==null&&s!==void 0?s:function(N){}},A=this.webSocketFactory.create(f,iO(u),E);A.connect(),await y;const k={setup:{model:Le(this.apiClient,e.model)}};return A.send(JSON.stringify(k)),new nO(A,this.apiClient)}}class nO{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=N2(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=C2(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(qr.PLAY)}pause(){this.sendPlaybackControl(qr.PAUSE)}stop(){this.sendPlaybackControl(qr.STOP)}resetContext(){this.sendPlaybackControl(qr.RESET_CONTEXT)}close(){this.conn.close()}}function iO(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function sO(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rO="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function oO(t,e,n){const s=new _D;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const l=JSON.parse(o);if(t.isVertexAI()){const u=I2(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class aO{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new tO(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,s,o,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let y;const b=this.apiClient.getHeaders();e.config&&e.config.tools&&IT(e.config.tools)&&kT(b);const w=dO(b);if(this.apiClient.isVertexAI())y=`${f}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(w,y);else{const J=this.apiClient.getApiKey();let ie="BidiGenerateContent",Z="key";J!=null&&J.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ie="BidiGenerateContentConstrained",Z="access_token"),y=`${f}/ws/google.ai.generativelanguage.${p}.GenerativeService.${ie}?${Z}=${J}`}let T=()=>{};const E=new Promise(J=>{T=J}),A=e.callbacks,C=function(){var J;(J=A==null?void 0:A.onopen)===null||J===void 0||J.call(A),T({})},R=this.apiClient,k={onopen:C,onmessage:J=>{oO(R,A.onmessage,J)},onerror:(n=A==null?void 0:A.onerror)!==null&&n!==void 0?n:function(J){},onclose:(s=A==null?void 0:A.onclose)!==null&&s!==void 0?s:function(J){}},N=this.webSocketFactory.create(y,cO(w),k);N.connect(),await E;let I=Le(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&I.startsWith("publishers/")){const J=this.apiClient.getProject(),ie=this.apiClient.getLocation();I=`projects/${J}/locations/${ie}/`+I}let L={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Au.AUDIO]}:e.config.responseModalities=[Au.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const H=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],O=[];for(const J of H)if(this.isCallableTool(J)){const ie=J;O.push(await ie.tool())}else O.push(J);O.length>0&&(e.config.tools=O);const W={model:I,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=A2(this.apiClient,W):L=E2(this.apiClient,W),delete L.config,N.send(JSON.stringify(L)),new uO(N,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const lO={turnComplete:!0};class uO{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=_n(n.turns),e.isVertexAI()||(s=s.map(o=>Bu(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(rO)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},lO),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:M2(e)}:n={realtimeInput:R2(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function cO(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function dO(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fb=10;function $b(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Kr(u)){o=!0;break}if(!o)return!0;const l=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Kr(t){return"callTool"in t&&typeof t.callTool=="function"}function fO(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>Kr(o)))!==null&&s!==void 0?s:!1}function Jb(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,o)=>{if(Kr(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&n.push(o)}),n}function Kb(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hO extends yi{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var s,o,l,u,d;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!fO(n)||$b(n.config))return await this.generateContentInternal(f);const p=Jb(n);if(p.length>0){const A=p.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${A}.`)}let y,b;const w=_n(f.contents),T=(l=(o=(s=f.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:Fb;let E=0;for(;E<T&&(y=await this.generateContentInternal(f),!(!y.functionCalls||y.functionCalls.length===0));){const A=y.candidates[0].content,C=[];for(const R of(d=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Kr(R)){const N=await R.callTool(y.functionCalls);C.push(...N)}E++,b={role:"user",parts:C},f.contents=_n(f.contents),f.contents.push(A),f.contents.push(b),Kb(f.config)&&(w.push(A),w.push(b))}return Kb(f.config)&&(y.automaticFunctionCallingHistory=w),y},this.generateContentStream=async n=>{var s,o,l,u,d;if(this.maybeMoveToResponseJsonSchem(n),$b(n.config)){const b=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(b)}const f=Jb(n);if(f.length>0){const b=f.map(w=>`tools[${w}]`).join(", ");throw new Error(`Incompatible tools found at ${b}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(o=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,y=(d=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(p&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var o;let l;const u=[];if(s!=null&&s.generatedImages)for(const f of s.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((o=f==null?void 0:f.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=f==null?void 0:f.safetyAttributes:u.push(f);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async n=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Ds(mi.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async n=>{const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async n=>{let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var s,o,l,u,d,f;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=n.video)===null||s===void 0)&&s.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((f=(d=n.source)===null||d===void 0?void 0:d.video)===null||f===void 0)&&f.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,s,o;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const u=await Promise.all(l.map(async f=>Kr(f)?await f.tool():f)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&IT(e.config.tools)){const f=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let p=Object.assign({},f);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),kT(p),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return d}async initAfcToolsMap(e){var n,s,o;const l=new Map;for(const u of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if(Kr(u)){const d=u,f=await d.tool();for(const p of(o=f.functionDeclarations)!==null&&o!==void 0?o:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,d)}}return l}async processAfcStream(e){var n,s,o;const l=(o=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:Fb;let u=!1,d=0;const f=await this.initAfcToolsMap(e);return(function(p,y,b){return Un(this,arguments,function*(){for(var w,T,E,A,C,R;d<l;){u&&(d++,u=!1);const L=yield ge(p.processParamsMaybeAddMcpUsage(b)),H=yield ge(p.generateContentStreamInternal(L)),O=[],W=[];try{for(var k=!0,N=(T=void 0,Ln(H)),I;I=yield ge(N.next()),w=I.done,!w;k=!0){A=I.value,k=!1;const J=A;if(yield yield ge(J),J.candidates&&(!((C=J.candidates[0])===null||C===void 0)&&C.content)){W.push(J.candidates[0].content);for(const ie of(R=J.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(d<l&&ie.functionCall){if(!ie.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(ie.functionCall.name)){const Z=yield ge(y.get(ie.functionCall.name).callTool([ie.functionCall]));O.push(...Z)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${ie.functionCall.name}`)}}}}catch(J){T={error:J}}finally{try{!k&&!w&&(E=N.return)&&(yield ge(E.call(N)))}finally{if(T)throw T.error}}if(O.length>0){u=!0;const J=new ta;J.candidates=[{content:{role:"user",parts:O}}],yield yield ge(J);const ie=[];ie.push(...W),ie.push({role:"user",parts:O});const Z=_n(b.contents).concat(ie);b.contents=Z}else break}})})(this,f,e)}async generateContentInternal(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=Gb(this.apiClient,e);return d=ne("{model}:generateContent",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=qb(y),w=new ta;return Object.assign(w,b),w})}else{const p=Bb(this.apiClient,e);return d=ne("{model}:generateContent",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=Hb(y),w=new ta;return Object.assign(w,b),w})}}async generateContentStreamInternal(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=Gb(this.apiClient,e);return d=ne("{model}:streamGenerateContent?alt=sse",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(b){return Un(this,arguments,function*(){var w,T,E,A;try{for(var C=!0,R=Ln(b),k;k=yield ge(R.next()),w=k.done,!w;C=!0){A=k.value,C=!1;const N=A,I=qb(yield ge(N.json()));I.sdkHttpResponse={headers:N.headers};const L=new ta;Object.assign(L,I),yield yield ge(L)}}catch(N){T={error:N}}finally{try{!C&&!w&&(E=R.return)&&(yield ge(E.call(R)))}finally{if(T)throw T.error}}})})}else{const p=Bb(this.apiClient,e);return d=ne("{model}:streamGenerateContent?alt=sse",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(b){return Un(this,arguments,function*(){var w,T,E,A;try{for(var C=!0,R=Ln(b),k;k=yield ge(R.next()),w=k.done,!w;C=!0){A=k.value,C=!1;const N=A,I=Hb(yield ge(N.json()));I.sdkHttpResponse={headers:N.headers};const L=new ta;Object.assign(L,I),yield yield ge(L)}}catch(N){T={error:N}}finally{try{!C&&!w&&(E=R.return)&&(yield ge(E.call(R)))}finally{if(T)throw T.error}}})})}}async embedContent(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=aU(this.apiClient,e);return d=ne("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=uU(y),w=new Tb;return Object.assign(w,b),w})}else{const p=oU(this.apiClient,e);return d=ne("{model}:batchEmbedContents",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=lU(y),w=new Tb;return Object.assign(w,b),w})}}async generateImagesInternal(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=bU(this.apiClient,e);return d=ne("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=_U(y),w=new Sb;return Object.assign(w,b),w})}else{const p=xU(this.apiClient,e);return d=ne("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=wU(y),w=new Sb;return Object.assign(w,b),w})}}async editImageInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=nU(this.apiClient,e);return l=ne("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:f.headers},y})),o.then(f=>{const p=iU(f),y=new dD;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=bL(this.apiClient,e);return l=ne("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:f.headers},y})),o.then(f=>{const p=wL(f),y=new fD;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=tL(this.apiClient,e);return l=ne("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=nL(f),y=new hD;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=lL(this.apiClient,e);return l=ne("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=uL(f),y=new pD;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=jU(this.apiClient,e);return d=ne("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>Ph(y))}else{const p=VU(this.apiClient,e);return d=ne("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>Dh(y))}}async listInternal(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=KU(this.apiClient,e);return d=ne("{models_url}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=XU(y),w=new Eb;return Object.assign(w,b),w})}else{const p=JU(this.apiClient,e);return d=ne("{models_url}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=YU(y),w=new Eb;return Object.assign(w,b),w})}}async update(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=vL(this.apiClient,e);return d=ne("{model}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>Ph(y))}else{const p=yL(this.apiClient,e);return d=ne("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>Dh(y))}}async delete(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=Q2(this.apiClient,e);return d=ne("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=eU(y),w=new Ab;return Object.assign(w,b),w})}else{const p=W2(this.apiClient,e);return d=ne("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=Z2(y),w=new Ab;return Object.assign(w,b),w})}}async countTokens(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=K2(this.apiClient,e);return d=ne("{model}:countTokens",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=X2(y),w=new Cb;return Object.assign(w,b),w})}else{const p=J2(this.apiClient,e);return d=ne("{model}:countTokens",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=Y2(y),w=new Cb;return Object.assign(w,b),w})}}async computeTokens(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=B2(this.apiClient,e);return l=ne("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:f.headers},y})),o.then(f=>{const p=G2(f),y=new mD;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=NU(this.apiClient,e);return d=ne("{model}:predictLongRunning",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>{const b=AU(y),w=new Cu;return Object.assign(w,b),w})}else{const p=CU(this.apiClient,e);return d=ne("{model}:predictLongRunning",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>{const b=EU(y),w=new Cu;return Object.assign(w,b),w})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pO extends yi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=rD(e);return d=ne("{operationName}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u}else{const p=sD(e);return d=ne("{operationName}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u}}async fetchPredictVideosOperationInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=Wk(e);return l=ne("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mO(t){const e={},n=h(t,["data"]);if(n!=null&&m(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function gO(t){const e={},n=h(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>EO(l))),m(e,["parts"],o)}const s=h(t,["role"]);return s!=null&&m(e,["role"],s),e}function yO(t,e,n){const s={},o=h(e,["expireTime"]);n!==void 0&&o!=null&&m(n,["expireTime"],o);const l=h(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&m(n,["newSessionExpireTime"],l);const u=h(e,["uses"]);n!==void 0&&u!=null&&m(n,["uses"],u);const d=h(e,["liveConnectConstraints"]);n!==void 0&&d!=null&&m(n,["bidiGenerateContentSetup"],SO(t,d));const f=h(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&m(n,["fieldMask"],f),s}function vO(t,e){const n={},s=h(e,["config"]);return s!=null&&m(n,["config"],yO(t,s,n)),n}function xO(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const s=h(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function bO(t){const e={},n=h(t,["id"]);n!=null&&m(e,["id"],n);const s=h(t,["args"]);s!=null&&m(e,["args"],s);const o=h(t,["name"]);if(o!=null&&m(e,["name"],o),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wO(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function _O(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function TO(t,e){const n={},s=h(t,["generationConfig"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig"],s);const o=h(t,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const l=h(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const u=h(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=h(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const f=h(t,["maxOutputTokens"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","maxOutputTokens"],f);const p=h(t,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const y=h(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const b=h(t,["speechConfig"]);e!==void 0&&b!=null&&m(e,["setup","generationConfig","speechConfig"],Pp(b));const w=h(t,["thinkingConfig"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","thinkingConfig"],w);const T=h(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],T);const E=h(t,["systemInstruction"]);e!==void 0&&E!=null&&m(e,["setup","systemInstruction"],gO(jt(E)));const A=h(t,["tools"]);if(e!==void 0&&A!=null){let H=to(A);Array.isArray(H)&&(H=H.map(O=>CO(eo(O)))),m(e,["setup","tools"],H)}const C=h(t,["sessionResumption"]);e!==void 0&&C!=null&&m(e,["setup","sessionResumption"],AO(C));const R=h(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],R);const k=h(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&m(e,["setup","outputAudioTranscription"],k);const N=h(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&m(e,["setup","realtimeInputConfig"],N);const I=h(t,["contextWindowCompression"]);e!==void 0&&I!=null&&m(e,["setup","contextWindowCompression"],I);const L=h(t,["proactivity"]);if(e!==void 0&&L!=null&&m(e,["setup","proactivity"],L),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function SO(t,e){const n={},s=h(e,["model"]);s!=null&&m(n,["setup","model"],Le(t,s));const o=h(e,["config"]);return o!=null&&m(n,["config"],TO(o,n)),n}function EO(t){const e={},n=h(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const s=h(t,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=h(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=h(t,["fileData"]);l!=null&&m(e,["fileData"],xO(l));const u=h(t,["functionCall"]);u!=null&&m(e,["functionCall"],bO(u));const d=h(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const f=h(t,["inlineData"]);f!=null&&m(e,["inlineData"],mO(f));const p=h(t,["text"]);p!=null&&m(e,["text"],p);const y=h(t,["thought"]);y!=null&&m(e,["thought"],y);const b=h(t,["thoughtSignature"]);b!=null&&m(e,["thoughtSignature"],b);const w=h(t,["videoMetadata"]);return w!=null&&m(e,["videoMetadata"],w),e}function AO(t){const e={},n=h(t,["handle"]);if(n!=null&&m(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function CO(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(b=>b)),m(e,["functionDeclarations"],y)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=h(t,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=h(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const u=h(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],wO(d));const f=h(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],_O(f));const p=h(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NO(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${n}.${l}`);e.push(...o)}else e.push(n)}return e.join(",")}function RO(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const l=NO(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(p=>u.includes(p)?`generationConfig.${p}`:p));const f=[];l&&f.push(l),d.length>0&&f.push(...d),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class MO extends yi{constructor(e){super(),this.apiClient=e}async create(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=vO(this.apiClient,e);l=ne("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const f=RO(d,e.config);return o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IO(t,e){const n={},s=h(t,["force"]);return e!==void 0&&s!=null&&m(e,["_query","force"],s),n}function kO(t){const e={},n=h(t,["name"]);n!=null&&m(e,["_url","name"],n);const s=h(t,["config"]);return s!=null&&IO(s,e),e}function DO(t){const e={},n=h(t,["name"]);return n!=null&&m(e,["_url","name"],n),e}function PO(t,e){const n={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=h(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),n}function UO(t){const e={},n=h(t,["parent"]);n!=null&&m(e,["_url","parent"],n);const s=h(t,["config"]);return s!=null&&PO(s,e),e}function LO(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const s=h(t,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=h(t,["documents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OO extends yi{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ds(mi.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:n.parent,config:s.config}),await this.listInternal(n),n)}async get(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=DO(e);return l=ne("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(e){var n,s;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=kO(e);o=ne("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=UO(e);return l=ne("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=LO(f),y=new gD;return Object.assign(y,p),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VO extends yi{constructor(e,n=new OO(e)){super(),this.apiClient=e,this.documents=n,this.list=async(s={})=>new Ds(mi.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=NL(e);return l=ne("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async get(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=IL(e);return l=ne("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(e){var n,s;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ML(e);o=ne("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=OL(e);return l=ne("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=VL(f),y=new yD;return Object.assign(y,p),y})}}async uploadToFileSearchStoreInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=jL(e);return l=ne("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=BL(f),y=new vD;return Object.assign(y,p),y})}}async importFile(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=PL(e);return l=ne("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=DL(f),y=new Rp;return Object.assign(y,p),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let DT=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return DT=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};const jO=()=>DT();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lh(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Oh=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tn extends Error{}class qt extends Tn{constructor(e,n,s,o){super(`${qt.makeMessage(e,n,s)}`),this.status=e,this.headers=o,this.error=n}static makeMessage(e,n,s){const o=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,n,s,o){if(!e||!o)return new qu({message:s,cause:Oh(n)});const l=n;return e===400?new UT(e,l,s,o):e===401?new LT(e,l,s,o):e===403?new OT(e,l,s,o):e===404?new VT(e,l,s,o):e===409?new jT(e,l,s,o):e===422?new BT(e,l,s,o):e===429?new GT(e,l,s,o):e>=500?new HT(e,l,s,o):new qt(e,l,s,o)}}class Vh extends qt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class qu extends qt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class PT extends qu{constructor({message:e}={}){super({message:e??"Request timed out."})}}class UT extends qt{}class LT extends qt{}class OT extends qt{}class VT extends qt{}class jT extends qt{}class BT extends qt{}class GT extends qt{}class HT extends qt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BO=/^[a-z][a-z0-9+.-]*:/i,GO=t=>BO.test(t);let jh=t=>(jh=Array.isArray,jh(t));const HO=jh;let qO=HO;const Yb=qO;function zO(t){if(!t)return!0;for(const e in t)return!1;return!0}function FO(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const $O=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Tn(`${t} must be an integer`);if(e<0)throw new Tn(`${t} must be a positive integer`);return e},JO=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KO=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YO(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const XO=()=>{var t,e,n,s,o;const l=YO();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":Wb(Deno.build.os),"X-Stainless-Arch":Xb(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":Wb((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Xb((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const u=WO();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function WO(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const o=s[1]||0,l=s[2]||0,u=s[3]||0;return{browser:e,version:`${o}.${l}.${u}`}}}return null}const Xb=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Wb=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let su;const QO=()=>su??(su=XO());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZO(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function qT(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function eV(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return qT({start(){},async pull(n){const{done:s,value:o}=await e.next();s?n.close():n.enqueue(o)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function zT(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function tV(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const s=t.getReader(),o=s.cancel();s.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nV=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FT=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Bf(t,e,n){return FT(),new File(t,e??"unknown_file",n)}function iV(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const sV=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $T=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",rV=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&$T(t),oV=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function aV(t,e,n){if(FT(),t=await t,rV(t))return t instanceof File?t:Bf([await t.arrayBuffer()],t.name);if(oV(t)){const o=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Bf(await Bh(o),e,n)}const s=await Bh(t);if(e||(e=iV(t)),!(n!=null&&n.type)){const o=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return Bf(s,e,n)}async function Bh(t){var e,n,s,o,l;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if($T(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(sV(t))try{for(var d=!0,f=Ln(t),p;p=await f.next(),e=p.done,!e;d=!0){o=p.value,d=!1;const y=o;u.push(...await Bh(y))}}catch(y){n={error:y}}finally{try{!d&&!e&&(s=f.return)&&await s.call(f)}finally{if(n)throw n.error}}else{const y=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${y?`; constructor: ${y}`:""}${lV(t)}`)}return u}function lV(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JT{constructor(e){this._client=e}}JT._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KT(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Qb=Object.freeze(Object.create(null)),uV=(t=KT)=>(function(n,...s){if(n.length===1)return n[0];let o=!1;const l=[],u=n.reduce((y,b,w)=>{var T,E,A;/[?#]/.test(b)&&(o=!0);const C=s[w];let R=(o?encodeURIComponent:t)(""+C);return w!==s.length&&(C==null||typeof C=="object"&&C.toString===((A=Object.getPrototypeOf((E=Object.getPrototypeOf((T=C.hasOwnProperty)!==null&&T!==void 0?T:Qb))!==null&&E!==void 0?E:Qb))===null||A===void 0?void 0:A.toString))&&(R=C+"",l.push({start:y.length+b.length,length:R.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),y+b+(w===s.length?"":R)},""),d=u.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=f.exec(d))!==null;)l.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(l.sort((y,b)=>y.start-b.start),l.length>0){let y=0;const b=l.reduce((w,T)=>{const E=" ".repeat(T.start-y),A="^".repeat(T.length);return y=T.start+T.length,w+E+A},"");throw new Tn(`Path parameters result in path with invalid segments:
${l.map(w=>w.error).join(`
`)}
${u}
${b}`)}return u}),ru=uV(KT);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YT extends JT{create(e,n){var s;const{api_version:o=this._client.apiVersion}=e,l=Ru(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new Tn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Tn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ru`/${o}/interactions`,Object.assign(Object.assign({body:l},n),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,n={},s){const{api_version:o=this._client.apiVersion}=n??{};return this._client.delete(ru`/${o}/interactions/${e}`,s)}cancel(e,n={},s){const{api_version:o=this._client.apiVersion}=n??{};return this._client.post(ru`/${o}/interactions/${e}/cancel`,s)}get(e,n={},s){var o;const l=n??{},{api_version:u=this._client.apiVersion}=l,d=Ru(l,["api_version"]);return this._client.get(ru`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},s),{stream:(o=n==null?void 0:n.stream)!==null&&o!==void 0?o:!1}))}}YT._key=Object.freeze(["interactions"]);class XT extends YT{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cV(t){let e=0;for(const o of t)e+=o.length;const n=new Uint8Array(e);let s=0;for(const o of t)n.set(o,s),s+=o.length;return n}let ou;function Lp(t){let e;return(ou??(e=new globalThis.TextEncoder,ou=e.encode.bind(e)))(t)}let au;function Zb(t){let e;return(au??(e=new globalThis.TextDecoder,au=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zu{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Lp(e):e;this.buffer=cV([this.buffer,n]);const s=[];let o;for(;(o=dV(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){s.push(Zb(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,u=Zb(this.buffer.subarray(0,l));s.push(u),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}zu.NEWLINE_CHARS=new Set([`
`,"\r"]);zu.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function dV(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function fV(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mu={off:0,error:200,warn:300,info:400,debug:500},ew=(t,e,n)=>{if(t){if(FO(Mu,t))return t;Gt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Mu))}`)}};function aa(){}function lu(t,e,n){return!e||Mu[t]>Mu[n]?aa:e[t].bind(e)}const hV={error:aa,warn:aa,info:aa,debug:aa};let tw=new WeakMap;function Gt(t){var e;const n=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return hV;const o=tw.get(n);if(o&&o[0]===s)return o[1];const l={error:lu("error",n,s),warn:lu("warn",n,s),info:lu("info",n,s),debug:lu("debug",n,s)};return tw.set(n,[s,l]),l}const Ss=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zr{constructor(e,n,s){this.iterator=e,this.controller=n,this.client=s}static fromSSEResponse(e,n,s){let o=!1;const l=s?Gt(s):console;function u(){return Un(this,arguments,function*(){var f,p,y,b;if(o)throw new Tn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let w=!1;try{try{for(var T=!0,E=Ln(pV(e,n)),A;A=yield ge(E.next()),f=A.done,!f;T=!0){b=A.value,T=!1;const C=b;if(!w)if(C.data.startsWith("[DONE]")){w=!0;continue}else try{yield yield ge(JSON.parse(C.data))}catch(R){throw l.error("Could not parse message into JSON:",C.data),l.error("From chunk:",C.raw),R}}}catch(C){p={error:C}}finally{try{!T&&!f&&(y=E.return)&&(yield ge(y.call(E)))}finally{if(p)throw p.error}}w=!0}catch(C){if(Lh(C))return yield ge(void 0);throw C}finally{w||n.abort()}})}return new zr(u,n,s)}static fromReadableStream(e,n,s){let o=!1;function l(){return Un(this,arguments,function*(){var f,p,y,b;const w=new zu,T=zT(e);try{for(var E=!0,A=Ln(T),C;C=yield ge(A.next()),f=C.done,!f;E=!0){b=C.value,E=!1;const R=b;for(const k of w.decode(R))yield yield ge(k)}}catch(R){p={error:R}}finally{try{!E&&!f&&(y=A.return)&&(yield ge(y.call(A)))}finally{if(p)throw p.error}}for(const R of w.flush())yield yield ge(R)})}function u(){return Un(this,arguments,function*(){var f,p,y,b;if(o)throw new Tn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let w=!1;try{try{for(var T=!0,E=Ln(l()),A;A=yield ge(E.next()),f=A.done,!f;T=!0){b=A.value,T=!1;const C=b;w||C&&(yield yield ge(JSON.parse(C)))}}catch(C){p={error:C}}finally{try{!T&&!f&&(y=E.return)&&(yield ge(y.call(E)))}finally{if(p)throw p.error}}w=!0}catch(C){if(Lh(C))return yield ge(void 0);throw C}finally{w||n.abort()}})}return new zr(u,n,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),o=l=>({next:()=>{if(l.length===0){const u=s.next();e.push(u),n.push(u)}return l.shift()}});return[new zr(()=>o(e),this.controller,this.client),new zr(()=>o(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return qT({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:o,done:l}=await n.next();if(l)return s.close();const u=Lp(JSON.stringify(o)+`
`);s.enqueue(u)}catch(o){s.error(o)}},async cancel(){var s;await((s=n.return)===null||s===void 0?void 0:s.call(n))}})}}function pV(t,e){return Un(this,arguments,function*(){var s,o,l,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Tn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Tn("Attempted to iterate over a response with no body");const d=new gV,f=new zu,p=zT(t.body);try{for(var y=!0,b=Ln(mV(p)),w;w=yield ge(b.next()),s=w.done,!s;y=!0){u=w.value,y=!1;const T=u;for(const E of f.decode(T)){const A=d.decode(E);A&&(yield yield ge(A))}}}catch(T){o={error:T}}finally{try{!y&&!s&&(l=b.return)&&(yield ge(l.call(b)))}finally{if(o)throw o.error}}for(const T of f.flush()){const E=d.decode(T);E&&(yield yield ge(E))}})}function mV(t){return Un(this,arguments,function*(){var n,s,o,l;let u=new Uint8Array;try{for(var d=!0,f=Ln(t),p;p=yield ge(f.next()),n=p.done,!n;d=!0){l=p.value,d=!1;const y=l;if(y==null)continue;const b=y instanceof ArrayBuffer?new Uint8Array(y):typeof y=="string"?Lp(y):y;let w=new Uint8Array(u.length+b.length);w.set(u),w.set(b,u.length),u=w;let T;for(;(T=fV(u))!==-1;)yield yield ge(u.slice(0,T)),u=u.slice(T)}}catch(y){s={error:y}}finally{try{!d&&!n&&(o=f.return)&&(yield ge(o.call(f)))}finally{if(s)throw s.error}}u.length>0&&(yield yield ge(u))})}class gV{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,o]=yV(e,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}}function yV(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function vV(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:o,startTime:l}=e,u=await(async()=>{var d;if(e.options.stream)return Gt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):zr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type"),p=(d=f==null?void 0:f.split(";")[0])===null||d===void 0?void 0:d.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await n.json():await n.text()})();return Gt(t).debug(`[${s}] response parsed`,Ss({retryOfRequestLogID:o,url:n.url,status:n.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Op extends Promise{constructor(e,n,s=vV){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Op(this.client,this.responsePromise,async(n,s)=>e(await this.parseResponse(n,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WT=Symbol("brand.privateNullableHeaders");function*xV(t){if(!t)return;if(WT in t){const{values:s,nulls:o}=t;yield*s.entries();for(const l of o)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Yb(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const o=s[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const l=Yb(s[1])?s[1]:[s[1]];let u=!1;for(const d of l)d!==void 0&&(e&&!u&&(u=!0,yield[o,null]),yield[o,d])}}const na=t=>{const e=new Headers,n=new Set;for(const s of t){const o=new Set;for(const[l,u]of xV(s)){const d=l.toLowerCase();o.has(d)||(e.delete(l),o.add(d)),u===null?(e.delete(l),n.add(d)):(e.append(l,u),n.delete(d))}}return{[WT]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gf=t=>{var e,n,s,o,l,u;if(typeof globalThis.process<"u")return(s=(n=(e=Fk)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||l===void 0?void 0:l.call(o,t))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var QT;class Fu{constructor(e){var n,s,o,l,u,d,f,{baseURL:p=Gf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(n=Gf("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:b="v1beta"}=e,w=Ru(e,["baseURL","apiKey","apiVersion"]);const T=Object.assign(Object.assign({apiKey:y,apiVersion:b},w),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=T.baseURL,this.timeout=(s=T.timeout)!==null&&s!==void 0?s:Fu.DEFAULT_TIMEOUT,this.logger=(o=T.logger)!==null&&o!==void 0?o:console;const E="warn";this.logLevel=E,this.logLevel=(u=(l=ew(T.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:ew(Gf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:E,this.fetchOptions=T.fetchOptions,this.maxRetries=(d=T.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(f=T.fetch)!==null&&f!==void 0?f:ZO(),this.encoder=nV,this._options=T,this.apiKey=y,this.apiVersion=b,this.clientAdapter=T.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=na([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return na([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return na([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,s])=>typeof s<"u").map(([n,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(n)}=`;throw new Tn(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Pr}`}defaultIdempotencyKey(){return`stainless-node-retry-${jO()}`}makeStatusError(e,n,s,o){return qt.generate(e,n,s,o)}buildURL(e,n,s){const o=!this.baseURLOverridden()&&s||this.baseURL,l=GO(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return zO(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(l.search=this.stringifyQuery(n)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(o=>Object.assign({method:e,path:n},o)))}request(e,n=null){return new Op(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){var o,l,u;const d=await e,f=(o=d.maxRetries)!==null&&o!==void 0?o:this.maxRetries;n==null&&(n=f),await this.prepareOptions(d);const{req:p,url:y,timeout:b}=await this.buildRequest(d,{retryCount:f-n});await this.prepareRequest(p,{url:y,options:d});const w="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),T=s===void 0?"":`, retryOf: ${s}`,E=Date.now();if(Gt(this).debug(`[${w}] sending request`,Ss({retryOfRequestLogID:s,method:d.method,url:y,options:d,headers:p.headers})),!((l=d.signal)===null||l===void 0)&&l.aborted)throw new Vh;const A=new AbortController,C=await this.fetchWithTimeout(y,p,b,A).catch(Oh),R=Date.now();if(C instanceof globalThis.Error){const N=`retrying, ${n} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new Vh;const I=Lh(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(n)return Gt(this).info(`[${w}] connection ${I?"timed out":"failed"} - ${N}`),Gt(this).debug(`[${w}] connection ${I?"timed out":"failed"} (${N})`,Ss({retryOfRequestLogID:s,url:y,durationMs:R-E,message:C.message})),this.retryRequest(d,n,s??w);throw Gt(this).info(`[${w}] connection ${I?"timed out":"failed"} - error; no more retries left`),Gt(this).debug(`[${w}] connection ${I?"timed out":"failed"} (error; no more retries left)`,Ss({retryOfRequestLogID:s,url:y,durationMs:R-E,message:C.message})),I?new PT:new qu({cause:C})}const k=`[${w}${T}] ${p.method} ${y} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${R-E}ms`;if(!C.ok){const N=await this.shouldRetry(C);if(n&&N){const J=`retrying, ${n} attempts remaining`;return await tV(C.body),Gt(this).info(`${k} - ${J}`),Gt(this).debug(`[${w}] response error (${J})`,Ss({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:R-E})),this.retryRequest(d,n,s??w,C.headers)}const I=N?"error; no more retries left":"error; not retryable";Gt(this).info(`${k} - ${I}`);const L=await C.text().catch(J=>Oh(J).message),H=JO(L),O=H?void 0:L;throw Gt(this).debug(`[${w}] response error (${I})`,Ss({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,message:O,durationMs:Date.now()-E})),this.makeStatusError(C.status,H,O,C.headers)}return Gt(this).info(k),Gt(this).debug(`[${w}] response start`,Ss({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:R-E})),{response:C,options:d,controller:A,requestLogID:w,retryOfRequestLogID:s,startTime:E}}async fetchWithTimeout(e,n,s,o){const l=n||{},{signal:u,method:d}=l,f=Ru(l,["signal","method"]);u&&u.addEventListener("abort",()=>o.abort());const p=setTimeout(()=>o.abort(),s),y=globalThis.ReadableStream&&f.body instanceof globalThis.ReadableStream||typeof f.body=="object"&&f.body!==null&&Symbol.asyncIterator in f.body,b=Object.assign(Object.assign(Object.assign({signal:o.signal},y?{duplex:"half"}:{}),{method:"GET"}),f);d&&(b.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,b)}finally{clearTimeout(p)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,o){var l;let u;const d=o==null?void 0:o.get("retry-after-ms");if(d){const p=parseFloat(d);Number.isNaN(p)||(u=p)}const f=o==null?void 0:o.get("retry-after");if(f&&!u){const p=parseFloat(f);Number.isNaN(p)?u=Date.parse(f)-Date.now():u=p*1e3}if(!(u&&0<=u&&u<60*1e3)){const p=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,p)}return await KO(u),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,u=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:n=0}={}){var s,o,l;const u=Object.assign({},e),{method:d,path:f,query:p,defaultBaseURL:y}=u,b=this.buildURL(f,p,y);"timeout"in u&&$O("timeout",u.timeout),u.timeout=(s=u.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:w,body:T}=this.buildBody({options:u}),E=await this.buildHeaders({options:e,method:d,bodyHeaders:w,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:E},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&T instanceof globalThis.ReadableStream&&{duplex:"half"}),T&&{body:T}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:b,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:o}){let l={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=na([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),QO()),this._options.defaultHeaders,s,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=na([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:eV(e)}:this.encoder({body:e,headers:s})}}Fu.DEFAULT_TIMEOUT=6e4;class At extends Fu{constructor(){super(...arguments),this.interactions=new XT(this)}}QT=At;At.GeminiNextGenAPIClient=QT;At.GeminiNextGenAPIClientError=Tn;At.APIError=qt;At.APIConnectionError=qu;At.APIConnectionTimeoutError=PT;At.APIUserAbortError=Vh;At.NotFoundError=VT;At.ConflictError=jT;At.RateLimitError=GT;At.BadRequestError=UT;At.AuthenticationError=LT;At.InternalServerError=HT;At.PermissionDeniedError=OT;At.UnprocessableEntityError=BT;At.toFile=aV;At.Interactions=XT;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bV(t,e){const n={},s=h(t,["name"]);return s!=null&&m(n,["_url","name"],s),n}function wV(t,e){const n={},s=h(t,["name"]);return s!=null&&m(n,["_url","name"],s),n}function _V(t,e){const n={},s=h(t,["sdkHttpResponse"]);return s!=null&&m(n,["sdkHttpResponse"],s),n}function TV(t,e){const n={},s=h(t,["sdkHttpResponse"]);return s!=null&&m(n,["sdkHttpResponse"],s),n}function SV(t,e,n){const s={};if(h(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=h(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&m(e,["displayName"],o),h(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=h(t,["epochCount"]);e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","epochCount"],l);const u=h(t,["learningRateMultiplier"]);if(u!=null&&m(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),h(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=h(t,["batchSize"]);e!==void 0&&d!=null&&m(e,["tuningTask","hyperparameters","batchSize"],d);const f=h(t,["learningRate"]);if(e!==void 0&&f!=null&&m(e,["tuningTask","hyperparameters","learningRate"],f),h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function EV(t,e,n){const s={};let o=h(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const T=h(t,["validationDataset"]);e!==void 0&&T!=null&&m(e,["supervisedTuningSpec"],nw(T))}else if(o==="PREFERENCE_TUNING"){const T=h(t,["validationDataset"]);e!==void 0&&T!=null&&m(e,["preferenceOptimizationSpec"],nw(T))}const l=h(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&m(e,["tunedModelDisplayName"],l);const u=h(t,["description"]);e!==void 0&&u!=null&&m(e,["description"],u);let d=h(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const T=h(t,["epochCount"]);e!==void 0&&T!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],T)}else if(d==="PREFERENCE_TUNING"){const T=h(t,["epochCount"]);e!==void 0&&T!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],T)}let f=h(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const T=h(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],T)}else if(f==="PREFERENCE_TUNING"){const T=h(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],T)}let p=h(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const T=h(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],T)}else if(p==="PREFERENCE_TUNING"){const T=h(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],T)}let y=h(n,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const T=h(t,["adapterSize"]);e!==void 0&&T!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],T)}else if(y==="PREFERENCE_TUNING"){const T=h(t,["adapterSize"]);e!==void 0&&T!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],T)}if(h(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const b=h(t,["labels"]);e!==void 0&&b!=null&&m(e,["labels"],b);const w=h(t,["beta"]);return e!==void 0&&w!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],w),s}function AV(t,e){const n={},s=h(t,["baseModel"]);s!=null&&m(n,["baseModel"],s);const o=h(t,["preTunedModel"]);o!=null&&m(n,["preTunedModel"],o);const l=h(t,["trainingDataset"]);l!=null&&OV(l);const u=h(t,["config"]);return u!=null&&SV(u,n),n}function CV(t,e){const n={},s=h(t,["baseModel"]);s!=null&&m(n,["baseModel"],s);const o=h(t,["preTunedModel"]);o!=null&&m(n,["preTunedModel"],o);const l=h(t,["trainingDataset"]);l!=null&&VV(l,n,e);const u=h(t,["config"]);return u!=null&&EV(u,n,e),n}function NV(t,e){const n={},s=h(t,["name"]);return s!=null&&m(n,["_url","name"],s),n}function RV(t,e){const n={},s=h(t,["name"]);return s!=null&&m(n,["_url","name"],s),n}function MV(t,e,n){const s={},o=h(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const l=h(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const u=h(t,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),s}function IV(t,e,n){const s={},o=h(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const l=h(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const u=h(t,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),s}function kV(t,e){const n={},s=h(t,["config"]);return s!=null&&MV(s,n),n}function DV(t,e){const n={},s=h(t,["config"]);return s!=null&&IV(s,n),n}function PV(t,e){const n={},s=h(t,["sdkHttpResponse"]);s!=null&&m(n,["sdkHttpResponse"],s);const o=h(t,["nextPageToken"]);o!=null&&m(n,["nextPageToken"],o);const l=h(t,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>ZT(d))),m(n,["tuningJobs"],u)}return n}function UV(t,e){const n={},s=h(t,["sdkHttpResponse"]);s!=null&&m(n,["sdkHttpResponse"],s);const o=h(t,["nextPageToken"]);o!=null&&m(n,["nextPageToken"],o);const l=h(t,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Gh(d))),m(n,["tuningJobs"],u)}return n}function LV(t,e){const n={},s=h(t,["name"]);s!=null&&m(n,["model"],s);const o=h(t,["name"]);return o!=null&&m(n,["endpoint"],o),n}function OV(t,e){const n={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=h(t,["examples"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),m(n,["examples","examples"],o)}return n}function VV(t,e,n){const s={};let o=h(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=h(t,["gcsUri"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=h(t,["gcsUri"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=h(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=h(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=h(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(h(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function ZT(t,e){const n={},s=h(t,["sdkHttpResponse"]);s!=null&&m(n,["sdkHttpResponse"],s);const o=h(t,["name"]);o!=null&&m(n,["name"],o);const l=h(t,["state"]);l!=null&&m(n,["state"],mT(l));const u=h(t,["createTime"]);u!=null&&m(n,["createTime"],u);const d=h(t,["tuningTask","startTime"]);d!=null&&m(n,["startTime"],d);const f=h(t,["tuningTask","completeTime"]);f!=null&&m(n,["endTime"],f);const p=h(t,["updateTime"]);p!=null&&m(n,["updateTime"],p);const y=h(t,["description"]);y!=null&&m(n,["description"],y);const b=h(t,["baseModel"]);b!=null&&m(n,["baseModel"],b);const w=h(t,["_self"]);return w!=null&&m(n,["tunedModel"],LV(w)),n}function Gh(t,e){const n={},s=h(t,["sdkHttpResponse"]);s!=null&&m(n,["sdkHttpResponse"],s);const o=h(t,["name"]);o!=null&&m(n,["name"],o);const l=h(t,["state"]);l!=null&&m(n,["state"],mT(l));const u=h(t,["createTime"]);u!=null&&m(n,["createTime"],u);const d=h(t,["startTime"]);d!=null&&m(n,["startTime"],d);const f=h(t,["endTime"]);f!=null&&m(n,["endTime"],f);const p=h(t,["updateTime"]);p!=null&&m(n,["updateTime"],p);const y=h(t,["error"]);y!=null&&m(n,["error"],y);const b=h(t,["description"]);b!=null&&m(n,["description"],b);const w=h(t,["baseModel"]);w!=null&&m(n,["baseModel"],w);const T=h(t,["tunedModel"]);T!=null&&m(n,["tunedModel"],T);const E=h(t,["preTunedModel"]);E!=null&&m(n,["preTunedModel"],E);const A=h(t,["supervisedTuningSpec"]);A!=null&&m(n,["supervisedTuningSpec"],A);const C=h(t,["preferenceOptimizationSpec"]);C!=null&&m(n,["preferenceOptimizationSpec"],C);const R=h(t,["tuningDataStats"]);R!=null&&m(n,["tuningDataStats"],R);const k=h(t,["encryptionSpec"]);k!=null&&m(n,["encryptionSpec"],k);const N=h(t,["partnerModelTuningSpec"]);N!=null&&m(n,["partnerModelTuningSpec"],N);const I=h(t,["customBaseModel"]);I!=null&&m(n,["customBaseModel"],I);const L=h(t,["experiment"]);L!=null&&m(n,["experiment"],L);const H=h(t,["labels"]);H!=null&&m(n,["labels"],H);const O=h(t,["outputUri"]);O!=null&&m(n,["outputUri"],O);const W=h(t,["pipelineJob"]);W!=null&&m(n,["pipelineJob"],W);const J=h(t,["serviceAccount"]);J!=null&&m(n,["serviceAccount"],J);const ie=h(t,["tunedModelDisplayName"]);ie!=null&&m(n,["tunedModelDisplayName"],ie);const Z=h(t,["veoTuningSpec"]);return Z!=null&&m(n,["veoTuningSpec"],Z),n}function jV(t,e){const n={},s=h(t,["sdkHttpResponse"]);s!=null&&m(n,["sdkHttpResponse"],s);const o=h(t,["name"]);o!=null&&m(n,["name"],o);const l=h(t,["metadata"]);l!=null&&m(n,["metadata"],l);const u=h(t,["done"]);u!=null&&m(n,["done"],u);const d=h(t,["error"]);return d!=null&&m(n,["error"],d),n}function nw(t,e){const n={},s=h(t,["gcsUri"]);s!=null&&m(n,["validationDatasetUri"],s);const o=h(t,["vertexDatasetResource"]);return o!=null&&m(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BV extends yi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ds(mi.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var s;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((s=n.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},n),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),l=await this.tuneMldevInternal(o);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:Rh.JOB_STATE_QUEUED}}}}async getInternal(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=RV(e);return d=ne("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>Gh(y))}else{const p=NV(e);return d=ne("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>ZT(y))}}async listInternal(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=DV(e);return d=ne("tuningJobs",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=UV(y),w=new Nb;return Object.assign(w,b),w})}else{const p=kV(e);return d=ne("tunedModels",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=PV(y),w=new Nb;return Object.assign(w,b),w})}}async cancel(e){var n,s,o,l;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=wV(e);return d=ne("{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=TV(y),w=new Rb;return Object.assign(w,b),w})}else{const p=bV(e);return d=ne("{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const b=_V(y),w=new Rb;return Object.assign(w,b),w})}}async tuneInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=CV(e,e);return l=ne("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:f.headers},y})),o.then(f=>Gh(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=AV(e);return l=ne("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:f.headers},y})),o.then(f=>jV(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GV{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const HV=1024*1024*8,qV=3,zV=1e3,FV=2,Iu="x-goog-upload-status";async function $V(t,e,n){var s;const o=await eS(t,e,n),l=await(o==null?void 0:o.json());if(((s=o==null?void 0:o.headers)===null||s===void 0?void 0:s[Iu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function JV(t,e,n){var s;const o=await eS(t,e,n),l=await(o==null?void 0:o.json());if(((s=o==null?void 0:o.headers)===null||s===void 0?void 0:s[Iu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=uT(l),d=new Mp;return Object.assign(d,u),d}async function eS(t,e,n){var s,o;let l=0,u=0,d=new Mh(new Response),f="upload";for(l=t.size;u<l;){const p=Math.min(HV,l-u),y=t.slice(u,u+p);u+p>=l&&(f+=", finalize");let b=0,w=zV;for(;b<qV&&(d=await n.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((s=d==null?void 0:d.headers)===null||s===void 0)&&s[Iu]));)b++,await YV(w),w=w*FV;if(u+=p,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[Iu])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function KV(t){return{size:t.size,type:t.type}}function YV(t){return new Promise(e=>setTimeout(e,t))}class XV{async upload(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $V(e,n,s)}async uploadToFileSearchStore(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await JV(e,n,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KV(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WV{create(e,n,s){return new QV(e,n,s)}}class QV{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iw="x-goog-api-key";class ZV{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(iw)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(iw,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const e5="gl-node/";class $u{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new At({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=Yk(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new ZV(this.apiKey);this.apiClient=new KL({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:e5+"web",uploader:new XV,downloader:new GV}),this.models=new hO(this.apiClient),this.live=new aO(this.apiClient,o,new WV),this.batches=new SP(this.apiClient),this.chats=new r2(this.models,this.apiClient),this.caches=new n2(this.apiClient),this.files=new m2(this.apiClient),this.operations=new pO(this.apiClient),this.authTokens=new MO(this.apiClient),this.tunings=new BV(this.apiClient),this.fileSearchStores=new VO(this.apiClient)}}const Vp=t=>{const e=t.match(/^data:(.*);base64,/);return e?e[1]:"image/jpeg"};async function t5(t,e,n,s){var f,p,y,b,w,T,E,A,C,R,k;const o=new $u({apiKey:"AIzaSyCMxBK-lOMXXdxe_IxWCMl75mmO7ylBNjE"}),d=[{text:`
    Generate a professional, family-friendly viral high-CTR YouTube thumbnail image.
    CONCEPT: "${t}"
    VISUAL STYLE: ${e}
    COMPOSITION: ${["Dynamic close-up, high contrast, vibrant cinematic colors, focus on main subject.","Cinematic wide angle, dramatic depth of field, atmospheric lighting, professional composition.","Action-heavy scene, bold saturation, high energy, extreme attention-grabbing detail."][s]}

    IMPORTANT GUIDELINES:
    1. Create a safe, appropriate, and professional thumbnail suitable for all audiences.
    2. Do not include any text, letters, or numbers in the image.
    3. If people are in the provided assets, incorporate them naturally and professionally into the scene.
    4. Ensure the result is 16:9 aspect ratio, high definition.
    5. Focus on clarity, high impact, and visual appeal.
    6. Keep content appropriate, professional, and suitable for YouTube's community guidelines.
  `},...n.map(N=>({inlineData:{mimeType:Vp(N),data:N.split(",")[1]}}))];try{const I=(f=(await o.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:d},config:{imageConfig:{aspectRatio:"16:9"},safetySettings:[{category:Gr.HARM_CATEGORY_HATE_SPEECH,threshold:Hr.BLOCK_MEDIUM_AND_ABOVE},{category:Gr.HARM_CATEGORY_HARASSMENT,threshold:Hr.BLOCK_MEDIUM_AND_ABOVE},{category:Gr.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Hr.BLOCK_MEDIUM_AND_ABOVE},{category:Gr.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Hr.BLOCK_MEDIUM_AND_ABOVE}]}})).candidates)==null?void 0:f[0];if(console.log("Gemini API Response:",{hasCandidate:!!I,finishReason:I==null?void 0:I.finishReason,hasContent:!!(I!=null&&I.content),partsCount:(y=(p=I==null?void 0:I.content)==null?void 0:p.parts)==null?void 0:y.length,parts:(w=(b=I==null?void 0:I.content)==null?void 0:b.parts)==null?void 0:w.map(L=>{var H;return{hasText:!!L.text,hasInlineData:!!L.inlineData,mimeType:(H=L.inlineData)==null?void 0:H.mimeType}})}),(I==null?void 0:I.finishReason)==="SAFETY"||(I==null?void 0:I.finishReason)==="RECITATION")throw new Error(`Safety filters blocked this generation. Please try:
 A more specific, professional prompt
 Avoiding potentially sensitive topics
 Describing the image in more detail`);if(I!=null&&I.finishReason&&I.finishReason!=="STOP"&&console.warn("Unexpected finish reason:",I.finishReason),I!=null&&I.safetyRatings){const L=I.safetyRatings.filter(H=>H.probability==="HIGH"||H.probability==="MEDIUM"||H.blocked);if(L.length>0){const H=L.map(O=>O.category||"unknown").join(", ");throw new Error(`Content was flagged as: ${H}. Please modify your prompt to be more appropriate.`)}}if(!((T=I==null?void 0:I.content)!=null&&T.parts))throw console.error("No content parts in response:",I),new Error("Safety filters blocked this generation. Try modifying your prompt to be more specific and professional.");for(const L of I.content.parts){if(L.inlineData&&L.inlineData.data)return`data:${L.inlineData.mimeType||"image/png"};base64,${L.inlineData.data}`;L.text&&console.warn("Received text instead of image:",L.text)}throw console.error("No image data in response. Full candidate:",JSON.stringify(I,null,2)),new Error("No image data returned from API. The model may have returned text instead of an image. Please try a different prompt or check the API response format.")}catch(N){throw console.error("Gemini Image Error:",N),console.error("Error details:",{message:N==null?void 0:N.message,code:N==null?void 0:N.code,status:N==null?void 0:N.status,response:N==null?void 0:N.response}),(E=N==null?void 0:N.message)!=null&&E.includes("Safety filters")||(A=N==null?void 0:N.message)!=null&&A.includes("SAFETY")?new Error(`Content was blocked by safety filters. Please try:
1. Using a more specific, professional prompt
2. Avoiding potentially sensitive topics
3. Describing the image in more detail`):((C=N==null?void 0:N.message)!=null&&C.includes("API key")||(N==null?void 0:N.code)===400||(N==null?void 0:N.status)===400)&&(R=N==null?void 0:N.message)!=null&&R.includes("API key not valid")?new Error("Invalid API key. Please check your GEMINI_API_KEY in .env.local and make sure it's valid."):(k=N==null?void 0:N.message)!=null&&k.includes("No image data returned")?new Error(`The API didn't return image data. This might be due to:
1. Model limitations or availability
2. Prompt format issues
3. API response format changes

Please try:
 A simpler, more specific prompt
 Checking browser console for detailed error logs
 Trying again in a moment`):N}}async function n5(t,e){const n=new $u({apiKey:"AIzaSyCMxBK-lOMXXdxe_IxWCMl75mmO7ylBNjE"});try{const s=await n.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{text:`Analyze this YouTube thumbnail for the concept: "${e}". 
            Evaluate it based on:
            1. Visual Hierarchy (is the subject clear?)
            2. Color Palette (is it eye-catching?)
            3. Emotional Trigger (does it provoke curiosity?)
            
            Return a JSON object with:
            - score (0-100)
            - label (e.g., "Viral Potential", "Needs Work", "Algorithm Bait")
            - feedback (one sentence of specific advice)`},{inlineData:{mimeType:Vp(t),data:t.split(",")[1]}}]},config:{responseMimeType:"application/json",responseSchema:{type:Vt.OBJECT,properties:{score:{type:Vt.INTEGER},label:{type:Vt.STRING},feedback:{type:Vt.STRING}},required:["score","label","feedback"]}}});return JSON.parse(s.text||"{}")}catch{return{score:85,label:"Analyzing...",feedback:"High viral potential detected."}}}async function i5(t,e,n){const s=new $u({apiKey:"AIzaSyCMxBK-lOMXXdxe_IxWCMl75mmO7ylBNjE"});try{const o=[{text:`Generate 3 viral clickbait titles for these thumbnails. Concept: "${t}". Shared Description.`},...n.map(u=>({inlineData:{mimeType:Vp(u),data:u.split(",")[1]}}))],l=await s.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:o},config:{responseMimeType:"application/json",responseSchema:{type:Vt.OBJECT,properties:{titles:{type:Vt.ARRAY,items:{type:Vt.STRING}},description:{type:Vt.STRING}},required:["titles","description"]}}});return JSON.parse(l.text||"{}")}catch{return{titles:["Viral A","Viral B","Viral C"],description:"Optimized."}}}async function s5(t){var n;const e=new $u({apiKey:"AIzaSyCMxBK-lOMXXdxe_IxWCMl75mmO7ylBNjE"});try{return((n=(await e.models.generateContent({model:"gemini-3-flash-preview",contents:`Enhance this idea for an AI image generator focusing on cinematic lighting and composition: ${t}`})).text)==null?void 0:n.trim())||t}catch{return t}}function r5(){if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")try{return crypto.randomUUID()}catch(t){console.warn("crypto.randomUUID() failed, falling back to manual generation:",t)}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}const o5=({template:t,isSelected:e,onClick:n})=>{const[s,o]=B.useState(!1),[l,u]=B.useState(!1);return g.jsxs(ee.button,{onClick:n,layout:!0,initial:!1,whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},className:`relative flex items-center w-full p-3 rounded-xl border transition-colors text-left group overflow-hidden ${e?"bg-primary/10 border-primary shadow-[0_0_15px_rgba(140,37,244,0.3)]":"bg-surface-light border-white/5 hover:border-white/10 hover:bg-white/5"}`,children:[e&&g.jsx(ee.div,{layoutId:"active-glow",className:"absolute inset-0 bg-primary/5 z-0",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),g.jsx("div",{className:"relative w-12 h-12 shrink-0 rounded-lg overflow-hidden bg-black/40 border border-white/5 mr-3 z-10",children:t.preview_url&&!s?g.jsxs(g.Fragment,{children:[g.jsx("img",{src:t.preview_url,alt:t.name,className:`w-full h-full object-cover transition-opacity duration-300 ${l?"opacity-100":"opacity-0"}`,onLoad:()=>u(!0),onError:()=>o(!0)}),!l&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/5 animate-pulse"})]}):g.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white/5",children:g.jsx("span",{className:"material-symbols-outlined text-white/20 text-lg",children:"image"})})}),g.jsxs("div",{className:"flex flex-col flex-1 min-w-0 pr-2 z-10",children:[g.jsx("span",{className:`text-xs font-bold truncate transition-colors ${e?"text-white":"text-text-secondary group-hover:text-white"}`,children:t.name}),t.description&&g.jsx("span",{className:`text-[10px] mt-0.5 truncate transition-colors ${e?"text-white/70":"text-text-secondary/60 group-hover:text-text-secondary"}`,children:t.description})]}),g.jsx("div",{className:"relative w-5 h-5 flex items-center justify-center z-10",children:g.jsx(Ji,{children:e&&g.jsx(ee.span,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:"material-symbols-outlined text-sm text-primary",children:"check_circle"})})})]})},a5=({value:t,onChange:e,className:n})=>{const[s,o]=B.useState([]),[l,u]=B.useState(!0),[d,f]=B.useState(null);return B.useEffect(()=>{let p=!0;return(async()=>{try{u(!0);const b=await Lk();p&&(o(b),!t&&b.length>0&&e(b[0]))}catch(b){p&&(f("Failed to load templates"),console.error(b))}finally{p&&u(!1)}})(),()=>{p=!1}},[]),l?g.jsxs("div",{className:n,children:[g.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-text-secondary mb-2 block",children:"Style Template"}),g.jsx("div",{className:"grid grid-cols-1 gap-2 animate-pulse",children:[1,2,3].map(p=>g.jsxs("div",{className:"flex items-center p-2 rounded-xl border border-white/5 bg-surface-light h-[60px]",children:[g.jsx("div",{className:"w-12 h-12 rounded-lg bg-white/5 mr-3"}),g.jsxs("div",{className:"flex-1 space-y-2",children:[g.jsx("div",{className:"h-3 w-24 bg-white/5 rounded"}),g.jsx("div",{className:"h-2 w-full bg-white/5 rounded"})]})]},p))})]}):d?g.jsxs("div",{className:n,children:[g.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-text-secondary mb-2 block",children:"Style Template"}),g.jsxs("div",{className:"p-3 rounded-xl border border-red-500/20 bg-red-500/10 text-red-400 text-xs",children:[d,g.jsx("button",{onClick:()=>window.location.reload(),className:"block mt-2 underline hover:text-red-300",children:"Retry"})]})]}):g.jsxs("div",{className:n,children:[g.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-text-secondary mb-2 block",children:"Style Template"}),g.jsx("div",{className:"grid grid-cols-1 gap-2",children:s.map(p=>g.jsx(o5,{template:p,isSelected:t===p.id,onClick:()=>e(p)},p.id))})]})},sw=({url:t,title:e,channel:n,subscribersText:s,viewsText:o,uploadedText:l,description:u,suggestions:d,onSelectSuggestion:f,onExit:p})=>{var N;const[y,b]=B.useState(!1),[w,T]=B.useState(0),E=900,A=B.useRef(null);B.useEffect(()=>(y?A.current=window.setInterval(()=>{T(I=>Math.min(E,I+1))},1e3):A.current&&(window.clearInterval(A.current),A.current=null),()=>{A.current&&(window.clearInterval(A.current),A.current=null)}),[y]);const C=B.useMemo(()=>Math.round(w/E*100),[w,E]),R=B.useMemo(()=>{const I=Math.floor(w/60),L=String(w%60).padStart(2,"0");return`${I}:${L}`},[w]),k=B.useMemo(()=>{const I=Math.floor(E/60),L=String(E%60).padStart(2,"0");return`${I}:${L}`},[E]);return g.jsx("div",{className:"w-full max-w-7xl mx-auto px-4 lg:px-0","aria-label":"YouTube Preview",children:g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[g.jsxs("div",{className:"lg:col-span-2",children:[g.jsxs("div",{className:"relative aspect-video bg-black",children:[g.jsx("img",{src:t,className:"absolute inset-0 w-full h-full object-contain"}),g.jsx("button",{onClick:()=>b(I=>!I),className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 rounded-full bg-white/10 text-white border border-white/20 flex items-center justify-center hover:bg-white/20","aria-label":y?"Pause":"Play",children:g.jsx("span",{className:"material-symbols-outlined",children:y?"pause":"play_arrow"})}),g.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-4 py-2 bg-gradient-to-t from-black/60 to-transparent",children:g.jsxs("div",{className:"flex items-center gap-3 text-white",children:[g.jsx("button",{onClick:()=>b(I=>!I),"aria-label":y?"Pause":"Play",children:g.jsx("span",{className:"material-symbols-outlined",children:y?"pause":"play_arrow"})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{className:"h-1 bg-white/20 rounded-full",children:g.jsx("div",{className:"h-1 bg-red-600 rounded-full",style:{width:`${C}%`}})}),g.jsx("input",{type:"range",min:0,max:E,value:w,onChange:I=>T(Number(I.target.value)),className:"w-full opacity-0","aria-label":"Seek"})]}),g.jsxs("div",{className:"text-xs",children:[R," / ",k]}),g.jsx("button",{"aria-label":"Volume",children:g.jsx("span",{className:"material-symbols-outlined",children:"volume_up"})}),g.jsx("button",{"aria-label":"Settings",children:g.jsx("span",{className:"material-symbols-outlined",children:"settings"})}),g.jsx("button",{"aria-label":"Mini player",children:g.jsx("span",{className:"material-symbols-outlined",children:"picture_in_picture_alt"})}),g.jsx("button",{"aria-label":"Theater mode",children:g.jsx("span",{className:"material-symbols-outlined",children:"crop_16_9"})}),g.jsx("button",{"aria-label":"Fullscreen",children:g.jsx("span",{className:"material-symbols-outlined",children:"fullscreen"})})]})})]}),g.jsx("div",{className:"mt-4",children:g.jsx("h1",{className:"text-2xl font-bold leading-tight line-clamp-2",children:e})}),g.jsxs("div",{className:"mt-3 text-sm text-text-secondary",children:[o,"  ",l]}),g.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-primary flex items-center justify-center font-bold text-xs",children:(N=n[0])==null?void 0:N.toUpperCase()}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm font-bold",children:n}),g.jsx("div",{className:"text-xs text-text-secondary",children:s})]}),g.jsx("button",{className:"ml-4 h-9 px-4 rounded-full bg-white text-black text-xs font-black",children:"Subscribe"})]}),g.jsxs("div",{className:"flex items-center gap-3 text-white",children:[g.jsx("button",{className:"h-9 px-3 rounded-full bg-white/10 hover:bg-white/20 text-xs font-bold","aria-label":"Like",children:""}),g.jsx("button",{className:"h-9 px-3 rounded-full bg-white/10 hover:bg-white/20 text-xs font-bold","aria-label":"Dislike",children:""}),g.jsx("button",{className:"h-9 px-3 rounded-full bg-white/10 hover:bg-white/20 text-xs font-bold","aria-label":"Share",children:"Share"}),g.jsx("button",{className:"h-9 px-3 rounded-full bg-white/10 hover:bg-white/20 text-xs font-bold","aria-label":"Download",children:"Download"}),g.jsx("button",{className:"h-9 px-3 rounded-full bg-white/10 hover:bg-white/20 text-xs font-bold","aria-label":"Clip",children:"Clip"}),g.jsx("button",{className:"h-9 px-3 rounded-full bg-white/10 hover:bg-white/20 text-xs font-bold","aria-label":"Save",children:"Save"})]})]}),g.jsxs("div",{className:"mt-4 text-sm text-text-secondary",children:[g.jsx("div",{className:"line-clamp-3 whitespace-pre-line",children:u}),g.jsx("button",{className:"mt-2 text-blue-400 text-xs font-bold",children:"Show more"})]}),p&&g.jsx("div",{className:"mt-6",children:g.jsx("button",{onClick:p,className:"h-9 px-3 rounded-xl border border-white/10 hover:bg-white/5 text-[11px] font-black uppercase tracking-widest",children:"Back"})})]}),g.jsx("aside",{className:"lg:col-span-1",children:g.jsx("div",{className:"space-y-3",children:d.map((I,L)=>g.jsxs("button",{onClick:()=>f(L),className:"w-full text-left flex gap-3 hover:bg-white/5 rounded-md p-1","aria-label":`Open ${I.title}`,children:[g.jsx("div",{className:"w-40 aspect-video bg-black",children:g.jsx("img",{src:I.url,className:"w-full h-full object-cover"})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{className:"text-sm font-bold line-clamp-2",children:I.title}),g.jsx("div",{className:"text-xs text-text-secondary",children:I.channel}),g.jsxs("div",{className:"text-xs text-text-secondary",children:[I.views.toLocaleString()," views  ",I.uploadedText]})]})]},`${I.url}-${L}`))})})]})})},l5=({user:t,onNavigate:e,onLogout:n})=>{const[s,o]=B.useState(""),[l,u]=B.useState("MrBeast Style (High Saturation)"),[d,f]=B.useState(null),[p,y]=B.useState(!1),[b,w]=B.useState(!1),[T,E]=B.useState([]),[A,C]=B.useState(null),[R,k]=B.useState(0),[N,I]=B.useState([]),[L,H]=B.useState([]),[O,W]=B.useState(null),[J,ie]=B.useState(!1),[Z,ye]=B.useState(!1),[ke,Je]=B.useState(!1),[st,z]=B.useState(!1),[Q,ae]=B.useState(!1),[_e,Se]=B.useState(null),[P,Y]=B.useState({}),[te,re]=B.useState({}),[me,we]=B.useState([]),[Te,_t]=B.useState([]),[rt,Qi]=B.useState(null),[io,so]=B.useState(""),[Ju,$n]=B.useState(""),[ro,Ps]=B.useState(!1),[ka,oo]=B.useState(null),[Us,Ls]=B.useState(null),Os=B.useRef(null),[Jn,ao]=B.useState((t==null?void 0:t.credits)||0);B.useEffect(()=>{t&&ao(t.credits)},[t]),B.useEffect(()=>{(async()=>{oo(null),Ps(!0);try{if(!t||!Ut||t.id==="mock-id"){_t([]);return}const se=await Cp(t.id,200);_t(se||[])}catch(se){oo((se==null?void 0:se.message)||"Failed to load history")}finally{Ps(!1)}})()},[t]);const Ge=X=>{if(!X||typeof X!="string")return!1;const se=X.trim();return se.length===0?!1:!!(/^data:image\//i.test(se)||/storage\/v1\/object\/public\//i.test(se)||/\.(png|jpg|jpeg|webp)$/i.test(se))};B.useEffect(()=>{Je(!0);const X=setTimeout(()=>Je(!1),200);return()=>clearTimeout(X)},[T,Te]),B.useEffect(()=>{Jn===0&&z(!0)},[Jn]),B.useEffect(()=>{const X=se=>{se.key==="Escape"&&z(!1)};return st&&window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)},[st]);const Ku=()=>{const X=T[R],se=N[R]||`Watch This: ${s}`,Ve=L[R]||"This will blow your mind. Like, comment, and subscribe for more!",De=(t==null?void 0:t.username)||"ViralThumb AI",Ee=Math.max(800,1e3),Me=Math.max(600,700),Qe=Math.max(0,(window.screen.width-Ee)/2),ft=Math.max(0,(window.screen.height-Me)/2),xi=`popup=yes,width=${Ee},height=${Me},left=${Qe},top=${ft},resizable=yes,scrollbars=yes`,Ye=window.open("","YTPreviewWindow",xi);if(!Ye)return;Ye.document.title="YouTube Preview",Ye.document.body.setAttribute("aria-label","YouTube preview popup"),Ye.document.body.style.margin="0",Ye.document.body.style.background="rgb(15,15,15)";const Sn=Ye.document.head;document.querySelectorAll('link[rel="stylesheet"], style').forEach(tt=>{Sn.appendChild(tt.cloneNode(!0))});const En=Ye.document.createElement("div");En.id="popup-root",Ye.document.body.appendChild(En);const An=Ye.document.createElement("div");An.style.cssText="position:fixed;top:8px;right:8px;z-index:50";const Vn=Ye.document.createElement("button");Vn.innerText="Close",Vn.setAttribute("aria-label","Close popup"),Vn.style.cssText="height:36px;padding:0 12px;border-radius:18px;background:rgba(255,255,255,0.1);color:white;border:1px solid rgba(255,255,255,0.2);cursor:pointer",Vn.onclick=()=>Ye.close(),An.appendChild(Vn),Ye.document.body.appendChild(An);const jn=Ye.document.createElement("div");jn.style.cssText="position:fixed;inset:0;display:flex;align-items:center;justify-content:center;color:white;opacity:0.7",jn.innerText="Loading preview...",Ye.document.body.appendChild(jn),lw.createRoot(En).render(g.jsx(sw,{url:X||void 0,title:se,channel:De,subscribersText:`${Math.floor(1e5+Math.random()*9e5).toLocaleString()} subscribers`,viewsText:`${Math.floor(5e4+Math.random()*95e4).toLocaleString()} views`,uploadedText:"2 hours ago",description:Ve,suggestions:[...T.filter(tt=>Ge(tt)).map((tt,js)=>({url:tt,title:N[js]||`Watch This: ${s}`,channel:De,views:Math.floor(1e5+Math.random()*9e5),uploadedText:"Just now"})).reverse(),...Te.filter(tt=>Ge(tt==null?void 0:tt.output_url)).map(tt=>({url:tt.output_url,title:tt.prompt||"Generated Video",channel:De,views:Math.floor(1e5+Math.random()*9e5),uploadedText:"Recently"}))].filter(tt=>!!tt.url&&tt.url.trim()!==""&&Ge(tt.url)),onSelectSuggestion:tt=>{const Zi=[...T.filter(Tt=>Ge(Tt)).map(Tt=>Tt).reverse(),...Te.filter(Tt=>Ge(Tt==null?void 0:Tt.output_url)).map(Tt=>Tt.output_url)].filter(Tt=>!!Tt&&Tt.trim()!==""&&Ge(Tt))[tt],La=T.findIndex(Tt=>Tt===Zi);La>=0&&k(La)},onExit:()=>Ye.close()})),setTimeout(()=>{jn.remove()},300),Ye.addEventListener("keydown",tt=>{tt.key==="Escape"&&Ye.close()})},Da=X=>{const se=typeof X=="string"?X:X==null?void 0:X.output_url,Ve=typeof X=="string"?"":(X==null?void 0:X.title)||(X==null?void 0:X.prompt)||"",De=typeof X=="string"?"":(X==null?void 0:X.description)||"";Qi(se||null),so(Ve||""),$n(De||"")},Pa=X=>{const se=X.target.files;se&&Array.from(se).forEach(Ve=>{const De=new FileReader;De.onloadend=()=>we(Ee=>[...Ee,De.result].slice(0,3)),De.readAsDataURL(Ve)})},Vs=async()=>{if(!(!s||!t)){if(Jn<=0){z(!0);return}Se(Date.now()),y(!0),E([]),Y({}),C(null),Ls(null);try{if(Jn<3){z(!0),y(!1);return}const X=[];for(let Me=0;Me<3;Me++){const Qe=await t5(s,l,me,Me);Qe&&(X.push(Qe),E(ft=>[...ft,Qe]))}if(X.length===0)throw new Error("No variations were generated. Please try a different prompt.");const se=[];if(t.id!=="mock-id"){E([]);for(let Me=0;Me<X.length;Me++){const Qe=r5();try{console.log(`Uploading variation ${Me+1}/3...`);const{publicUrl:ft}=await Hk(t.id,Qe,X[Me]);se.push(ft)}catch(ft){console.error(`Failed to upload variation ${Me+1}`,ft),se.push(X[Me])}}}else se.push(...X),ao(Me=>Math.max(0,Me-3));E(se);const Ve=await i5(s,l,se);C(Ve);const De=se.map((Me,Qe)=>{var Sn;const ft=(Sn=Ve==null?void 0:Ve.titles)==null?void 0:Sn[Qe];if(ft&&!/viral\s[a-z]/i.test(ft))return ft;const xi=s||"This Changes Everything";return`${["SHOCKING","INSANE","UNBELIEVABLE","GENIUS","SECRET"][Qe%5]}: ${xi} (${Qe+1} Mind-Blowing Tips)`}),Ee=se.map((Me,Qe)=>{const ft=Ve==null?void 0:Ve.description;return`${De[Qe]}

Smash LIKE if this surprised you and SUBSCRIBE for more! Comment your favorite part. Turn on notifications  to never miss out.`});if(I(De),H(Ee),t.id!=="mock-id"){const Me=await jk(t.id,Jn,3);ao(Me),await Bk(t.id,se.map((Qe,ft)=>({url:Qe,prompt:s,style:l,title:Ve.titles[ft]||"Untitled"})));for(let Qe=0;Qe<se.length;Qe++){const ft=se[Qe];await Gk(t.id,s,ft,1,De[Qe]||"Untitled",Ee[Qe]||"")}}}catch(X){console.error(X);const se=X.message||"Generation failed. Please try again.";Ls(se)}finally{const X=_e?Date.now()-_e:0,Ve=Math.max(0,1200-X);setTimeout(()=>{y(!1),Se(null)},Ve)}}},Yu=async X=>{if(!te[X]){re(se=>({...se,[X]:!0}));try{const se=await n5(T[X],s);Y(Ve=>({...Ve,[X]:se}))}finally{re(se=>({...se,[X]:!1}))}}},Ua=()=>{if(T.length===0)return;const X=document.createElement("a");X.href=T[R],X.download=`ViralThumb_${R+1}.png`,X.click()};return t?g.jsxs("div",{className:"flex flex-col h-screen overflow-hidden bg-background",children:[g.jsx(ks,{onNavigate:e,variant:"app",user:{...t,credits:Jn},onLogout:n,activePage:"generator"}),g.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[g.jsxs("aside",{className:"w-[360px] border-r border-white/5 bg-surface p-6 flex flex-col gap-8 overflow-y-auto custom-scrollbar shrink-0",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-primary mb-4",children:"Source Assets"}),g.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[g.jsx(Ji,{children:me.map((X,se)=>g.jsxs(ee.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"relative aspect-square rounded-lg overflow-hidden border border-white/10 group shadow-lg",children:[g.jsx("img",{src:X,className:"w-full h-full object-cover"}),g.jsx("button",{onClick:()=>we(Ve=>Ve.filter((De,Ee)=>Ee!==se)),className:"absolute inset-0 bg-red-600/60 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity duration-200",children:g.jsx("span",{className:"material-symbols-outlined text-white text-sm",children:"delete"})})]},se))}),me.length<3&&g.jsx(ee.button,{onClick:()=>{var X;return(X=Os.current)==null?void 0:X.click()},className:"aspect-square rounded-lg border-2 border-dashed border-white/10 hover:border-primary hover:bg-primary/5 flex items-center justify-center text-text-secondary transition-colors duration-200",whileHover:{scale:1.02},whileTap:{scale:.98},children:g.jsx("span",{className:"material-symbols-outlined",children:"add"})})]}),g.jsx("input",{type:"file",ref:Os,onChange:Pa,className:"hidden",accept:"image/*",multiple:!0})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-text-secondary",children:"Core Concept"}),g.jsxs(ee.button,{onClick:async()=>{if(!s)return;w(!0);const X=await s5(s);o(X),w(!1)},disabled:b||!s,className:"text-[10px] font-black text-primary hover:text-primary-hover uppercase disabled:opacity-30 flex items-center gap-1",whileHover:{scale:1.05},whileTap:{scale:.95},children:[g.jsx("span",{className:"material-symbols-outlined text-[12px]",children:b?"auto_awesome":"magic_button"}),b?"Enhancing...":"Magic Prompt"]})]}),g.jsxs("div",{className:"relative group",children:[g.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-primary to-indigo-600 rounded-xl opacity-0 group-focus-within:opacity-50 blur transition duration-500"}),g.jsx("textarea",{value:s,onChange:X=>o(X.target.value),placeholder:"What is your video about? (e.g. 'I spent 24 hours in a locked mall')",className:"relative w-full h-32 p-4 bg-surface-light border border-white/5 rounded-xl text-white outline-none focus:border-primary/50 text-sm resize-none transition-all placeholder:text-white/20"})]})]}),g.jsx(a5,{value:(d==null?void 0:d.id)||null,onChange:X=>{f(X),X!=null&&X.name&&u(X.name)},className:"space-y-2"}),Us&&g.jsxs("div",{className:"p-3 rounded-xl bg-red-500/10 border border-red-500/20 text-red-400 text-xs break-words",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1 font-bold",children:[g.jsx("span",{className:"material-symbols-outlined text-sm",children:"error"}),"Generation Failed"]}),Us]}),g.jsx("div",{className:"sticky bottom-0 z-10 pt-2 bg-gradient-to-t from-surface to-transparent",children:g.jsxs(ee.button,{onClick:Vs,disabled:p||!s||st,className:"relative group w-full h-[4.2rem] overflow-hidden bg-gradient-to-r from-primary to-indigo-500 hover:from-primary-hover hover:to-indigo-600 text-white font-black rounded-2xl shadow-neon disabled:opacity-50 flex items-center justify-center gap-3",whileHover:{scale:1.02},whileTap:{scale:.98},"aria-label":"Generate Viral Options",title:p?"Generating...":s?Jn<3?"Requires 3 credits":void 0:"Enter a core concept to enable",children:[g.jsx("div",{className:"absolute inset-0 -translate-x-full group-hover:animate-[shimmer_1.5s_infinite] bg-gradient-to-r from-transparent via-white/20 to-transparent z-0 pointer-events-none"}),g.jsx("div",{className:"relative z-10 flex items-center gap-3",children:p?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"material-symbols-outlined animate-spin",children:"progress_activity"}),g.jsx("span",{className:"animate-pulse",children:"Generating..."})]}):g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"material-symbols-outlined group-hover:animate-bounce",children:"bolt"}),g.jsx("span",{children:"Generate Viral Options"}),g.jsx("span",{className:"ml-1 px-2 py-1 bg-black/20 rounded-lg text-xs font-bold text-white/90",children:"3 Credits"})]})})]})})]}),g.jsxs("main",{className:"flex-1 bg-background overflow-y-auto p-8 flex flex-col items-center relative",children:[Te.length>0&&g.jsxs("div",{className:"w-full max-w-6xl mb-8",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h3",{className:"text-sm font-bold text-white/90",children:"Recent Generations"}),g.jsxs("button",{onClick:()=>{},className:"text-xs font-medium text-primary hover:text-white transition-colors flex items-center gap-1 group",children:["View All",g.jsx("span",{className:"material-symbols-outlined text-[14px] group-hover:translate-x-1 transition-transform",children:"arrow_forward"})]})]}),ke&&g.jsx("div",{className:"mb-2 text-xs text-text-secondary",children:"Filtering generated images..."}),ro?g.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 custom-scrollbar","aria-busy":"true","aria-live":"polite",children:Array.from({length:8}).map((X,se)=>g.jsx("div",{className:"w-[160px] h-[90px] rounded-xl bg-white/5 animate-pulse shrink-0","aria-hidden":"true"},se))}):ka?g.jsx("div",{className:"p-4 rounded-xl bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:ka}):g.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 scroll-smooth custom-scrollbar",role:"list","aria-label":"History thumbnails list",children:Te.filter(X=>Ge(X==null?void 0:X.output_url)).map((X,se)=>g.jsx(ee.button,{onClick:()=>Da(X),className:"relative w-[160px] h-[90px] rounded-xl overflow-hidden ring-1 ring-white/10 shrink-0 group",whileHover:{scale:1.05,boxShadow:"0 10px 30px -10px rgba(0,0,0,0.5)",borderColor:"rgba(255,255,255,0.2)"},whileTap:{scale:.95},"aria-label":"Open historical preview",role:"listitem",children:X.output_url?g.jsxs(g.Fragment,{children:[g.jsx("img",{src:X.output_url,width:160,height:90,loading:"lazy",decoding:"async",className:"w-full h-full object-cover bg-black transition-transform duration-500 group-hover:scale-110",alt:"History thumbnail"}),g.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:g.jsx("span",{className:"material-symbols-outlined text-white text-2xl drop-shadow-lg",children:"play_circle"})})]}):g.jsx("div",{className:"w-full h-full bg-white/5 flex items-center justify-center",children:g.jsx("span",{className:"material-symbols-outlined text-white/20",children:"broken_image"})})},`${X.id||se}`))})]}),g.jsx(Ji,{children:st&&g.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 bg-black/40 backdrop-blur-sm flex items-center justify-center px-4",onClick:()=>z(!1),children:g.jsxs(ee.div,{initial:{scale:.96,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.98,opacity:0},transition:{type:"spring",stiffness:260,damping:24},className:"w-full max-w-md rounded-3xl bg-surface ring-1 ring-white/10 shadow-2xl p-6 relative",onClick:X=>X.stopPropagation(),children:[g.jsx("div",{className:"w-12 h-12 rounded-xl bg-black/60 border border-white/10 flex items-center justify-center mx-auto mb-4",children:g.jsx("span",{className:"material-symbols-outlined text-yellow-400",children:"workspace_premium"})}),g.jsx("h3",{className:"text-2xl font-black text-center mb-2",children:"Youve Hit Your Free Limit"}),g.jsx("p",{className:"text-text-secondary text-center mb-6",children:"Youve created some amazing designs. Upgrade to Pro to unlock unlimited generations and remove all limits."}),g.jsxs(ee.button,{onClick:()=>e("pricing"),className:"w-full h-12 rounded-2xl bg-gradient-to-r from-primary to-indigo-500 text-white font-black shadow-neon hover:from-primary-hover hover:to-indigo-600",whileHover:{scale:1.02},whileTap:{scale:.98},children:[g.jsx("span",{className:"material-symbols-outlined align-middle mr-1",children:"rocket"}),"Upgrade Plan"]}),g.jsx("button",{onClick:()=>e("pricing"),className:"mt-3 w-full text-center text-sm text-text-secondary hover:text-white",children:"See pricing"})]})})}),T.length>0?g.jsxs("div",{className:"w-full max-w-6xl space-y-6",children:[J&&g.jsx(sw,{url:T[R]||void 0,title:N[R]||`Watch This: ${s}`,channel:(t==null?void 0:t.username)||"ViralThumb AI",subscribersText:`${Math.floor(1e5+Math.random()*9e5).toLocaleString()} subscribers`,viewsText:`${Math.floor(5e4+Math.random()*95e4).toLocaleString()} views`,uploadedText:"2 hours ago",description:L[R]||"This will blow your mind. Like, comment, and subscribe for more!",suggestions:[...T.filter(X=>Ge(X)).map((X,se)=>({url:X,title:N[se]||`Watch This: ${s}`,channel:(t==null?void 0:t.username)||"ViralThumb AI",views:Math.floor(1e4+Math.random()*9e5),uploadedText:"Just now"})).reverse(),...Te.filter(X=>Ge(X==null?void 0:X.output_url)).map(X=>({url:X.output_url,title:X.prompt||"Generated Video",channel:(t==null?void 0:t.username)||"ViralThumb AI",views:Math.floor(1e4+Math.random()*9e5),uploadedText:"Recently"}))].filter(X=>!!X.url&&X.url.trim()!==""&&Ge(X.url)),onSelectSuggestion:X=>{const Ve=[...T.filter(Ee=>Ge(Ee)).map(Ee=>Ee).reverse(),...Te.filter(Ee=>Ge(Ee==null?void 0:Ee.output_url)).map(Ee=>Ee.output_url)].filter(Ee=>!!Ee&&Ee.trim()!==""&&Ge(Ee))[X],De=T.findIndex(Ee=>Ee===Ve);De>=0&&k(De)},onOpenPopup:Ku}),T.map((X,se)=>{var En;if(!Ge(X))return null;const Ve=N[se]||`Watch This: ${s}`,De=L[se]||"This will blow your mind. Like, comment, and subscribe for more!",Ee=(t==null?void 0:t.username)||"ViralThumb AI",Me=Math.floor(1e4+Math.random()*9e5),ft=new Date(Date.now()-(se+1)*36e5).toLocaleDateString(),xi=Math.floor(5+Math.random()*15),Ye=String(Math.floor(Math.random()*60)).padStart(2,"0"),Sn=`${xi}:${Ye}`;return g.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:se*.1},className:"grid grid-cols-1 lg:grid-cols-2 gap-6 p-4 rounded-2xl border border-white/10 bg-surface group hover:border-primary/20 transition-all",children:[g.jsxs("div",{className:"flex flex-col gap-3",children:[g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("div",{className:"w-9 h-9 rounded-full bg-primary flex items-center justify-center text-xs font-black shrink-0 shadow-lg",children:(En=Ee[0])==null?void 0:En.toUpperCase()}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("h3",{className:"text-lg font-bold leading-tight text-white group-hover:text-primary transition-colors",children:Ve}),P[se]&&g.jsxs(ee.div,{initial:{scale:0},animate:{scale:1},className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-green-500/10 text-green-400 border border-green-500/20 text-[11px] font-bold",children:[P[se].score,"% CTR"]})]}),g.jsxs("p",{className:"text-sm text-text-secondary",children:[Ee,"  ",Me.toLocaleString()," views  ",ft]})]})]}),g.jsx("p",{className:"text-sm text-text-secondary leading-relaxed",children:De}),g.jsxs("div",{className:"flex gap-3 mt-auto",children:[g.jsxs(ee.button,{onClick:()=>{k(se),Yu(se)},disabled:te[se],className:"h-10 px-4 rounded-xl border border-white/10 hover:bg-white/5 text-[11px] font-black uppercase tracking-widest transition-colors flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[te[se]?g.jsx("span",{className:"material-symbols-outlined animate-spin text-sm",children:"refresh"}):g.jsx("span",{className:"material-symbols-outlined text-sm",children:"analytics"}),te[se]?"Analyzing...":"AI CTR Check"]}),g.jsxs(ee.button,{onClick:()=>{k(se),Ua()},className:"h-10 px-4 rounded-xl bg-white text-black font-black text-[11px] uppercase tracking-widest shadow-lg hover:bg-gray-200 transition-colors flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[g.jsx("span",{className:"material-symbols-outlined text-sm",children:"download"}),"Download"]})]})]}),g.jsxs("div",{className:"group/image relative aspect-video rounded-xl overflow-hidden bg-black ring-1 ring-white/10 shadow-2xl",children:[X?g.jsx("img",{src:X,alt:"Generated thumbnail",className:"w-full h-full object-cover transition-transform duration-700 group-hover/image:scale-105"}):null,g.jsx("div",{className:"absolute bottom-2 right-2 px-2 py-1 rounded bg-black/80 text-white text-[11px] font-bold backdrop-blur-sm",children:Sn}),g.jsxs("div",{className:`absolute inset-0 bg-black/40 opacity-0 ${p&&Z?"pointer-events-none":"group-hover/image:opacity-100"} transition-all duration-300 flex items-center justify-center gap-3 backdrop-blur-[2px]`,children:[g.jsx(ee.button,{onClick:()=>{k(se)},className:"h-10 px-4 rounded-xl bg-white text-black font-black text-[11px] uppercase tracking-widest shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Edit this image",children:"Edit"}),g.jsx(ee.button,{onClick:()=>{k(se),ie(!0),ye(!0)},className:"h-10 px-4 rounded-xl border border-white/10 bg-black/60 text-white font-black text-[11px] uppercase tracking-widest backdrop-blur-md hover:bg-black/80",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Open YouTube preview",children:"YouTube Preview"})]})]})]},se)})]}):g.jsx(Ji,{mode:"wait",children:p?g.jsx(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"flex-1 flex flex-col items-center justify-center text-center p-12",children:g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"w-32 h-32 relative mx-auto",children:[g.jsx("div",{className:"absolute inset-0 border-4 border-primary/20 rounded-full animate-ping"}),g.jsx("div",{className:"absolute inset-0 border-4 border-primary/20 rounded-full"}),g.jsx("div",{className:"absolute inset-0 border-4 border-primary border-t-transparent rounded-full animate-spin shadow-[0_0_30px_rgba(140,37,244,0.5)]"}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx("span",{className:"material-symbols-outlined text-4xl text-primary animate-pulse",children:"auto_awesome"})})]}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-3xl font-black mb-3 bg-clip-text text-transparent bg-gradient-to-r from-white to-white/60 animate-pulse",children:"Consulting the Algorithm..."}),g.jsx("p",{className:"text-text-secondary text-lg max-w-md mx-auto",children:"We are generating 3 distinct visual strategies optimized for high CTR."})]})]})},"generating"):g.jsx(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"flex-1 flex flex-col items-center justify-center text-center p-12",children:g.jsxs("div",{className:"max-w-md space-y-8",children:[g.jsx("div",{className:"w-40 h-40 mx-auto rounded-3xl bg-gradient-to-br from-surface-light to-surface border border-white/5 flex items-center justify-center shadow-2xl shadow-black/50 group hover:scale-105 transition-transform duration-500",children:g.jsx("span",{className:"material-symbols-outlined text-8xl text-white/10 group-hover:text-primary/20 transition-colors duration-500",children:"auto_awesome"})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-3xl font-bold mb-3 text-white",children:"Workspace Ready"}),g.jsx("p",{className:"text-text-secondary text-lg",children:"Upload a face photo or type a concept to start generating your next viral thumbnail pack."})]}),g.jsxs("div",{className:"flex justify-center gap-3",children:[g.jsx("button",{onClick:()=>o("Surprised Face"),className:"px-4 py-2 rounded-full bg-surface-light border border-white/5 hover:border-primary/50 hover:text-white text-text-secondary text-xs font-bold transition-all",children:'Try "Surprised Face"'}),g.jsx("button",{onClick:()=>o("Epic Explosion"),className:"px-4 py-2 rounded-full bg-surface-light border border-white/5 hover:border-primary/50 hover:text-white text-text-secondary text-xs font-bold transition-all",children:'Try "Epic Explosion"'})]})]})},"empty")})]})]})]}):null},u5=["All","Gaming","Vlogs","Tutorials","MrBeast Shock","Clean Tech",'"Versus" Battle',"Dark Suspense","Gaming/Neon","Lifestyle","Finance"],c5=({onNavigate:t,user:e,onLogout:n})=>{const[s,o]=B.useState("All"),[l,u]=B.useState(""),d=B.useMemo(()=>nM.filter(f=>{const p=s==="All"||f.category===s,y=f.title.toLowerCase().includes(l.toLowerCase())||f.category.toLowerCase().includes(l.toLowerCase());return p&&y}),[s,l]);return g.jsxs("div",{className:"flex flex-col min-h-screen bg-background",children:[g.jsx(ks,{onNavigate:t,variant:"app",user:e,onLogout:n,activePage:"templates"}),g.jsxs("main",{className:"flex-1 max-w-7xl mx-auto w-full px-6 py-12",children:[g.jsxs("header",{className:"mb-12",children:[g.jsxs("h1",{className:"text-4xl md:text-5xl font-black mb-4",children:["Thumbnail ",g.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary to-indigo-400",children:"Template Library"})]}),g.jsx("p",{className:"text-lg text-text-secondary max-w-2xl",children:"Browse high-CTR designs curated by our AI engine. Filter by niche to find the perfect starting point for your next viral hit."})]}),g.jsxs("div",{className:"flex flex-col gap-8 mb-12",children:[g.jsxs("div",{className:"relative w-full max-w-2xl",children:[g.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 material-symbols-outlined text-text-secondary",children:"search"}),g.jsx("input",{type:"text",value:l,onChange:f=>u(f.target.value),placeholder:"Search templates (e.g. 'Shock', 'Gaming')...",className:"w-full h-14 pl-12 pr-4 bg-surface border border-white/5 rounded-2xl focus:outline-none focus:ring-2 focus:ring-primary transition-all text-white placeholder:text-text-secondary/50"})]}),g.jsx("div",{className:"flex items-center gap-3 overflow-x-auto pb-4 custom-scrollbar scroll-smooth",children:u5.map(f=>g.jsx("button",{onClick:()=>o(f),className:`shrink-0 px-6 py-2.5 rounded-full text-xs font-black uppercase tracking-widest border transition-all duration-300 ${f===s?"bg-primary border-primary text-white shadow-neon":"bg-surface border-white/10 text-text-secondary hover:border-primary/50 hover:bg-white/5"}`,children:f},f))})]}),d.length>0?g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 mb-20 animate-fade-in",children:d.map(f=>g.jsxs("div",{className:"group flex flex-col rounded-3xl bg-surface border border-white/5 overflow-hidden transition-all duration-300 hover:border-primary hover:shadow-neon-strong hover:-translate-y-2",children:[g.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[g.jsx("img",{src:f.imageUrl,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",alt:f.title}),g.jsxs("div",{className:"absolute inset-0 bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center backdrop-blur-[2px] p-4 text-center",children:[g.jsx("button",{onClick:()=>t("generator"),className:"px-6 py-3 bg-white text-black font-black text-xs uppercase tracking-widest rounded-xl shadow-lg hover:bg-primary hover:text-white transition-colors mb-2",children:"Use Design"}),g.jsx("p",{className:"text-[10px] text-white/60 font-medium",children:"Click to open in Studio"})]}),f.isPremium&&g.jsxs("div",{className:"absolute top-4 right-4 h-8 px-3 rounded-full glass border border-yellow-500/30 flex items-center justify-center text-yellow-500 gap-1.5 shadow-lg",children:[g.jsx("span",{className:"material-symbols-outlined text-[14px] fill-1",children:"lock"}),g.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Premium"})]})]}),g.jsxs("div",{className:"p-6 flex flex-col gap-4",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("span",{className:"text-[9px] font-black uppercase text-primary tracking-widest",children:f.category}),f.badge&&g.jsx("span",{className:"px-2 py-0.5 rounded bg-primary/10 border border-primary/20 text-primary text-[8px] font-black uppercase tracking-wider",children:f.badge})]}),g.jsx("h3",{className:"font-bold text-sm leading-snug line-clamp-2 text-white group-hover:text-primary transition-colors",children:f.title})]}),g.jsx("div",{className:"flex items-center justify-between pt-2 border-t border-white/5",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"material-symbols-outlined text-green-400 text-sm",children:"trending_up"}),g.jsxs("span",{className:"text-[10px] font-bold text-text-secondary",children:["Predicted CTR: ",g.jsx("span",{className:"text-white",children:"High"})]})]})})]})]},f.id))}):g.jsxs("div",{className:"flex flex-col items-center justify-center py-32 text-center opacity-40",children:[g.jsx("span",{className:"material-symbols-outlined text-6xl mb-4",children:"search_off"}),g.jsx("h3",{className:"text-xl font-bold",children:"No templates found"}),g.jsx("p",{className:"text-sm",children:"Try adjusting your filters or search terms."})]}),d.length>=8&&g.jsx("div",{className:"flex justify-center mb-20",children:g.jsxs("button",{className:"flex items-center gap-2 px-10 py-4 rounded-2xl glass border border-white/10 hover:border-primary transition-all font-black text-xs uppercase tracking-[0.2em] group",children:[g.jsx("span",{children:"View More Designs"}),g.jsx("span",{className:"material-symbols-outlined group-hover:translate-y-1 transition-transform",children:"expand_more"})]})})]}),g.jsx(Ma,{})]})},d5=({onNavigate:t,user:e,onLogout:n})=>g.jsxs("div",{className:"flex flex-col min-h-screen",children:[g.jsx(ks,{onNavigate:t,user:e,onLogout:n,variant:e?"app":"landing"}),g.jsxs("main",{className:"flex-1 flex flex-col items-center py-20 px-6",children:[g.jsxs("header",{className:"text-center max-w-2xl mx-auto mb-16",children:[g.jsxs("h1",{className:"text-5xl md:text-6xl font-black mb-6",children:["Simple Pricing for ",g.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-400 text-glow",children:"Viral Success"})]}),g.jsx("p",{className:"text-lg text-text-secondary",children:"Choose the plan that fits your channel growth. Upgrade, downgrade, or cancel anytime."})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-7xl w-full items-start",children:[g.jsx(Hf,{name:"Free",price:"0",desc:"Perfect for trying out the generator.",features:["5 Generations per day","Basic Templates","Watermarked Images","Standard Speed"],onAction:()=>t("login"),btnText:"Start for Free"}),g.jsx(Hf,{name:"Creator",price:"1499",desc:"For consistent content creators.",features:["Unlimited Generations","No Watermark","Premium Templates","Fast Generation Speed","Commercial License"],popular:!0,onAction:()=>t("checkout"),btnText:"Get Creator"}),g.jsx(Hf,{name:"Pro",price:"3999",desc:"Power users and agencies.",features:["Everything in Creator","Bulk Generation (10x)","Brand Presets & Fonts","Priority Rendering (Instant)","API Access"],onAction:()=>t("checkout"),btnText:"Go Pro"})]}),g.jsxs("div",{className:"mt-20 flex flex-wrap justify-center gap-12 opacity-50",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"material-symbols-outlined",children:"lock"})," Secure Payment"]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"material-symbols-outlined",children:"currency_rupee"})," Indian Payments"]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"material-symbols-outlined",children:"support"})," 24/7 Support"]})]})]}),g.jsx(Ma,{})]}),Hf=({name:t,price:e,desc:n,features:s,onAction:o,btnText:l,popular:u=!1})=>g.jsxs("div",{className:`p-10 rounded-3xl flex flex-col h-full transition-all duration-300 ${u?"bg-surface-light border-2 border-primary shadow-neon -translate-y-4 scale-105":"bg-surface border border-white/5"}`,children:[u&&g.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-primary text-white text-[10px] font-black px-4 py-1.5 rounded-full uppercase tracking-widest",children:"Most Popular"}),g.jsx("h3",{className:"text-2xl font-bold mb-2",children:t}),g.jsx("p",{className:"text-sm text-text-secondary mb-8",children:n}),g.jsxs("div",{className:"mb-8 flex items-baseline gap-1",children:[g.jsx("span",{className:"text-5xl font-black",children:e}),g.jsx("span",{className:"text-text-secondary",children:"/month"})]}),g.jsx("ul",{className:"space-y-4 mb-10 flex-1",children:s.map((d,f)=>g.jsxs("li",{className:"flex items-center gap-3 text-sm",children:[g.jsx("span",{className:"material-symbols-outlined text-green-400 text-[18px]",children:"check_circle"}),d]},f))}),g.jsx("button",{onClick:o,className:`w-full py-4 rounded-xl font-bold text-lg transition-all ${u?"bg-primary text-white shadow-neon":"border border-white/10 hover:bg-white/5"}`,children:l})]}),f5=({onNavigate:t})=>{const[e,n]=B.useState("rohit.design@upi");return g.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 relative",children:[g.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[400px] bg-primary/5 blur-[120px] rounded-full -z-10"}),g.jsxs("div",{className:"w-full max-w-5xl bg-surface rounded-3xl shadow-2xl border border-white/5 overflow-hidden flex flex-col md:flex-row",children:[g.jsxs("div",{className:"w-full md:w-2/5 bg-surface-light p-10 border-r border-white/5",children:[g.jsxs("h3",{className:"text-xl font-bold mb-8 flex items-center gap-3",children:[g.jsx("span",{className:"material-symbols-outlined text-text-secondary",children:"shopping_cart"}),"Order Summary"]}),g.jsxs("div",{className:"p-4 rounded-2xl bg-surface border border-white/5 mb-8 flex gap-4",children:[g.jsx("div",{className:"w-20 h-20 rounded-xl bg-primary/20 flex items-center justify-center text-primary shadow-inner",children:g.jsx("span",{className:"material-symbols-outlined text-[32px]",children:"auto_awesome"})}),g.jsxs("div",{className:"flex flex-col justify-center",children:[g.jsx("p",{className:"font-bold",children:"Creator Pro Plan"}),g.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"AI Thumbnail Studio"}),g.jsx("span",{className:"mt-2 inline-block px-2 py-0.5 rounded bg-primary/20 text-primary text-[10px] font-black uppercase tracking-widest",children:"Monthly"})]})]}),g.jsxs("div",{className:"space-y-4 mb-8",children:[g.jsxs("div",{className:"flex justify-between text-sm",children:[g.jsx("span",{className:"text-text-secondary",children:"Subtotal"}),g.jsx("span",{className:"font-bold",children:"422.88"})]}),g.jsxs("div",{className:"flex justify-between text-sm",children:[g.jsx("span",{className:"text-text-secondary",children:"GST (18%)"}),g.jsx("span",{className:"font-bold",children:"76.12"})]}),g.jsx("div",{className:"h-px bg-white/5 my-4"}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"font-bold",children:"Total Due"}),g.jsx("span",{className:"text-3xl font-black text-primary",children:"499.00"})]})]}),g.jsxs("div",{className:"pt-6 border-t border-white/5 flex gap-4 text-text-secondary text-[10px] font-bold uppercase tracking-widest",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"lock"})," Secure"]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"verified_user"})," Guarantee"]})]})]}),g.jsxs("div",{className:"flex-1 p-10",children:[g.jsxs("div",{className:"flex justify-between items-center mb-8",children:[g.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Payment Details"}),g.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-text-secondary",children:[g.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"Secure SSL"]})]}),g.jsxs("div",{className:"flex gap-8 border-b border-white/5 mb-10 overflow-x-auto",children:[g.jsxs("button",{className:"pb-3 px-1 border-b-2 border-primary text-white font-bold text-sm flex items-center gap-2",children:[g.jsx("span",{className:"material-symbols-outlined text-primary",children:"qr_code_scanner"})," UPI / QR"]}),g.jsxs("button",{className:"pb-3 px-1 border-b-2 border-transparent text-text-secondary hover:text-white font-bold text-sm flex items-center gap-2",children:[g.jsx("span",{className:"material-symbols-outlined",children:"credit_card"})," Card"]}),g.jsxs("button",{className:"pb-3 px-1 border-b-2 border-transparent text-text-secondary hover:text-white font-bold text-sm flex items-center gap-2",children:[g.jsx("span",{className:"material-symbols-outlined",children:"account_balance"})," Netbanking"]})]}),g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-[10px] font-black text-text-secondary uppercase tracking-widest mb-4",children:"Pay via preferred app"}),g.jsx("div",{className:"grid grid-cols-4 gap-4",children:["GPay","PhonePe","Paytm","BHIM"].map(s=>g.jsxs("button",{className:"p-4 rounded-xl border border-white/5 bg-surface-light hover:border-primary/50 flex flex-col items-center gap-2 transition-all",children:[g.jsx("div",{className:"w-8 h-8 rounded-full bg-white flex items-center justify-center text-[10px] font-black text-black",children:s[0]}),g.jsx("span",{className:"text-[10px] font-bold",children:s})]},s))})]}),g.jsxs("div",{className:"relative flex items-center",children:[g.jsx("div",{className:"flex-1 h-px bg-white/5"}),g.jsx("span",{className:"mx-4 text-[10px] font-black text-text-secondary uppercase",children:"OR ENTER UPI ID"}),g.jsx("div",{className:"flex-1 h-px bg-white/5"})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("label",{className:"block text-sm font-bold",children:"UPI ID / VPA"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"text",value:e,onChange:s=>n(s.target.value),className:"w-full h-14 pl-5 pr-28 bg-surface-light border border-white/5 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-primary transition-all",placeholder:"username@bank"}),g.jsxs("div",{className:"absolute right-2 top-2 bottom-2 px-3 flex items-center gap-1.5 bg-green-500/10 rounded-lg text-green-500 text-[10px] font-black",children:[g.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"check_circle"})," VERIFIED"]})]})]}),g.jsxs("button",{onClick:()=>t("success"),className:"w-full h-16 bg-primary hover:bg-primary-hover text-white font-black text-xl rounded-2xl shadow-neon transition-all hover:scale-[1.02] flex items-center justify-center gap-2",children:["Pay 499.00",g.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})]})]})]}),g.jsxs("button",{onClick:()=>t("pricing"),className:"mt-8 text-sm font-bold text-text-secondary hover:text-white flex items-center gap-2 transition-colors",children:[g.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back"}),"Cancel and return to merchant"]})]})},h5=({onNavigate:t})=>g.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center px-6 text-center relative",children:[g.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-primary/10 blur-[120px] rounded-full -z-10"}),g.jsxs("div",{className:"w-full max-w-lg p-12 rounded-3xl glass border border-white/5 shadow-neon",children:[g.jsx("div",{className:"w-24 h-24 rounded-full bg-primary/10 flex items-center justify-center text-primary ring-2 ring-primary/20 mx-auto mb-10 animate-bounce",children:g.jsx("span",{className:"material-symbols-outlined text-[56px] font-black",children:"check_circle"})}),g.jsx("h1",{className:"text-4xl font-black mb-4",children:"Payment Successful!"}),g.jsxs("p",{className:"text-text-secondary text-lg mb-10 leading-relaxed",children:["You are now subscribed to the ",g.jsx("span",{className:"text-white font-bold",children:"Creator Pro Plan"}),". Your AI engine is fueled up and ready to generate viral thumbnails."]}),g.jsxs("div",{className:"bg-background/50 rounded-2xl p-6 border border-white/5 mb-10 text-left space-y-4",children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-xs font-bold text-text-secondary uppercase",children:"Amount Paid"}),g.jsx("span",{className:"text-sm font-bold text-white",children:"499.00"})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-xs font-bold text-text-secondary uppercase",children:"Transaction ID"}),g.jsx("span",{className:"text-sm font-bold text-white font-mono",children:"#VT-AI-99283-X"})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-xs font-bold text-text-secondary uppercase",children:"Date"}),g.jsx("span",{className:"text-sm font-bold text-white",children:"October 24, 2024"})]})]}),g.jsxs("div",{className:"flex flex-col gap-4",children:[g.jsxs("button",{onClick:()=>t("generator"),className:"w-full h-14 bg-primary hover:bg-primary-hover text-white font-black rounded-2xl shadow-neon transition-all flex items-center justify-center gap-2",children:["Start Creating Thumbnails",g.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]}),g.jsxs("div",{className:"flex items-center justify-center gap-6 pt-4",children:[g.jsxs("button",{className:"text-xs font-bold text-text-secondary hover:text-white flex items-center gap-1.5 transition-colors",children:[g.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"download"})," Download Invoice"]}),g.jsx("div",{className:"w-px h-3 bg-white/10"}),g.jsx("button",{onClick:()=>t("dashboard"),className:"text-xs font-bold text-text-secondary hover:text-white transition-colors",children:"Go to Dashboard"})]})]})]}),g.jsxs("p",{className:"mt-8 text-xs text-text-secondary flex items-center gap-2",children:[g.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"lock"}),"Secure 256-bit SSL Encrypted Payment"]})]}),p5=({onNavigate:t})=>{const[e,n]=B.useState("All"),s=[{id:1,user:{name:"John Smith",email:"john@example.com",avatar:"https://i.pravatar.cc/150?u=john"},type:"Thumbnail Gen",icon:"auto_awesome",details:'"Minecraft survival ep 1 with fire..."',context:"Template: Gaming Vivid V2",plan:"Pro",status:"Completed",time:"2 mins ago"},{id:2,user:{name:"Ada Lovelace",email:"ada@tech.io",avatar:"https://i.pravatar.cc/150?u=ada"},type:"Subscription",icon:"payments",details:"Upgraded to Enterprise",context:"Inv #49201",plan:"Enterprise",status:"Paid",time:"15 mins ago"},{id:3,user:{name:"Sarah Connor",email:"sarah@future.net",avatar:"https://i.pravatar.cc/150?u=sarah"},type:"Template Used",icon:"style",details:"Crypto Bull Run 2024",context:"Category: Finance",plan:"Free",status:"Saved",time:"42 mins ago"},{id:4,user:{name:"Mike Ross",email:"mike@legal.com",avatar:"https://i.pravatar.cc/150?u=mike"},type:"Payment Failed",icon:"error",details:"Card declined",context:"Retry count: 2",plan:"Pro",status:"Failed",time:"1 hour ago"},{id:5,user:{name:"David Miller",email:"david@vlog.com",avatar:"https://i.pravatar.cc/150?u=david"},type:"User Login",icon:"login",details:"New device detected",context:"IP: 192.168.1.1",plan:"Free",status:"Verified",time:"2 hours ago"}];return g.jsxs("div",{className:"flex h-screen bg-background text-white overflow-hidden font-sans",children:[g.jsxs("aside",{className:"w-72 flex-shrink-0 border-r border-white/5 bg-[#0a0a0c] flex flex-col",children:[g.jsxs("div",{className:"p-8 flex items-center gap-3 cursor-pointer",onClick:()=>t("landing"),children:[g.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary flex items-center justify-center shadow-neon",children:g.jsx("span",{className:"material-symbols-outlined text-white",children:"auto_awesome"})}),g.jsxs("div",{children:[g.jsx("h1",{className:"text-lg font-black tracking-tight leading-none",children:"ThumbnailAI"}),g.jsx("span",{className:"text-[10px] uppercase font-black text-primary tracking-widest opacity-80",children:"Admin Console"})]})]}),g.jsxs("nav",{className:"flex-1 px-4 space-y-8 overflow-y-auto custom-scrollbar",children:[g.jsxs("div",{children:[g.jsx("p",{className:"px-4 text-[10px] font-black uppercase text-text-secondary tracking-[0.2em] mb-4",children:"Overview"}),g.jsx(bs,{icon:"dashboard",label:"Activity Dashboard",active:!0})]}),g.jsxs("div",{children:[g.jsx("p",{className:"px-4 text-[10px] font-black uppercase text-text-secondary tracking-[0.2em] mb-4",children:"Users & Content"}),g.jsx(bs,{icon:"group",label:"User Management"}),g.jsx(bs,{icon:"grid_view",label:"Templates"})]}),g.jsxs("div",{children:[g.jsx("p",{className:"px-4 text-[10px] font-black uppercase text-text-secondary tracking-[0.2em] mb-4",children:"Financials"}),g.jsx(bs,{icon:"receipt_long",label:"Transactions"}),g.jsx(bs,{icon:"loyalty",label:"Subscriptions"})]}),g.jsxs("div",{children:[g.jsx("p",{className:"px-4 text-[10px] font-black uppercase text-text-secondary tracking-[0.2em] mb-4",children:"System"}),g.jsx(bs,{icon:"settings",label:"Settings"}),g.jsx(bs,{icon:"terminal",label:"Server Logs"})]})]}),g.jsx("div",{className:"p-6 border-t border-white/5 bg-surface/30",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("img",{src:"https://i.pravatar.cc/150?u=admin",className:"w-10 h-10 rounded-xl border border-white/10",alt:"Admin"}),g.jsxs("div",{className:"flex-1 overflow-hidden",children:[g.jsx("p",{className:"text-xs font-black truncate",children:"Admin User"}),g.jsx("p",{className:"text-[10px] text-text-secondary truncate",children:"superadmin@thumbnail.ai"})]}),g.jsx("button",{className:"text-text-secondary hover:text-white transition-colors",children:g.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"logout"})})]})})]}),g.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[g.jsxs("header",{className:"h-24 px-10 flex items-center justify-between border-b border-white/5 bg-background/50 backdrop-blur-md sticky top-0 z-10",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-black",children:"Activity Overview"}),g.jsx("p",{className:"text-xs text-text-secondary",children:"Real-time monitoring of user actions and system events."})]}),g.jsxs("div",{className:"flex items-center gap-6",children:[g.jsxs("div",{className:"relative w-80",children:[g.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 material-symbols-outlined text-text-secondary text-[20px]",children:"search"}),g.jsx("input",{type:"text",placeholder:"Search logs, users, or IDs...",className:"w-full h-12 pl-12 pr-4 bg-surface border border-white/5 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all placeholder:text-text-secondary/50"})]}),g.jsxs("button",{className:"relative w-12 h-12 flex items-center justify-center rounded-xl bg-surface border border-white/5 hover:bg-white/5 transition-colors group",children:[g.jsx("span",{className:"material-symbols-outlined text-text-secondary group-hover:text-white transition-colors",children:"notifications"}),g.jsx("span",{className:"absolute top-3 right-3 w-2 h-2 bg-pink-500 rounded-full border-2 border-background"})]}),g.jsxs("button",{className:"h-12 px-6 bg-gradient-to-r from-primary to-indigo-600 hover:scale-105 active:scale-95 transition-all rounded-xl font-black text-xs uppercase tracking-widest flex items-center gap-2 shadow-neon",children:[g.jsx("span",{className:"material-symbols-outlined text-sm",children:"download"}),"Export Report"]})]})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-10 custom-scrollbar space-y-10",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[g.jsx(uu,{label:"Total Generations",value:"24,592",trend:"+12%",trendUp:!0,subtext:"Past 30 days",icon:"bolt",color:"primary"}),g.jsx(uu,{label:"Active Users",value:"1,840",trend:"+5.4%",trendUp:!0,subtext:"Currently online: 142",icon:"person_add",color:"cyan"}),g.jsx(uu,{label:"Monthly Revenue",value:"$42,300",trend:"-1.2%",trendUp:!1,subtext:"vs last month",icon:"account_balance_wallet",color:"pink"}),g.jsx(uu,{label:"Avg. Gen Time",value:"4.2s",status:"Fast",subtext:"GPU Load: 65%",icon:"timer",color:"orange"})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("div",{className:"flex bg-surface border border-white/5 rounded-xl p-1.5 gap-1",children:["All","Generations","Payments","Templates"].map(o=>g.jsx("button",{onClick:()=>n(o),className:`h-10 px-6 rounded-lg text-xs font-black uppercase tracking-widest transition-all ${e===o?"bg-primary text-white shadow-lg":"text-text-secondary hover:text-white hover:bg-white/5"}`,children:o},o))}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("div",{className:"h-12 px-5 bg-surface border border-white/5 rounded-xl flex items-center gap-3 cursor-pointer hover:bg-white/5 transition-colors",children:[g.jsx("span",{className:"material-symbols-outlined text-text-secondary text-[20px]",children:"calendar_today"}),g.jsx("span",{className:"text-xs font-bold",children:"Last 24 Hours"}),g.jsx("span",{className:"material-symbols-outlined text-text-secondary text-[16px]",children:"expand_more"})]}),g.jsx("button",{className:"h-12 w-12 flex items-center justify-center bg-surface border border-white/5 rounded-xl hover:bg-white/5 transition-colors",children:g.jsx("span",{className:"material-symbols-outlined text-text-secondary",children:"filter_list"})})]})]}),g.jsxs("div",{className:"bg-surface border border-white/5 rounded-2xl overflow-hidden shadow-2xl",children:[g.jsxs("table",{className:"w-full text-left border-collapse",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-white/5 border-b border-white/5",children:[g.jsx("th",{className:"px-8 py-5 text-[10px] font-black uppercase tracking-widest text-text-secondary",children:"User"}),g.jsx("th",{className:"px-8 py-5 text-[10px] font-black uppercase tracking-widest text-text-secondary",children:"Activity Type"}),g.jsx("th",{className:"px-8 py-5 text-[10px] font-black uppercase tracking-widest text-text-secondary",children:"Details / Context"}),g.jsx("th",{className:"px-8 py-5 text-[10px] font-black uppercase tracking-widest text-text-secondary",children:"Plan"}),g.jsx("th",{className:"px-8 py-5 text-[10px] font-black uppercase tracking-widest text-text-secondary",children:"Status"}),g.jsx("th",{className:"px-8 py-5 text-[10px] font-black uppercase tracking-widest text-text-secondary",children:"Time"})]})}),g.jsx("tbody",{className:"divide-y divide-white/5",children:s.map(o=>g.jsxs("tr",{className:"hover:bg-white/[0.02] transition-colors group cursor-pointer",children:[g.jsx("td",{className:"px-8 py-5",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("img",{src:o.user.avatar,className:"w-9 h-9 rounded-xl border border-white/10 group-hover:scale-110 transition-transform",alt:o.user.name}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-bold",children:o.user.name}),g.jsx("p",{className:"text-[10px] text-text-secondary",children:o.user.email})]})]})}),g.jsx("td",{className:"px-8 py-5",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"material-symbols-outlined text-primary text-[18px]",children:o.icon}),g.jsx("span",{className:"text-xs font-bold",children:o.type})]})}),g.jsx("td",{className:"px-8 py-5",children:g.jsxs("div",{children:[g.jsx("p",{className:"text-xs font-medium text-white/90 truncate max-w-[200px]",children:o.details}),g.jsx("p",{className:"text-[10px] text-text-secondary",children:o.context})]})}),g.jsx("td",{className:"px-8 py-5",children:g.jsx("span",{className:`px-2.5 py-1 rounded-md text-[9px] font-black uppercase tracking-widest border ${o.plan==="Pro"?"bg-indigo-500/10 border-indigo-500/30 text-indigo-400":o.plan==="Enterprise"?"bg-cyan-500/10 border-cyan-500/30 text-cyan-400":"bg-white/5 border-white/10 text-text-secondary"}`,children:o.plan})}),g.jsx("td",{className:"px-8 py-5",children:g.jsx(m5,{status:o.status})}),g.jsx("td",{className:"px-8 py-5 text-xs text-text-secondary font-medium",children:o.time})]},o.id))})]}),g.jsxs("div",{className:"px-8 py-5 border-t border-white/5 flex items-center justify-between bg-black/10",children:[g.jsxs("p",{className:"text-xs text-text-secondary",children:["Showing ",g.jsx("span",{className:"text-white font-bold",children:"1 to 5"})," of ",g.jsx("span",{className:"text-white font-bold",children:"1,248"})," results"]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{className:"h-9 px-4 rounded-lg bg-surface border border-white/5 text-xs font-bold hover:bg-white/5 transition-all opacity-50 cursor-not-allowed",children:"Previous"}),g.jsx("button",{className:"h-9 px-4 rounded-lg bg-surface border border-white/5 text-xs font-bold hover:bg-white/5 transition-all",children:"Next"})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[g.jsxs("div",{className:"bg-surface border border-white/5 rounded-2xl p-8 shadow-xl",children:[g.jsxs("div",{className:"flex items-center justify-between mb-8",children:[g.jsxs("h3",{className:"text-lg font-black flex items-center gap-2",children:[g.jsx("span",{className:"material-symbols-outlined text-primary",children:"trending_up"}),"Top Performing Templates"]}),g.jsx("button",{className:"text-xs font-black uppercase tracking-widest text-primary hover:underline transition-all",children:"View All"})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsx(qf,{image:"https://picsum.photos/seed/game/800/450",title:"Minecraft Survival Shock",category:"Gaming  1.2k uses",badge:"High CTR",badgeColor:"bg-green-500/10 text-green-400 border-green-500/30",score:92}),g.jsx(qf,{image:"https://picsum.photos/seed/finance/800/450",title:"Finance Chart Green Up",category:"Business  980 uses",badge:"Trending",badgeColor:"bg-primary/10 text-primary border-primary/30",score:85}),g.jsx(qf,{image:"https://picsum.photos/seed/react/800/450",title:"Master React in 10 Mins",category:"Tutorial  840 uses",score:78})]})]}),g.jsxs("div",{className:"bg-surface border border-white/5 rounded-2xl p-8 shadow-xl",children:[g.jsxs("h3",{className:"text-lg font-black mb-8 flex items-center gap-2",children:[g.jsx("span",{className:"material-symbols-outlined text-primary",children:"analytics"}),"System Status"]}),g.jsxs("div",{className:"space-y-6",children:[g.jsx(ia,{label:"API Uptime",value:"99.98%",status:"Success"}),g.jsx(ia,{label:"GPU Queue",value:"Moderate",status:"Warning"}),g.jsx(ia,{label:"Payment Gateway",value:"Operational",status:"Success"}),g.jsx(ia,{label:"Cloud Storage",value:"Low Latency",status:"Success"}),g.jsx(ia,{label:"CDN Propogation",value:"Healthy",status:"Success"})]}),g.jsx("div",{className:"mt-10 p-5 rounded-2xl bg-primary/10 border border-primary/20",children:g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("span",{className:"material-symbols-outlined text-primary mt-1",children:"info"}),g.jsxs("div",{children:[g.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-primary mb-1",children:"Upcoming Maintenance"}),g.jsx("p",{className:"text-[11px] text-text-secondary leading-relaxed",children:"System upgrade scheduled for Sunday, Oct 27 at 03:00 AM IST. Expect ~5 mins downtime."})]})]})})]})]})]})]})]})},bs=({icon:t,label:e,active:n=!1})=>g.jsxs("div",{className:`h-12 px-4 flex items-center gap-4 cursor-pointer transition-all duration-300 rounded-xl mx-2 group ${n?"bg-primary/10 border border-primary/20 text-primary shadow-sm":"text-text-secondary hover:text-white hover:bg-white/5"}`,children:[g.jsx("span",{className:`material-symbols-outlined text-[20px] transition-transform ${n?"scale-110":"group-hover:scale-110"}`,children:t}),g.jsx("span",{className:"text-sm font-bold tracking-tight",children:e}),n&&g.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-primary shadow-neon"})]}),uu=({label:t,value:e,trend:n,trendUp:s,subtext:o,status:l,icon:u,color:d})=>{const f={primary:"bg-primary/10 text-primary border-primary/20",cyan:"bg-cyan-500/10 text-cyan-400 border-cyan-500/20",pink:"bg-pink-500/10 text-pink-400 border-pink-500/20",orange:"bg-orange-500/10 text-orange-400 border-orange-500/20"};return g.jsxs("div",{className:"p-7 bg-surface border border-white/5 rounded-2xl shadow-lg relative group hover:-translate-y-1 hover:shadow-neon/20 transition-all duration-300",children:[g.jsx("div",{className:`absolute top-6 right-6 w-12 h-12 rounded-2xl flex items-center justify-center border transition-all duration-300 ${f[d]} group-hover:scale-110`,children:g.jsx("span",{className:"material-symbols-outlined text-[26px]",children:u})}),g.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-text-secondary mb-3",children:t}),g.jsxs("div",{className:"flex items-baseline gap-3 mb-2",children:[g.jsx("h4",{className:"text-3xl font-black",children:e}),n&&g.jsxs("span",{className:`text-xs font-black flex items-center ${s?"text-green-400":"text-pink-400"}`,children:[g.jsx("span",{className:"material-symbols-outlined text-[16px]",children:s?"arrow_drop_up":"arrow_drop_down"}),n]}),l&&g.jsxs("span",{className:"px-2 py-0.5 rounded bg-green-500/10 text-green-400 text-[10px] font-black uppercase tracking-widest border border-green-500/20 flex items-center gap-1",children:[g.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),l]})]}),g.jsx("p",{className:"text-[11px] font-medium text-text-secondary opacity-70",children:o})]})},m5=({status:t})=>{const e={Completed:"bg-green-500/10 text-green-400 border-green-500/30",Paid:"bg-green-500/10 text-green-400 border-green-500/30",Saved:"bg-indigo-500/10 text-indigo-400 border-indigo-500/30",Failed:"bg-pink-500/10 text-pink-400 border-pink-500/30",Verified:"bg-cyan-500/10 text-cyan-400 border-cyan-500/30",Warning:"bg-orange-500/10 text-orange-400 border-orange-500/30"};return g.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${e[t]||e.Warning}`,children:t})},qf=({image:t,title:e,category:n,badge:s,badgeColor:o,score:l})=>g.jsxs("div",{className:"flex items-center gap-5 group cursor-pointer",children:[g.jsx("div",{className:"w-20 aspect-video rounded-xl overflow-hidden border border-white/10 shrink-0 shadow-lg",children:g.jsx("img",{src:t,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",alt:e})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center justify-between mb-1 gap-4",children:[g.jsx("h4",{className:"text-sm font-bold truncate group-hover:text-primary transition-colors",children:e}),s&&g.jsx("span",{className:`shrink-0 px-2 py-0.5 rounded text-[8px] font-black uppercase tracking-widest border ${o}`,children:s})]}),g.jsx("p",{className:"text-[10px] text-text-secondary font-medium",children:n})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-widest mb-1.5",children:"CTR Score"}),g.jsx("div",{className:"w-16 h-1.5 bg-white/5 rounded-full overflow-hidden border border-white/5",children:g.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-indigo-400",style:{width:`${l}%`}})})]})]}),ia=({label:t,value:e,status:n})=>g.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl border border-white/5 bg-white/[0.02] hover:bg-white/[0.04] transition-all",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:`w-2 h-2 rounded-full ${n==="Success"?"bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.5)]":n==="Warning"?"bg-orange-500 shadow-[0_0_10px_rgba(249,115,22,0.5)]":"bg-pink-500 shadow-[0_0_10px_rgba(236,72,153,0.5)]"}`}),g.jsx("span",{className:"text-xs font-bold text-text-secondary",children:t})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-xs font-black uppercase tracking-wider",children:e}),n==="Success"&&g.jsx("span",{className:"material-symbols-outlined text-green-500 text-[18px]",children:"check_circle"}),n==="Warning"&&g.jsx("span",{className:"material-symbols-outlined text-orange-500 text-[18px]",children:"warning"})]})]}),g5=()=>{const[t,e]=B.useState([]),[n,s]=B.useState(!0);return B.useEffect(()=>{(async()=>{try{const{data:l,error:u}=await $e.from("profiles").select("id, username, email, created_at").order("created_at",{ascending:!1});if(u)throw u;e(l||[])}catch(l){console.error("Diagnostic fetch failed:",l)}finally{s(!1)}})()},[]),g.jsxs("div",{className:"p-10 bg-background min-h-screen text-white",children:[g.jsx("h1",{className:"text-3xl font-black mb-8",children:"Database Diagnostic"}),n?g.jsx("p",{children:"Loading profiles..."}):g.jsxs("div",{className:"overflow-x-auto",children:[g.jsxs("table",{className:"w-full border-collapse border border-white/10",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-white/5",children:[g.jsx("th",{className:"p-4 border border-white/10 text-left",children:"Username"}),g.jsx("th",{className:"p-4 border border-white/10 text-left",children:"Email"}),g.jsx("th",{className:"p-4 border border-white/10 text-left",children:"Joined"})]})}),g.jsx("tbody",{children:t.map(o=>g.jsxs("tr",{className:"hover:bg-white/5",children:[g.jsx("td",{className:"p-4 border border-white/10",children:o.username}),g.jsx("td",{className:"p-4 border border-white/10",children:o.email}),g.jsx("td",{className:"p-4 border border-white/10",children:new Date(o.created_at).toLocaleString()})]},o.id))})]}),t.length===0&&g.jsx("p",{className:"mt-4 text-text-secondary",children:"No profiles found."})]})]})},y5=({user:t,onNavigate:e,onLogout:n})=>{const[s,o]=B.useState([]),[l,u]=B.useState(!0),[d,f]=B.useState(!1),[p,y]=B.useState(""),[b,w]=B.useState("grid"),[T,E]=B.useState(0),[A,C]=B.useState(!0),R=12,k=145,N=async(O=!1)=>{if(!t)return;const W=O?0:T;O||f(!0);try{const J=await Cp(t.id,R,W);O?(o(J||[]),E(R)):(o(ie=>[...ie,...J||[]]),E(ie=>ie+R)),!J||J.length<R?C(!1):C(!0)}catch(J){console.error("Failed to load history:",J)}finally{u(!1),f(!1)}};B.useEffect(()=>{N(!0)},[t]);const I=s.filter(O=>(O.prompt||"").toLowerCase().includes(p.toLowerCase())||(O.title||"").toLowerCase().includes(p.toLowerCase())),L={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},H={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return g.jsxs("div",{className:"flex flex-col min-h-screen bg-background text-white font-sans selection:bg-primary/30",children:[g.jsx(ks,{onNavigate:e,variant:"app",user:t,onLogout:n,activePage:"history"}),g.jsxs("main",{className:"flex-1 max-w-[1400px] mx-auto w-full px-6 py-12",children:[g.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"flex flex-col md:flex-row md:items-end justify-between gap-8 mb-12",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-4xl md:text-5xl font-black mb-3 tracking-tight",children:"Generation History"}),g.jsxs("p",{className:"text-lg text-text-secondary max-w-2xl font-medium",children:["Manage, download, or regenerate your AI-created thumbnails. ",g.jsxs("span",{className:"text-white",children:[k," saved generations."]})]})]}),g.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[g.jsxs("div",{className:"relative flex-1 md:w-80 group",children:[g.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 material-symbols-outlined text-text-secondary group-focus-within:text-primary transition-colors",children:"search"}),g.jsx("input",{type:"text",placeholder:"Search by prompt...",value:p,onChange:O=>y(O.target.value),className:"w-full h-12 pl-12 pr-4 bg-white/5 border border-white/10 rounded-2xl text-sm font-medium focus:outline-none focus:border-primary/50 focus:bg-white/10 transition-all placeholder:text-text-secondary/50"})]}),g.jsx("div",{className:"hidden sm:flex items-center gap-2 p-1 bg-white/5 border border-white/10 rounded-xl",children:g.jsxs("div",{className:"relative",children:[g.jsxs("select",{className:"h-10 pl-4 pr-10 bg-transparent text-sm font-bold outline-none appearance-none cursor-pointer text-white",children:[g.jsx("option",{className:"bg-background",children:"Newest First"}),g.jsx("option",{className:"bg-background",children:"Oldest First"})]}),g.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 material-symbols-outlined text-sm pointer-events-none text-text-secondary",children:"expand_more"})]})}),g.jsxs("div",{className:"flex items-center gap-1 p-1 bg-white/5 border border-white/10 rounded-xl",children:[g.jsx("button",{onClick:()=>w("grid"),className:`w-10 h-10 rounded-lg flex items-center justify-center transition-all ${b==="grid"?"bg-primary/20 text-primary shadow-[0_0_15px_rgba(139,92,246,0.3)]":"text-text-secondary hover:text-white"}`,children:g.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"grid_view"})}),g.jsx("button",{onClick:()=>w("list"),className:`w-10 h-10 rounded-lg flex items-center justify-center transition-all ${b==="list"?"bg-primary/20 text-primary shadow-[0_0_15px_rgba(139,92,246,0.3)]":"text-text-secondary hover:text-white"}`,children:g.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"view_list"})})]})]})]}),l?g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:8}).map((O,W)=>g.jsx("div",{className:"aspect-video rounded-3xl bg-white/5 animate-pulse border border-white/5"},W))}):I.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center py-32 text-center",children:[g.jsx("div",{className:"w-24 h-24 rounded-full bg-white/5 flex items-center justify-center mb-6",children:g.jsx("span",{className:"material-symbols-outlined text-4xl text-white/20",children:"image_search"})}),g.jsx("h3",{className:"text-xl font-bold mb-2",children:"No generations found"}),g.jsx("p",{className:"text-text-secondary mb-8",children:"Try adjusting your search or generate a new thumbnail."}),g.jsx("button",{onClick:()=>e("generator"),className:"px-8 py-3 bg-primary text-white font-bold rounded-xl hover:bg-primary-hover transition-colors shadow-neon",children:"Create New"})]}):g.jsx(ee.div,{variants:L,initial:"hidden",animate:"visible",className:`grid gap-6 ${b==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-4":"grid-cols-1"}`,children:g.jsx(Ji,{mode:"popLayout",children:I.map((O,W)=>g.jsxs(ee.div,{variants:H,layout:!0,className:`group relative bg-surface border border-white/5 rounded-3xl overflow-hidden hover:border-primary/50 hover:shadow-[0_10px_40px_-10px_rgba(139,92,246,0.3)] transition-all duration-300 ${b==="list"?"flex h-32":"aspect-[16/10]"}`,whileHover:{y:-6},children:[g.jsxs("div",{className:`relative overflow-hidden bg-black ${b==="list"?"w-48 h-full":"w-full h-full"}`,children:[g.jsx("img",{src:O.output_url,alt:O.prompt,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",loading:"lazy"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-60 group-hover:opacity-80 transition-opacity"}),g.jsxs("div",{className:"absolute top-3 left-3 px-3 py-1 bg-black/60 backdrop-blur-md border border-white/10 rounded-full flex items-center gap-1.5 z-10",children:[g.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary animate-pulse"}),g.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider text-white",children:"AI Generated"})]}),g.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 backdrop-blur-[2px] transition-all duration-300 flex items-center justify-center gap-3 z-20",children:[g.jsx(zf,{icon:"download",label:"Download",onClick:()=>{const J=document.createElement("a");J.href=O.output_url,J.download=`ViralThumb_${O.id}.png`,J.click()},delay:0}),g.jsx(zf,{icon:"refresh",label:"Regenerate",onClick:()=>e("generator"),delay:.1}),g.jsx(zf,{icon:"visibility",label:"View",onClick:()=>window.open(O.output_url,"_blank"),delay:.2})]})]}),g.jsxs("div",{className:`absolute bottom-0 left-0 right-0 p-5 ${b==="list"?"static flex-1 flex flex-col justify-center bg-surface":"z-10"}`,children:[g.jsx("h3",{className:"font-bold text-white text-sm mb-1 truncate pr-12 leading-tight",children:O.title||O.prompt||"Untitled Generation"}),g.jsxs("div",{className:"flex items-center justify-between text-[11px] font-medium text-text-secondary/80",children:[g.jsx("span",{children:new Date(O.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),g.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 rounded-md bg-white/5 border border-white/5",children:[g.jsx("span",{className:"material-symbols-outlined text-[12px] text-yellow-400",children:"bolt"}),g.jsx("span",{children:O.credits_used||1})]})]})]})]},O.id||W))})}),A&&!l&&g.jsx("div",{className:"mt-16 flex justify-center",children:g.jsxs("button",{onClick:()=>N(!1),disabled:d,className:"group relative px-8 py-3 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-sm font-bold tracking-wide transition-all overflow-hidden",children:[g.jsx("div",{className:"absolute inset-0 w-full h-full bg-primary/20 scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-500"}),g.jsxs("div",{className:"relative flex items-center gap-2",children:[d?g.jsx("span",{className:"material-symbols-outlined animate-spin text-sm",children:"progress_activity"}):g.jsx("span",{className:"material-symbols-outlined text-sm group-hover:rotate-180 transition-transform duration-500",children:"refresh"}),d?"Loading History...":"Load More History"]})]})})]}),g.jsx(Ma,{})]})},zf=({icon:t,label:e,onClick:n,delay:s})=>g.jsxs(ee.button,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},transition:{delay:s,duration:.2},onClick:o=>{o.stopPropagation(),n()},className:"w-10 h-10 rounded-full bg-white text-black flex items-center justify-center hover:scale-110 transition-transform shadow-lg relative group/btn",title:e,children:[g.jsx("span",{className:"material-symbols-outlined text-[20px]",children:t}),g.jsx("span",{className:"absolute -top-8 left-1/2 -translate-x-1/2 px-2 py-1 bg-black text-white text-[10px] font-bold rounded opacity-0 group-hover/btn:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:e})]}),rw=[{id:"account",label:"Account",icon:"person"},{id:"appearance",label:"Appearance",icon:"palette"},{id:"notifications",label:"Notifications",icon:"notifications"},{id:"security",label:"Security",icon:"shield"},{id:"billing",label:"Billing",icon:"credit_card"},{id:"credits",label:"Credits Usage",icon:"bolt"}],v5=({user:t,onNavigate:e,onLogout:n})=>{const[s,o]=B.useState("account"),[l,u]=B.useState(!0),[d,f]=B.useState(!0),[p,y]=B.useState(!0),[b,w]=B.useState(!0),[T,E]=B.useState(!1),[A,C]=B.useState(!1),[R,k]=B.useState(!1),[N,I]=B.useState(""),[L,H]=B.useState(0),{theme:O,setTheme:W}=q_();B.useEffect(()=>{u(O==="dark")},[]),B.useEffect(()=>{const Z=(()=>{let ye=0;return N.length>=8&&ye++,/[A-Z]/.test(N)&&ye++,/[a-z]/.test(N)&&ye++,/[0-9]/.test(N)&&ye++,/[^A-Za-z0-9]/.test(N)&&ye++,Math.min(4,ye)})();H(Z)},[N]);const J=async()=>{if(t&&window.confirm("Are you sure you want to delete your account? This action cannot be undone immediately, but your data will be preserved for 30 days before permanent deletion.")){k(!0);try{const{error:Z}=await $e.from("profiles").update({is_deleted:!0,deleted_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",t.id);if(Z)throw Z;n?await n():await $e.auth.signOut()}catch(Z){console.error("Error deleting account:",Z),alert("Failed to delete account. Please try again."),k(!1)}}},ie=Z=>{o(Z);const ye=document.getElementById(Z);ye&&ye.scrollIntoView({behavior:"smooth",block:"start"})};return g.jsxs("div",{className:"flex flex-col min-h-screen bg-background text-white font-sans selection:bg-primary/30",children:[g.jsx(ks,{onNavigate:e,variant:"app",user:t,onLogout:n,activePage:"settings"}),g.jsx("main",{className:"flex-1 max-w-[1400px] mx-auto w-full px-6 py-12 pb-28 lg:pb-12 flex flex-col lg:flex-row gap-8 lg:gap-12 relative",children:g.jsxs("div",{className:"flex flex-col gap-8",children:[g.jsxs(ee.div,{className:"w-full p-8 rounded-[32px] bg-gradient-to-br from-surface/95 to-surface-light/95 backdrop-blur-xl border border-white/5 relative overflow-hidden flex flex-col md:flex-row items-center gap-8 shadow-2xl z-10",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 via-transparent to-transparent opacity-50"}),g.jsxs(ee.div,{className:"relative w-32 h-32 rounded-full p-[4px] bg-gradient-to-tr from-primary via-purple-400 to-indigo-500 shrink-0 group cursor-pointer",whileHover:{scale:1.03},transition:{duration:.2},children:[g.jsx(ee.div,{className:"absolute -inset-4 rounded-full bg-primary/20 blur-xl z-[-1]",animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),g.jsxs("div",{className:"relative w-full h-full rounded-full overflow-hidden border-4 border-background bg-surface",children:[g.jsx("img",{src:t==null?void 0:t.avatar,alt:"Profile",className:"w-full h-full object-cover"}),g.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:g.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"photo_camera"})})]}),g.jsx("div",{className:"absolute bottom-2 right-2 w-8 h-8 bg-surface rounded-full flex items-center justify-center shadow-lg border border-white/10",children:g.jsx("div",{className:"w-2.5 h-2.5 bg-green-500 rounded-full animate-pulse"})})]}),g.jsxs("div",{className:"flex-1 text-center md:text-left z-10",children:[g.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-baseline gap-3 mb-2",children:[g.jsx("h2",{className:"text-3xl font-black tracking-tight",children:(t==null?void 0:t.name)||"User"}),g.jsxs("span",{className:"px-3 py-1 rounded-full bg-primary/20 border border-primary/20 text-primary text-xs font-bold tracking-wider uppercase",children:[(t==null?void 0:t.plan)||"Free"," Plan"]})]}),g.jsxs("p",{className:"text-text-secondary mb-6 flex items-center justify-center md:justify-start gap-2",children:[g.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"mail"}),t==null?void 0:t.email]}),g.jsxs("div",{className:"flex items-center gap-4 justify-center md:justify-start",children:[g.jsx(ee.button,{className:"px-6 py-2.5 bg-white text-black rounded-xl font-bold text-sm shadow-lg shadow-white/10 hover:shadow-white/20 transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Edit Profile"}),g.jsx(ee.button,{className:"px-6 py-2.5 bg-white/5 text-white border border-white/10 rounded-xl font-bold text-sm hover:bg-white/10 transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:"View Public Profile"})]})]})]}),g.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 lg:gap-12 relative",children:[g.jsx("div",{className:"lg:hidden w-full overflow-x-auto pb-2 scrollbar-hide -mx-6 px-6 sticky top-20 z-40 bg-background/95 backdrop-blur-xl border-b border-white/5",children:g.jsx("div",{className:"flex gap-2 w-max",children:rw.map(Z=>g.jsxs("button",{onClick:()=>ie(Z.id),"aria-current":s===Z.id?"true":void 0,className:`flex items-center gap-2 px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-all border ${s===Z.id?"bg-primary text-white border-primary shadow-neon-sm":"bg-white/5 text-text-secondary border-transparent hover:bg-white/10"}`,children:[g.jsx("span",{className:"material-symbols-outlined text-[16px]",children:Z.icon}),Z.label]},Z.id))})}),g.jsx("aside",{className:"hidden lg:flex flex-col w-64 shrink-0 sticky top-24 h-fit gap-2",children:rw.map(Z=>g.jsxs(ee.button,{onClick:()=>ie(Z.id),"aria-current":s===Z.id?"true":void 0,className:`relative flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-colors group ${s===Z.id?"text-white":"text-text-secondary"}`,initial:!1,whileHover:"hover",whileTap:"tap",variants:{hover:{backgroundColor:s===Z.id?"rgba(0,0,0,0)":"rgba(255,255,255,0.05)"},tap:{scale:.98}},children:[s===Z.id&&g.jsx(ee.div,{layoutId:"activeSidebar",className:"absolute inset-0 bg-primary/10 border-l-2 border-primary rounded-r-xl",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{type:"spring",stiffness:300,damping:30}}),g.jsx(ee.span,{className:`material-symbols-outlined text-[20px] transition-colors duration-300 ${s===Z.id?"text-primary":"text-text-secondary group-hover:text-white"}`,variants:{hover:{x:3},tap:{x:0}},children:Z.icon}),g.jsx(ee.span,{className:"relative z-10 transition-colors duration-300 group-hover:text-white",children:Z.label})]},Z.id))}),g.jsxs(ee.div,{className:"flex-1 flex flex-col gap-12 min-w-0",initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut",delay:.1},children:[g.jsxs(ee.header,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-4",children:[g.jsxs("div",{className:"flex items-baseline gap-2",children:[g.jsx("h1",{className:"text-3xl font-black mb-2 tracking-tight",children:"Settings"}),g.jsx("span",{className:"text-[10px] bg-primary/20 text-primary px-1.5 py-0.5 rounded border border-primary/20 font-mono",children:"v1.1"})]}),g.jsx("p",{className:"text-text-secondary",children:"Manage your account settings and preferences."})]}),g.jsxs(Ji,{mode:"wait",children:[s==="account"&&g.jsxs(ee.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:"easeOut"},className:"space-y-8",children:[g.jsx(Mr,{id:"account",title:"Profile Details",children:g.jsxs("div",{className:"flex flex-col gap-6",children:[g.jsx("div",{className:"flex items-center justify-between",children:g.jsx("p",{className:"text-xs text-text-secondary",children:"Last updated: 2 days ago"})}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsx(sa,{label:"Full Name",defaultValue:(t==null?void 0:t.name)||"Creator",icon:"badge"}),g.jsx(sa,{label:"Username",defaultValue:(t==null?void 0:t.username)||"creator_01",icon:"alternate_email"})]}),g.jsx(sa,{label:"Email Address",defaultValue:(t==null?void 0:t.email)||"user@viralthumb.ai",icon:"mail",readOnly:!0,rightElement:g.jsx("span",{className:"material-symbols-outlined text-text-secondary text-[18px]",children:"lock"}),badge:g.jsx("span",{className:"px-2 py-0.5 rounded bg-green-500/20 text-green-400 text-[10px] font-bold uppercase tracking-wider",children:"Verified"})}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider ml-1",children:"Bio"}),g.jsx(ee.textarea,{className:"w-full h-32 px-4 py-3 bg-background border border-white/10 rounded-xl text-white placeholder:text-white/20 focus:outline-none focus:border-primary/50 transition-all resize-none",placeholder:"Tell us a little bit about yourself...",whileFocus:{borderColor:"rgba(124, 58, 237, 0.5)",boxShadow:"0 0 0 4px rgba(124, 58, 237, 0.1)"}})]}),g.jsxs("div",{className:"p-4 rounded-2xl bg-surface-light border border-white/5 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("img",{src:t==null?void 0:t.avatar,alt:"Profile",className:"w-12 h-12 rounded-full object-cover border border-white/10"}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-sm",children:"Profile Photo"}),g.jsx("p",{className:"text-xs text-text-secondary",children:"JPG, GIF or PNG. Max 1MB."})]})]}),g.jsx(ee.button,{className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-xs font-bold hover:bg-white/10 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Upload New"})]}),g.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-white/5",children:[g.jsx("button",{className:"px-6 py-2 text-sm font-bold text-text-secondary hover:text-white transition-colors",children:"Cancel"}),g.jsx(ow,{})]})]})}),g.jsxs(ee.div,{className:"lg:hidden fixed bottom-0 left-0 right-0 p-4 bg-background/80 backdrop-blur-xl border-t border-white/10 z-50 flex justify-between items-center",initial:{y:100},animate:{y:0},transition:{delay:1},children:[g.jsx("span",{className:"text-xs text-text-secondary font-medium",children:"Unsaved changes"}),g.jsx(ow,{})]}),g.jsxs(ee.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"p-6 rounded-3xl border border-red-500/20 bg-red-500/5 flex flex-col md:flex-row items-center justify-between gap-4 mt-8",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-red-400 mb-1",children:"Delete Account"}),g.jsx("p",{className:"text-sm text-red-400/60",children:"Once you delete your account, there is no going back. Please be certain."})]}),g.jsx(ee.button,{onClick:()=>{C(!0),setTimeout(()=>C(!1),500),J()},disabled:R,className:`px-6 py-2.5 border border-red-500/30 text-red-400 font-bold rounded-xl hover:bg-red-500/10 transition-colors text-sm whitespace-nowrap ${R?"opacity-50 cursor-not-allowed":""}`,whileHover:R?{}:{scale:1.02,boxShadow:"0 0 15px rgba(239, 68, 68, 0.2)"},animate:A?{x:[0,-5,5,-5,5,0]}:{},transition:{duration:.4},children:R?"Deleting...":"Delete Account"})]})]},"account"),s==="appearance"&&g.jsx(ee.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:"easeOut"},children:g.jsx(Mr,{id:"appearance",title:"Appearance",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs(ee.div,{className:"p-6 rounded-3xl bg-surface border border-white/5 flex items-center justify-between",whileHover:{y:-4,boxShadow:"0 10px 30px -10px rgba(0,0,0,0.5)"},transition:{duration:.2},children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-500/10 flex items-center justify-center text-indigo-400",children:g.jsx("span",{className:"material-symbols-outlined",children:"dark_mode"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-sm",children:"Dark Mode"}),g.jsx("p",{className:"text-xs text-text-secondary",children:"Easier on the eyes"})]})]}),g.jsx(gu,{checked:O==="dark",onChange:Z=>W(Z?"dark":"light"),ariaLabel:"Toggle theme"})]}),g.jsxs(ee.div,{className:"p-6 rounded-3xl bg-surface border border-white/5 flex items-center justify-between",whileHover:{y:-4,boxShadow:"0 10px 30px -10px rgba(0,0,0,0.5)"},transition:{duration:.2},children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-pink-500/10 flex items-center justify-center text-pink-400",children:g.jsx("span",{className:"material-symbols-outlined",children:"animation"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-sm",children:"UI Animations"}),g.jsx("p",{className:"text-xs text-text-secondary",children:"Enable smooth transitions"})]})]}),g.jsx(gu,{checked:d,onChange:f})]}),g.jsxs(ee.div,{className:"md:col-span-2 h-32 rounded-3xl bg-surface border border-white/5 relative overflow-hidden flex items-center justify-center group",whileHover:{y:-4,boxShadow:"0 10px 30px -10px rgba(0,0,0,0.5)"},transition:{duration:.2},children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 to-transparent opacity-50"}),g.jsx(ee.div,{className:"w-16 h-16 rounded-2xl bg-gradient-to-tr from-primary to-indigo-500 shadow-neon",animate:{rotate:360},transition:{duration:8,repeat:1/0,ease:"linear"}}),g.jsx("p",{className:"absolute bottom-4 text-xs text-white/20 font-mono uppercase tracking-widest",children:"Preview"})]}),g.jsxs(ee.div,{className:"md:col-span-2 p-6 rounded-3xl bg-surface border border-white/5 flex flex-col gap-4",whileHover:{y:-4,boxShadow:"0 10px 30px -10px rgba(0,0,0,0.5)"},transition:{duration:.2},children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-sm",children:"Theme Demo"}),g.jsx("p",{className:"text-xs text-text-secondary",children:"This panel reflects theme changes immediately."})]}),g.jsx(gu,{checked:O==="dark",onChange:Z=>W(Z?"dark":"light"),ariaLabel:"Toggle theme"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("div",{className:"p-4 rounded-2xl bg-surface-light border border-white/10",children:[g.jsx("p",{className:"text-sm font-bold",children:"Card"}),g.jsx("p",{className:"text-[10px] text-text-secondary",children:"Background adapts to theme"})]}),g.jsx("div",{className:"p-4 rounded-2xl bg-surface-light border border-white/10",children:g.jsx("input",{type:"text",placeholder:"Input example",className:"w-full h-10 px-3 bg-surface border border-white/10 rounded-lg text-white placeholder:text-white/20 focus:outline-none focus:border-primary/50 transition-all"})}),g.jsxs("div",{className:"p-4 rounded-2xl bg-surface-light border border-white/10 flex items-center justify-between",children:[g.jsx("button",{className:"px-4 py-2 rounded-lg bg-primary text-white text-xs font-bold",children:"Primary"}),g.jsx("button",{className:"px-4 py-2 rounded-lg bg-white text-black text-xs font-bold",children:"Contrast"})]})]})]})]})})},"appearance"),s==="notifications"&&g.jsx(ee.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:"easeOut"},children:g.jsx(Mr,{id:"notifications",title:"Notifications",children:g.jsxs(ee.div,{className:"space-y-4",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},children:[g.jsx(ee.div,{variants:{hidden:{opacity:0,x:-20},visible:{opacity:1,x:0}},children:g.jsx(Ff,{icon:"mail",color:"text-blue-400",bg:"bg-blue-500/10",title:"Email Notifications",sub:"Receive weekly digests",checked:p,onChange:y})}),g.jsx(ee.div,{variants:{hidden:{opacity:0,x:-20},visible:{opacity:1,x:0}},children:g.jsx(Ff,{icon:"campaign",color:"text-orange-400",bg:"bg-orange-500/10",title:"Product Updates",sub:"New features and improvements",checked:b,onChange:w})}),g.jsx(ee.div,{variants:{hidden:{opacity:0,x:-20},visible:{opacity:1,x:0}},children:g.jsx(Ff,{icon:"local_offer",color:"text-green-400",bg:"bg-green-500/10",title:"Marketing",sub:"Promotions and special offers",checked:T,onChange:E})})]})})},"notifications"),s==="security"&&g.jsx(ee.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:"easeOut"},children:g.jsx(Mr,{id:"security",title:"Security",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("h3",{className:"font-bold text-sm",children:"Change Password"}),g.jsx("span",{className:"text-[10px] bg-white/5 px-2 py-1 rounded text-text-secondary",children:"Last changed: 3 months ago"})]}),g.jsx(sa,{label:"Current Password",type:"password",defaultValue:".........."}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-text-secondary",children:"New Password"}),g.jsxs("div",{className:"relative group",children:[g.jsx("input",{type:"password",value:N,onChange:Z=>I(Z.target.value),className:"w-full h-12 px-4 bg-surface-light border border-white/10 rounded-xl text-sm focus:outline-none focus:border-primary/50 transition-all text-white"}),g.jsx("div",{className:"absolute inset-0 rounded-xl bg-primary/5 opacity-0 group-focus-within:opacity-100 pointer-events-none transition-opacity"})]}),g.jsx("div",{className:"h-2 rounded-full bg-white/10 overflow-hidden",children:g.jsx("div",{className:`h-full transition-all ${L<=1?"bg-red-500":L===2?"bg-yellow-400":L===3?"bg-primary":"bg-emerald-500"}`,style:{width:`${L/4*100}%`},"aria-label":"Password strength indicator"})}),g.jsx("p",{className:"text-[10px] text-text-secondary",children:L<=1?"Weak":L===2?"Fair":L===3?"Good":"Strong"})]}),g.jsx(sa,{label:"Confirm New",type:"password"})]}),g.jsx("div",{className:"flex justify-end pt-2",children:g.jsx("button",{className:"text-xs font-bold bg-white/5 hover:bg-white/10 px-4 py-2 rounded-lg transition-colors",children:"Update Password"})})]}),g.jsxs("div",{className:"p-6 rounded-3xl bg-surface border border-white/5 h-full",children:[g.jsx("h3",{className:"font-bold text-sm mb-4",children:"Active Sessions"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/5",children:[g.jsx("span",{className:"material-symbols-outlined text-text-secondary",children:"laptop_mac"}),g.jsxs("div",{className:"flex-1",children:[g.jsx("p",{className:"text-xs font-bold",children:"Chrome on macOS"}),g.jsx("p",{className:"text-[10px] text-text-secondary",children:"New York, USA  192.168.1.1"})]}),g.jsx("span",{className:"text-[10px] text-green-400 font-bold bg-green-400/10 px-2 py-0.5 rounded-full",children:"Active"})]}),g.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl border border-white/5 opacity-60",children:[g.jsx("span",{className:"material-symbols-outlined text-text-secondary",children:"smartphone"}),g.jsxs("div",{className:"flex-1",children:[g.jsx("p",{className:"text-xs font-bold",children:"Safari on iPhone 14"}),g.jsx("p",{className:"text-[10px] text-text-secondary",children:"New York, USA  192.168.1.1"})]}),g.jsx("span",{className:"text-[10px] text-text-secondary",children:"2h ago"})]}),g.jsx("button",{className:"text-xs text-red-400 hover:text-red-300 hover:underline font-medium w-full text-center mt-4 transition-all",children:"Log out of all other sessions"})]})]})]})})},"security"),s==="billing"&&g.jsx(ee.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:"easeOut"},children:g.jsxs(Mr,{id:"billing",title:"Subscription",children:[g.jsx(ee.div,{className:"p-1 rounded-3xl bg-gradient-to-r from-white/5 to-white/10 mb-6",whileHover:{y:-4,boxShadow:"0 10px 30px -10px rgba(0,0,0,0.5)"},transition:{duration:.2},children:g.jsxs("div",{className:"bg-surface rounded-[22px] p-6 md:p-8 flex flex-col md:flex-row items-center justify-between gap-6",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("span",{className:"text-xs font-bold text-text-secondary uppercase tracking-widest",children:"Current Plan"}),g.jsx("span",{className:"bg-green-500/10 text-green-400 text-[10px] font-black px-2 py-0.5 rounded-full uppercase",children:"Active"})]}),g.jsx("h2",{className:"text-3xl font-black mb-2",children:"Pro Creator"}),g.jsx("p",{className:"text-sm text-text-secondary max-w-sm",children:"You have access to 4K export, priority generation, and 100 monthly credits."})]}),g.jsxs("div",{className:"text-right flex flex-col items-end gap-4",children:[g.jsxs("div",{className:"flex items-baseline gap-1",children:[g.jsx("span",{className:"text-4xl font-black",children:"$29"}),g.jsx("span",{className:"text-text-secondary",children:"/mo"})]}),g.jsxs(ee.button,{onClick:()=>e("pricing"),className:"px-6 py-2.5 bg-[length:200%_200%] bg-gradient-to-r from-primary via-purple-500 to-indigo-500 text-white font-black rounded-xl shadow-neon flex items-center gap-2",whileHover:{scale:1.05,backgroundPosition:"100% 50%",boxShadow:"0 0 30px rgba(139, 92, 246, 0.6)"},whileTap:{scale:.95},transition:{duration:.3},children:["Upgrade Plan ",g.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_forward"})]})]})]})}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs(ee.div,{className:"p-6 rounded-3xl bg-surface border border-white/5 flex flex-col justify-between",whileHover:{y:-4,boxShadow:"0 10px 30px -10px rgba(0,0,0,0.5)"},transition:{duration:.2},children:[g.jsxs("div",{className:"flex justify-between items-start mb-4",children:[g.jsx("h3",{className:"font-bold text-sm",children:"Payment Method"}),g.jsx("button",{className:"text-[10px] text-primary font-bold hover:underline",children:"Edit"})]}),g.jsxs("div",{className:"flex items-center gap-4 bg-surface-light p-4 rounded-xl border border-white/5",children:[g.jsxs("div",{className:"w-10 h-6 bg-white rounded flex items-center justify-center",children:[g.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 -mr-1 mix-blend-multiply"}),g.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 mix-blend-multiply"})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-xs font-bold",children:"Mastercard ending in 4242"}),g.jsx("p",{className:"text-[10px] text-text-secondary",children:"Expires 12/26"})]})]})]}),g.jsxs(ee.div,{className:"p-6 rounded-3xl bg-surface border border-white/5",whileHover:{y:-4,boxShadow:"0 10px 30px -10px rgba(0,0,0,0.5)"},transition:{duration:.2},children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"font-bold text-sm",children:"Invoice History"}),g.jsx("button",{className:"text-[10px] text-text-secondary hover:text-white",children:"View All"})]}),g.jsx("div",{className:"space-y-3",children:[1,2,3].map(Z=>g.jsxs("div",{className:"h-8 rounded-lg bg-white/5 animate-pulse flex items-center px-3 gap-3 overflow-hidden relative",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent -translate-x-full animate-[shimmer_1.5s_infinite]"}),g.jsx("div",{className:"w-16 h-2 bg-white/10 rounded"}),g.jsx("div",{className:"flex-1"}),g.jsx("div",{className:"w-8 h-2 bg-white/10 rounded"})]},Z))})]})]})]})},"billing"),s==="credits"&&g.jsx(ee.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:"easeOut"},children:g.jsxs(Mr,{id:"credits",title:"Credits Usage",children:[g.jsx(x5,{user:t,onNavigate:e}),g.jsxs("div",{className:"mt-8",children:[g.jsx("h3",{className:"font-bold text-sm mb-4",children:"Usage History"}),g.jsxs("div",{className:"space-y-2",children:[g.jsx($f,{icon:"image",title:"Generated Thumbnail",time:"Oct 24, 2023  2:30 PM",delta:"-1 credit"}),g.jsx($f,{icon:"autorenew",title:"Regenerated Variant",time:"Oct 24, 2023  2:35 PM",delta:"-1 credit"}),g.jsx($f,{icon:"add_circle",title:"Monthly Allocation",time:"Oct 01, 2023  12:00 AM",delta:"+50 credits",green:!0})]}),g.jsx("button",{className:"w-full py-4 mt-4 rounded-xl border border-white/5 border-dashed text-xs font-bold text-text-secondary hover:text-white hover:border-white/20 transition-all",children:"View full history"})]})]})},"credits")]}),g.jsx("div",{className:"h-20"})," "]})]})]})})]})},Mr=({id:t,title:e,children:n})=>g.jsxs(ee.section,{id:t,className:"scroll-mt-32",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},children:[g.jsx("h2",{className:"text-xl font-bold mb-6",children:e}),g.jsx("div",{children:n})]}),sa=({label:t,type:e="text",defaultValue:n,readOnly:s})=>{const[o,l]=B.useState(!1),[u,d]=B.useState(!1);return g.jsxs("div",{className:"space-y-2 group",children:[g.jsx(ee.label,{className:`text-[10px] font-black uppercase tracking-widest block transition-colors ${o?"text-primary":"text-text-secondary"}`,animate:{y:o?-2:0},children:t}),g.jsxs("div",{className:"relative",children:[g.jsx(ee.div,{className:`absolute -inset-[1px] rounded-xl bg-gradient-to-r from-primary/50 to-indigo-500/50 opacity-0 transition-opacity duration-300 ${o?"opacity-100":""}`,layoutId:`input-glow-${t}`}),g.jsxs("div",{className:"relative group/input",children:[g.jsx("input",{type:e,defaultValue:n,readOnly:s,onFocus:()=>l(!0),onBlur:()=>l(!1),className:`w-full h-12 px-4 bg-surface-light border rounded-xl text-sm focus:outline-none transition-all duration-300 ${s?"opacity-60 cursor-not-allowed border-white/5 text-white/60":"text-white border-white/10 focus:border-transparent focus:bg-surface"}`}),s&&g.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 z-10",children:[g.jsx(ee.div,{className:"text-white/20 cursor-help opacity-0 group-hover/input:opacity-100 transition-opacity duration-300",onHoverStart:()=>d(!0),onHoverEnd:()=>d(!1),children:g.jsx("span",{className:"material-symbols-outlined text-sm",children:"lock"})}),g.jsx(Ji,{children:u&&g.jsxs(ee.div,{className:"absolute bottom-full right-0 mb-3 px-3 py-2 bg-black/90 backdrop-blur-xl border border-white/10 rounded-lg text-[10px] text-white font-medium whitespace-nowrap shadow-2xl",initial:{opacity:0,scale:.9,y:5},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:5},transition:{duration:.2},children:["Email cannot be changed",g.jsx("div",{className:"absolute -bottom-1 right-2 w-2 h-2 bg-black/90 border-r border-b border-white/10 rotate-45"})]})})]})]})]})]})},gu=({checked:t,onChange:e,ariaLabel:n})=>g.jsx("div",{role:"switch","aria-checked":t,"aria-label":n||"Toggle",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),e(!t))},onClick:()=>e(!t),className:`w-14 h-8 rounded-full p-1 cursor-pointer transition-colors duration-300 outline-none focus:ring-2 focus:ring-primary/50 border border-white/10 ${t?"bg-primary":"bg-surface-light"}`,children:g.jsx(ee.div,{className:"w-6 h-6 rounded-full bg-white shadow-sm",layout:!0,transition:{type:"spring",stiffness:500,damping:30},animate:{x:t?28:0}})}),Ff=({icon:t,color:e,bg:n,title:s,sub:o,checked:l,onChange:u})=>g.jsxs(ee.div,{className:"flex items-center justify-between p-4 rounded-2xl bg-surface border border-white/5 transition-all group cursor-pointer",whileHover:{scale:1.01,borderColor:"rgba(255,255,255,0.1)",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},whileTap:{scale:.99},children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center transition-transform duration-300 group-hover:scale-110 ${n} ${e}`,children:g.jsx("span",{className:"material-symbols-outlined",children:t})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-sm group-hover:text-primary transition-colors duration-300",children:s}),g.jsx("p",{className:"text-xs text-text-secondary",children:o})]})]}),g.jsx(gu,{checked:l,onChange:u})]}),$f=({icon:t,title:e,time:n,delta:s,green:o})=>g.jsxs(ee.div,{className:"flex items-center justify-between p-4 rounded-2xl bg-surface border border-white/5 transition-all group cursor-default",whileHover:{y:-2,borderColor:"rgba(139, 92, 246, 0.2)",backgroundColor:"rgba(255,255,255,0.03)"},children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-transform duration-300 group-hover:rotate-12 ${o?"bg-green-500/10 text-green-400":"bg-white/5 text-text-secondary"}`,children:g.jsx("span",{className:"material-symbols-outlined text-[18px]",children:t})}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-bold group-hover:text-white transition-colors",children:e}),g.jsx("p",{className:"text-[10px] text-text-secondary",children:n})]})]}),g.jsx("span",{className:`text-xs font-black ${o?"text-green-400":"text-white/60"}`,children:s})]}),ow=()=>{const[t,e]=B.useState(!1);return g.jsxs(ee.button,{onClick:()=>{e(!0),setTimeout(()=>e(!1),2e3)},className:"relative px-6 py-2.5 bg-primary text-white font-bold rounded-xl shadow-neon transition-all overflow-hidden group",whileHover:{scale:1.02,boxShadow:"0 0 25px rgba(139, 92, 246, 0.6)"},whileTap:{scale:.98},children:[g.jsx(ee.div,{className:"absolute inset-0 -translate-x-full bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12",animate:{translateX:["100%"]},transition:{duration:2,repeat:1/0,ease:"linear",repeatDelay:3}}),g.jsx("span",{className:`relative z-10 transition-opacity duration-200 ${t?"opacity-0":"opacity-100"}`,children:"Save Changes"}),g.jsx(Ji,{children:t&&g.jsx(ee.div,{className:"absolute inset-0 flex items-center justify-center z-20",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},children:g.jsx("span",{className:"material-symbols-outlined text-sm font-bold",children:"check"})})}),g.jsx("div",{className:"absolute inset-0 rounded-xl overflow-hidden pointer-events-none",children:g.jsx("div",{className:"absolute inset-0 bg-white/0 group-hover:bg-white/10 transition-colors duration-300"})})]})},x5=({user:t,onNavigate:e})=>{const s={free:50,creator:500,pro:2e3}[(t==null?void 0:t.plan)||"free"]||50,o=(t==null?void 0:t.credits)||0,l=Math.max(0,s-o),u=Math.min(100,Math.round(l/s*100));let d="text-green-400 bg-green-500/10",f="from-green-400 to-emerald-500";return u>=90?(d="text-red-400 bg-red-500/10",f="from-red-500 to-orange-500"):u>=70?(d="text-yellow-400 bg-yellow-500/10",f="from-yellow-400 to-orange-500"):u>=40&&(d="text-primary bg-primary/10",f="from-primary to-indigo-500"),g.jsxs(ee.div,{className:"p-8 rounded-3xl bg-surface border border-white/5 relative group",whileHover:{y:-4,boxShadow:"0 10px 30px -10px rgba(0,0,0,0.5)"},transition:{duration:.2},children:[g.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity z-10 duration-300 pointer-events-none",children:g.jsx("div",{className:"bg-black/90 backdrop-blur border border-white/10 px-3 py-2 rounded-lg text-[10px] text-text-secondary max-w-[200px] shadow-xl",children:"Credits renew on the 1st of every month. Unused credits do not rollover."})}),g.jsxs("div",{className:"flex justify-between items-end mb-4",children:[g.jsxs("div",{className:"flex flex-col",children:[g.jsx("span",{className:"text-xs text-text-secondary font-bold uppercase tracking-wider mb-1",children:"Monthly Usage"}),g.jsxs("div",{className:"flex items-baseline gap-1",children:[g.jsx("span",{className:"text-4xl font-black text-white",children:l}),g.jsxs("span",{className:"text-lg text-text-secondary font-bold",children:["/ ",s]})]})]}),g.jsxs("div",{className:`text-xs px-3 py-1.5 rounded-lg font-bold flex items-center gap-2 ${d}`,children:[u>=90&&g.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"warning"}),u,"% Used"]})]}),g.jsx("div",{className:"h-4 bg-white/5 rounded-full overflow-hidden mb-4 relative","aria-label":`Credit usage: ${u}%`,children:g.jsx(ee.div,{className:`h-full bg-gradient-to-r ${f}`,initial:{width:0},whileInView:{width:`${u}%`},transition:{duration:1.5,ease:"easeOut"}})}),g.jsxs("div",{className:"flex justify-between items-center text-xs text-text-secondary",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"w-2 h-2 rounded-full bg-white/20"}),g.jsxs("span",{children:[o," credits remaining"]})]}),g.jsx("button",{onClick:()=>e("pricing"),className:"text-primary hover:text-white transition-colors font-bold hover:underline",children:"Buy more credits "})]})]})},b5=()=>{const[t,e]=B.useState("landing"),[n,s]=B.useState(null),[o,l]=B.useState(!0);B.useEffect(()=>{let y=!0,b;const w=async()=>{if(!Ut){l(!1);return}b=setTimeout(()=>{y&&(console.warn("Auth check timeout - proceeding without session"),l(!1))},5e3);try{const{data:{session:A},error:C}=await $e.auth.getSession();if(b&&clearTimeout(b),C){console.error("Session error:",C),(C.message.includes("refresh_token")||C.status===400)&&(console.warn("Stale session detected - signing out"),await $e.auth.signOut()),y&&l(!1);return}A!=null&&A.user&&y?await T(A.user):y&&l(!1)}catch(A){b&&clearTimeout(b),console.error("Auth init error:",A),y&&l(!1)}},T=async A=>{var C,R;if(!A){l(!1);return}try{s({id:A.id,name:((C=A.user_metadata)==null?void 0:C.full_name)||"Creator",username:((R=A.user_metadata)==null?void 0:R.user_name)||"user",email:A.email||"",avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${A.id}`,credits:50,plan:"free",role:"user"}),e(L=>L==="login"||L==="landing"?"dashboard":L);const k=Vk(A),N=new Promise((L,H)=>setTimeout(()=>H(new Error("Profile sync timeout")),5e3)),I=await Promise.race([k,N]);if(I){if(I.is_deleted){console.warn("User is soft-deleted. Logging out."),await $e.auth.signOut(),alert("This account has been deactivated.");return}s({id:I.id,name:I.full_name||"Creator",username:I.username||"user",email:A.email||I.email,avatar:I.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${A.id}`,credits:I.credits??50,plan:I.plan||"free",role:I.role||"user",is_deleted:I.is_deleted,deleted_at:I.deleted_at})}}catch(k){console.warn(" Profile sync failed or timed out. Using fallback user state.",k.message)}finally{y&&l(!1)}};w();const{data:{subscription:E}}=$e.auth.onAuthStateChange(async(A,C)=>{console.log(`Auth Event: ${A}`),(A==="SIGNED_IN"||A==="USER_UPDATED"||A==="INITIAL_SESSION")&&(C!=null&&C.user)&&y?await T(C.user):A==="SIGNED_OUT"&&y?(s(null),e("landing"),l(!1)):A==="INITIAL_SESSION"&&!C&&y&&l(!1)});return()=>{y=!1,b&&clearTimeout(b),E.unsubscribe()}},[]);const u=async()=>{Ut?await $e.auth.signOut():(s(null),e("landing"))},d=y=>{s({id:(y==null?void 0:y.id)||"mock-user",name:(y==null?void 0:y.name)||"Creator Guest",username:(y==null?void 0:y.username)||"guest_creator",email:(y==null?void 0:y.email)||"guest@viralthumb.ai",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=guest",credits:50,plan:"free",role:"user"}),e("dashboard")},f=y=>{if(y==="admin"&&(n==null?void 0:n.role)!=="admin"&&Ut){alert("Access Denied: Administrator role required.");return}e(y);const b=_s.endsWith("/")?_s.slice(0,-1):_s,w=y==="landing"?b||"/":`${b}/${y}`;window.history.pushState({},"",w),window.scrollTo(0,0)};if(B.useEffect(()=>{const y=()=>{let b=window.location.pathname;const w=_s.endsWith("/")?_s.slice(0,-1):_s;b.startsWith(w)&&(b=b.substring(w.length));const T=b.replace(/^\//,"")||"landing";["landing","login","dashboard","generator","templates","pricing","checkout","success","admin","diagnostic","history","settings"].includes(T)&&e(T)};return window.addEventListener("popstate",y),y(),()=>window.removeEventListener("popstate",y)},[]),o)return g.jsxs("div",{className:"min-h-screen bg-background flex flex-col items-center justify-center p-6 text-center",children:[g.jsxs("div",{className:"w-16 h-16 relative mb-8",children:[g.jsx("div",{className:"absolute inset-0 border-4 border-primary/10 rounded-full"}),g.jsx("div",{className:"absolute inset-0 border-4 border-primary border-t-transparent rounded-full animate-spin shadow-neon"})]}),g.jsx("h2",{className:"text-xl font-black mb-2 tracking-tight",children:"Authenticating Studio..."}),g.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-primary animate-pulse",children:"Checking Algorithm Access"})]});const p=()=>{switch(t){case"landing":return g.jsx(ix,{onNavigate:f});case"login":return g.jsx(qk,{onLogin:d,onNavigate:f});case"dashboard":return g.jsx(zk,{user:n,onNavigate:f,onLogout:u});case"generator":return g.jsx(l5,{user:n,onNavigate:f,onLogout:u});case"templates":return g.jsx(c5,{onNavigate:f,user:n,onLogout:u});case"history":return g.jsx(y5,{user:n,onNavigate:f,onLogout:u});case"settings":return g.jsx(v5,{user:n,onNavigate:f,onLogout:u});case"pricing":return g.jsx(d5,{onNavigate:f,user:n,onLogout:u});case"checkout":return g.jsx(f5,{onNavigate:f});case"success":return g.jsx(h5,{onNavigate:f});case"admin":return g.jsx(p5,{onNavigate:f});case"diagnostic":return g.jsx(g5,{});default:return g.jsx(ix,{onNavigate:f})}};return g.jsx("div",{className:"min-h-screen font-sans bg-background text-white selection:bg-primary selection:text-white",children:p()})},tS=document.getElementById("root");if(!tS)throw new Error("Could not find root element to mount to");const w5=_A.createRoot(tS);w5.render(g.jsx(la.StrictMode,{children:g.jsx(tM,{children:g.jsx(b5,{})})}));
